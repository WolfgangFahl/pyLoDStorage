
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>pyLodStorage API Documentation</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.342714a4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pylodstorage-api-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="pyLodStorage API Documentation" class="md-header__button md-logo" aria-label="pyLodStorage API Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            pyLodStorage API Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="pyLodStorage API Documentation" class="md-nav__button md-logo" aria-label="pyLodStorage API Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    pyLodStorage API Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lodstorage" class="md-nav__link">
    <span class="md-ellipsis">
      lodstorage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.docstring_parser" class="md-nav__link">
    <span class="md-ellipsis">
      docstring_parser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="docstring_parser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.docstring_parser.DocstringParser" class="md-nav__link">
    <span class="md-ellipsis">
      DocstringParser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DocstringParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.docstring_parser.DocstringParser.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.exception_handler" class="md-nav__link">
    <span class="md-ellipsis">
      exception_handler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="exception_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.exception_handler.ExceptionHandler" class="md-nav__link">
    <span class="md-ellipsis">
      ExceptionHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExceptionHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.exception_handler.ExceptionHandler.handle" class="md-nav__link">
    <span class="md-ellipsis">
      handle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.linkml" class="md-nav__link">
    <span class="md-ellipsis">
      linkml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="linkml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.Class" class="md-nav__link">
    <span class="md-ellipsis">
      Class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.PythonTypes" class="md-nav__link">
    <span class="md-ellipsis">
      PythonTypes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PythonTypes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.PythonTypes.get_linkml_range" class="md-nav__link">
    <span class="md-ellipsis">
      get_linkml_range
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.PythonTypes.get_rdf_datatype" class="md-nav__link">
    <span class="md-ellipsis">
      get_rdf_datatype
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.Schema" class="md-nav__link">
    <span class="md-ellipsis">
      Schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.Slot" class="md-nav__link">
    <span class="md-ellipsis">
      Slot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.linkml_gen" class="md-nav__link">
    <span class="md-ellipsis">
      linkml_gen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="linkml_gen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml_gen.LinkMLGen" class="md-nav__link">
    <span class="md-ellipsis">
      LinkMLGen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LinkMLGen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml_gen.LinkMLGen.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml_gen.LinkMLGen.gen_schema_from_instance" class="md-nav__link">
    <span class="md-ellipsis">
      gen_schema_from_instance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.lod" class="md-nav__link">
    <span class="md-ellipsis">
      lod
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lod">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD" class="md-nav__link">
    <span class="md-ellipsis">
      LOD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LOD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.addLookup" class="md-nav__link">
    <span class="md-ellipsis">
      addLookup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.filterFields" class="md-nav__link">
    <span class="md-ellipsis">
      filterFields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.getFields" class="md-nav__link">
    <span class="md-ellipsis">
      getFields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.getLookup" class="md-nav__link">
    <span class="md-ellipsis">
      getLookup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.handleListTypes" class="md-nav__link">
    <span class="md-ellipsis">
      handleListTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.intersect" class="md-nav__link">
    <span class="md-ellipsis">
      intersect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.setNone" class="md-nav__link">
    <span class="md-ellipsis">
      setNone
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.setNone4List" class="md-nav__link">
    <span class="md-ellipsis">
      setNone4List
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.sortKey" class="md-nav__link">
    <span class="md-ellipsis">
      sortKey
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.lod2xml" class="md-nav__link">
    <span class="md-ellipsis">
      lod2xml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lod2xml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod2xml.Lod2Xml" class="md-nav__link">
    <span class="md-ellipsis">
      Lod2Xml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lod2Xml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod2xml.Lod2Xml.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod2xml.Lod2Xml.asXml" class="md-nav__link">
    <span class="md-ellipsis">
      asXml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.lod_csv" class="md-nav__link">
    <span class="md-ellipsis">
      lod_csv
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lod_csv">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV" class="md-nav__link">
    <span class="md-ellipsis">
      CSV
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CSV">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.__new__" class="md-nav__link">
    <span class="md-ellipsis">
      __new__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.fixTypes" class="md-nav__link">
    <span class="md-ellipsis">
      fixTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.fromCSV" class="md-nav__link">
    <span class="md-ellipsis">
      fromCSV
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.get_instance" class="md-nav__link">
    <span class="md-ellipsis">
      get_instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.readFile" class="md-nav__link">
    <span class="md-ellipsis">
      readFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.restoreFromCSVFile" class="md-nav__link">
    <span class="md-ellipsis">
      restoreFromCSVFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.storeToCSVFile" class="md-nav__link">
    <span class="md-ellipsis">
      storeToCSVFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.toCSV" class="md-nav__link">
    <span class="md-ellipsis">
      toCSV
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.writeFile" class="md-nav__link">
    <span class="md-ellipsis">
      writeFile
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.mwTable" class="md-nav__link">
    <span class="md-ellipsis">
      mwTable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mwTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.mwTable.MediaWikiTable" class="md-nav__link">
    <span class="md-ellipsis">
      MediaWikiTable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MediaWikiTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.mwTable.MediaWikiTable.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.mwTable.MediaWikiTable.addHeader" class="md-nav__link">
    <span class="md-ellipsis">
      addHeader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.mwTable.MediaWikiTable.asWikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      asWikiMarkup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.mysql" class="md-nav__link">
    <span class="md-ellipsis">
      mysql
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mysql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.mysql.MySqlQuery" class="md-nav__link">
    <span class="md-ellipsis">
      MySqlQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MySqlQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.mysql.MySqlQuery.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.mysql.MySqlQuery.decode_record" class="md-nav__link">
    <span class="md-ellipsis">
      decode_record
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.mysql.MySqlQuery.execute_sql_query" class="md-nav__link">
    <span class="md-ellipsis">
      execute_sql_query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.mysql.MySqlQuery.query_generator" class="md-nav__link">
    <span class="md-ellipsis">
      query_generator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.params" class="md-nav__link">
    <span class="md-ellipsis">
      params
    </span>
  </a>
  
    <nav class="md-nav" aria-label="params">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Param" class="md-nav__link">
    <span class="md-ellipsis">
      Param
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params" class="md-nav__link">
    <span class="md-ellipsis">
      Params
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Params">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params.apply_parameters" class="md-nav__link">
    <span class="md-ellipsis">
      apply_parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params.apply_parameters_with_check" class="md-nav__link">
    <span class="md-ellipsis">
      apply_parameters_with_check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params.audit" class="md-nav__link">
    <span class="md-ellipsis">
      audit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params.set" class="md-nav__link">
    <span class="md-ellipsis">
      set
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.StoreDictKeyPair" class="md-nav__link">
    <span class="md-ellipsis">
      StoreDictKeyPair
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StoreDictKeyPair">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.StoreDictKeyPair.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.plot" class="md-nav__link">
    <span class="md-ellipsis">
      plot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="plot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot" class="md-nav__link">
    <span class="md-ellipsis">
      Plot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Plot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot.barchart" class="md-nav__link">
    <span class="md-ellipsis">
      barchart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot.hist" class="md-nav__link">
    <span class="md-ellipsis">
      hist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot.showMe" class="md-nav__link">
    <span class="md-ellipsis">
      showMe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot.titleMe" class="md-nav__link">
    <span class="md-ellipsis">
      titleMe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.prefix_config" class="md-nav__link">
    <span class="md-ellipsis">
      prefix_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="prefix_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfig" class="md-nav__link">
    <span class="md-ellipsis">
      PrefixConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PrefixConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfig.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfig.as_text" class="md-nav__link">
    <span class="md-ellipsis">
      as_text
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs" class="md-nav__link">
    <span class="md-ellipsis">
      PrefixConfigs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PrefixConfigs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.get_instance" class="md-nav__link">
    <span class="md-ellipsis">
      get_instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.get_prefix_declarations" class="md-nav__link">
    <span class="md-ellipsis">
      get_prefix_declarations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.get_selected_declarations" class="md-nav__link">
    <span class="md-ellipsis">
      get_selected_declarations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.of_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      of_yaml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.preload" class="md-nav__link">
    <span class="md-ellipsis">
      preload
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      prefixes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="prefixes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefixes.Prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      Prefixes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prefixes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefixes.Prefixes.extract_prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      extract_prefixes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefixes.Prefixes.getPrefixes" class="md-nav__link">
    <span class="md-ellipsis">
      getPrefixes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefixes.Prefixes.merge_prefix_dict" class="md-nav__link">
    <span class="md-ellipsis">
      merge_prefix_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefixes.Prefixes.merge_prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      merge_prefixes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.profiler" class="md-nav__link">
    <span class="md-ellipsis">
      profiler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="profiler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.profiler.Profiler" class="md-nav__link">
    <span class="md-ellipsis">
      Profiler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Profiler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.profiler.Profiler.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.profiler.Profiler.start" class="md-nav__link">
    <span class="md-ellipsis">
      start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.profiler.Profiler.time" class="md-nav__link">
    <span class="md-ellipsis">
      time
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
    <nav class="md-nav" aria-label="query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Endpoint
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Endpoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Endpoint.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Endpoint.getDefault" class="md-nav__link">
    <span class="md-ellipsis">
      getDefault
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Endpoint.get_prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      get_prefixes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.EndpointManager" class="md-nav__link">
    <span class="md-ellipsis">
      EndpointManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EndpointManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.EndpointManager.getEndpointNames" class="md-nav__link">
    <span class="md-ellipsis">
      getEndpointNames
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.EndpointManager.getEndpoints" class="md-nav__link">
    <span class="md-ellipsis">
      getEndpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.EndpointManager.ofYaml" class="md-nav__link">
    <span class="md-ellipsis">
      ofYaml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Format" class="md-nav__link">
    <span class="md-ellipsis">
      Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query" class="md-nav__link">
    <span class="md-ellipsis">
      Query
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.add_endpoint_prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      add_endpoint_prefixes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.apply_default_params" class="md-nav__link">
    <span class="md-ellipsis">
      apply_default_params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.asWikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      asWikiMarkup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.asWikiSourceMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      asWikiSourceMarkup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.documentQueryResult" class="md-nav__link">
    <span class="md-ellipsis">
      documentQueryResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.formatWithValueFormatters" class="md-nav__link">
    <span class="md-ellipsis">
      formatWithValueFormatters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.getLink" class="md-nav__link">
    <span class="md-ellipsis">
      getLink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.getTryItUrl" class="md-nav__link">
    <span class="md-ellipsis">
      getTryItUrl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.preFormatWithCallBacks" class="md-nav__link">
    <span class="md-ellipsis">
      preFormatWithCallBacks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.prefixToLink" class="md-nav__link">
    <span class="md-ellipsis">
      prefixToLink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.set_default_params" class="md-nav__link">
    <span class="md-ellipsis">
      set_default_params
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryManager" class="md-nav__link">
    <span class="md-ellipsis">
      QueryManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryManager.getQueries" class="md-nav__link">
    <span class="md-ellipsis">
      getQueries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryResultDocumentation" class="md-nav__link">
    <span class="md-ellipsis">
      QueryResultDocumentation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryResultDocumentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryResultDocumentation.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryResultDocumentation.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryResultDocumentation.asText" class="md-nav__link">
    <span class="md-ellipsis">
      asText
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryResultDocumentation.uniCode2Latex" class="md-nav__link">
    <span class="md-ellipsis">
      uniCode2Latex
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QuerySyntaxHighlight" class="md-nav__link">
    <span class="md-ellipsis">
      QuerySyntaxHighlight
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QuerySyntaxHighlight">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QuerySyntaxHighlight.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QuerySyntaxHighlight.highlight" class="md-nav__link">
    <span class="md-ellipsis">
      highlight
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatter" class="md-nav__link">
    <span class="md-ellipsis">
      ValueFormatter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ValueFormatter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatter.applyFormat" class="md-nav__link">
    <span class="md-ellipsis">
      applyFormat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatter.apply_format" class="md-nav__link">
    <span class="md-ellipsis">
      apply_format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatters" class="md-nav__link">
    <span class="md-ellipsis">
      ValueFormatters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ValueFormatters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatters.get_instance" class="md-nav__link">
    <span class="md-ellipsis">
      get_instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatters.of_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      of_yaml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatters.preload" class="md-nav__link">
    <span class="md-ellipsis">
      preload
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.query_cmd" class="md-nav__link">
    <span class="md-ellipsis">
      query_cmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="query_cmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query_cmd.QueryCmd" class="md-nav__link">
    <span class="md-ellipsis">
      QueryCmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query_cmd.QueryCmd.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query_cmd.QueryCmd.format_output" class="md-nav__link">
    <span class="md-ellipsis">
      format_output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query_cmd.QueryCmd.handle_args" class="md-nav__link">
    <span class="md-ellipsis">
      handle_args
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.querymain" class="md-nav__link">
    <span class="md-ellipsis">
      querymain
    </span>
  </a>
  
    <nav class="md-nav" aria-label="querymain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.QueryMain" class="md-nav__link">
    <span class="md-ellipsis">
      QueryMain
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryMain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.QueryMain.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.QueryMain.rawQuery" class="md-nav__link">
    <span class="md-ellipsis">
      rawQuery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.mainSPARQL" class="md-nav__link">
    <span class="md-ellipsis">
      mainSPARQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.mainSQL" class="md-nav__link">
    <span class="md-ellipsis">
      mainSQL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.rate_limiter" class="md-nav__link">
    <span class="md-ellipsis">
      rate_limiter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="rate_limiter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.rate_limiter.RateLimiter" class="md-nav__link">
    <span class="md-ellipsis">
      RateLimiter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.rdf" class="md-nav__link">
    <span class="md-ellipsis">
      rdf
    </span>
  </a>
  
    <nav class="md-nav" aria-label="rdf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper" class="md-nav__link">
    <span class="md-ellipsis">
      RDFDumper
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RDFDumper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.convert_to_literal" class="md-nav__link">
    <span class="md-ellipsis">
      convert_to_literal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.convert_to_rdf" class="md-nav__link">
    <span class="md-ellipsis">
      convert_to_rdf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.get_instance_uri" class="md-nav__link">
    <span class="md-ellipsis">
      get_instance_uri
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.serialize" class="md-nav__link">
    <span class="md-ellipsis">
      serialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.value_iterator" class="md-nav__link">
    <span class="md-ellipsis">
      value_iterator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.rdf_format" class="md-nav__link">
    <span class="md-ellipsis">
      rdf_format
    </span>
  </a>
  
    <nav class="md-nav" aria-label="rdf_format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf_format.RdfFormat" class="md-nav__link">
    <span class="md-ellipsis">
      RdfFormat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RdfFormat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf_format.RdfFormat.by_label" class="md-nav__link">
    <span class="md-ellipsis">
      by_label
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.sample2" class="md-nav__link">
    <span class="md-ellipsis">
      sample2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sample2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Countries" class="md-nav__link">
    <span class="md-ellipsis">
      Countries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Countries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Countries.get_countries_erdem" class="md-nav__link">
    <span class="md-ellipsis">
      get_countries_erdem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Countries.get_samples" class="md-nav__link">
    <span class="md-ellipsis">
      get_samples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Country" class="md-nav__link">
    <span class="md-ellipsis">
      Country
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royal" class="md-nav__link">
    <span class="md-ellipsis">
      Royal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Royal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royal.born" class="md-nav__link">
    <span class="md-ellipsis">
      born
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royal.died" class="md-nav__link">
    <span class="md-ellipsis">
      died
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royal.identifier" class="md-nav__link">
    <span class="md-ellipsis">
      identifier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royal.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royals" class="md-nav__link">
    <span class="md-ellipsis">
      Royals
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Royals">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royals.get_samples" class="md-nav__link">
    <span class="md-ellipsis">
      get_samples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Sample" class="md-nav__link">
    <span class="md-ellipsis">
      Sample
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sample">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Sample.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Sample.getCities" class="md-nav__link">
    <span class="md-ellipsis">
      getCities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Sample.getRoyals" class="md-nav__link">
    <span class="md-ellipsis">
      getRoyals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Sample.getSample" class="md-nav__link">
    <span class="md-ellipsis">
      getSample
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.schema" class="md-nav__link">
    <span class="md-ellipsis">
      schema
    </span>
  </a>
  
    <nav class="md-nav" aria-label="schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.Schema" class="md-nav__link">
    <span class="md-ellipsis">
      Schema
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.Schema.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.Schema.generalizeColumn" class="md-nav__link">
    <span class="md-ellipsis">
      generalizeColumn
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.Schema.getGeneral" class="md-nav__link">
    <span class="md-ellipsis">
      getGeneral
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.Schema.getGeneralViewDDL" class="md-nav__link">
    <span class="md-ellipsis">
      getGeneralViewDDL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.SchemaManager" class="md-nav__link">
    <span class="md-ellipsis">
      SchemaManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SchemaManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.SchemaManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.sparql" class="md-nav__link">
    <span class="md-ellipsis">
      sparql
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sparql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL" class="md-nav__link">
    <span class="md-ellipsis">
      SPARQL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SPARQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.addAuthentication" class="md-nav__link">
    <span class="md-ellipsis">
      addAuthentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.asListOfDicts" class="md-nav__link">
    <span class="md-ellipsis">
      asListOfDicts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.controlEscape" class="md-nav__link">
    <span class="md-ellipsis">
      controlEscape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.fix_comments" class="md-nav__link">
    <span class="md-ellipsis">
      fix_comments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.fromEndpointConf" class="md-nav__link">
    <span class="md-ellipsis">
      fromEndpointConf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.getFirst" class="md-nav__link">
    <span class="md-ellipsis">
      getFirst
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.getLocalName" class="md-nav__link">
    <span class="md-ellipsis">
      getLocalName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.getResults" class="md-nav__link">
    <span class="md-ellipsis">
      getResults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.getValue" class="md-nav__link">
    <span class="md-ellipsis">
      getValue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.getValues" class="md-nav__link">
    <span class="md-ellipsis">
      getValues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.insert" class="md-nav__link">
    <span class="md-ellipsis">
      insert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.insertListOfDicts" class="md-nav__link">
    <span class="md-ellipsis">
      insertListOfDicts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.insertListOfDictsBatch" class="md-nav__link">
    <span class="md-ellipsis">
      insertListOfDictsBatch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.post_query_direct" class="md-nav__link">
    <span class="md-ellipsis">
      post_query_direct
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.printErrors" class="md-nav__link">
    <span class="md-ellipsis">
      printErrors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.queryAsListOfDicts" class="md-nav__link">
    <span class="md-ellipsis">
      queryAsListOfDicts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.rawQuery" class="md-nav__link">
    <span class="md-ellipsis">
      rawQuery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.strToDatetime" class="md-nav__link">
    <span class="md-ellipsis">
      strToDatetime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.test_query" class="md-nav__link">
    <span class="md-ellipsis">
      test_query
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.sql" class="md-nav__link">
    <span class="md-ellipsis">
      sql
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo" class="md-nav__link">
    <span class="md-ellipsis">
      EntityInfo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EntityInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo.addType" class="md-nav__link">
    <span class="md-ellipsis">
      addType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo.fixDates" class="md-nav__link">
    <span class="md-ellipsis">
      fixDates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo.getCreateTableCmd" class="md-nav__link">
    <span class="md-ellipsis">
      getCreateTableCmd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo.getInsertCmd" class="md-nav__link">
    <span class="md-ellipsis">
      getInsertCmd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB" class="md-nav__link">
    <span class="md-ellipsis">
      SQLDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQLDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.backup" class="md-nav__link">
    <span class="md-ellipsis">
      backup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.close" class="md-nav__link">
    <span class="md-ellipsis">
      close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.copyTo" class="md-nav__link">
    <span class="md-ellipsis">
      copyTo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.createTable" class="md-nav__link">
    <span class="md-ellipsis">
      createTable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.createTable4EntityInfo" class="md-nav__link">
    <span class="md-ellipsis">
      createTable4EntityInfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.execute" class="md-nav__link">
    <span class="md-ellipsis">
      execute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.executeDump" class="md-nav__link">
    <span class="md-ellipsis">
      executeDump
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.getDebugInfo" class="md-nav__link">
    <span class="md-ellipsis">
      getDebugInfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.getTableDict" class="md-nav__link">
    <span class="md-ellipsis">
      getTableDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.getTableList" class="md-nav__link">
    <span class="md-ellipsis">
      getTableList
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.logError" class="md-nav__link">
    <span class="md-ellipsis">
      logError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.progress" class="md-nav__link">
    <span class="md-ellipsis">
      progress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.queryAll" class="md-nav__link">
    <span class="md-ellipsis">
      queryAll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.queryGen" class="md-nav__link">
    <span class="md-ellipsis">
      queryGen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.restore" class="md-nav__link">
    <span class="md-ellipsis">
      restore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.showDump" class="md-nav__link">
    <span class="md-ellipsis">
      showDump
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.store" class="md-nav__link">
    <span class="md-ellipsis">
      store
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api" class="md-nav__link">
    <span class="md-ellipsis">
      sqlite_api
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sqlite_api">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.DatetimeAdapter" class="md-nav__link">
    <span class="md-ellipsis">
      DatetimeAdapter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DatetimeAdapter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.DatetimeAdapter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.DatetimeAdapter.convert_date" class="md-nav__link">
    <span class="md-ellipsis">
      convert_date
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.DatetimeAdapter.convert_datetime" class="md-nav__link">
    <span class="md-ellipsis">
      convert_datetime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.DatetimeAdapter.convert_timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      convert_timestamp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer" class="md-nav__link">
    <span class="md-ellipsis">
      SQLiteApiFixer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQLiteApiFixer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.adapt_boolean" class="md-nav__link">
    <span class="md-ellipsis">
      adapt_boolean
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.adapt_date_iso" class="md-nav__link">
    <span class="md-ellipsis">
      adapt_date_iso
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.adapt_datetime_iso" class="md-nav__link">
    <span class="md-ellipsis">
      adapt_datetime_iso
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.convert_boolean" class="md-nav__link">
    <span class="md-ellipsis">
      convert_boolean
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.install" class="md-nav__link">
    <span class="md-ellipsis">
      install
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.register_adapters" class="md-nav__link">
    <span class="md-ellipsis">
      register_adapters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.register_converters" class="md-nav__link">
    <span class="md-ellipsis">
      register_converters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.storageconfig" class="md-nav__link">
    <span class="md-ellipsis">
      storageconfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="storageconfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.storageconfig.StorageConfig" class="md-nav__link">
    <span class="md-ellipsis">
      StorageConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StorageConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.storageconfig.StorageConfig.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.storageconfig.StorageConfig.getCachePath" class="md-nav__link">
    <span class="md-ellipsis">
      getCachePath
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.storageconfig.StoreMode" class="md-nav__link">
    <span class="md-ellipsis">
      StoreMode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.sync" class="md-nav__link">
    <span class="md-ellipsis">
      sync
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sync">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync" class="md-nav__link">
    <span class="md-ellipsis">
      Sync
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sync">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync.get_keys" class="md-nav__link">
    <span class="md-ellipsis">
      get_keys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync.get_record_by_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_record_by_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync.get_record_by_pkey" class="md-nav__link">
    <span class="md-ellipsis">
      get_record_by_pkey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync.status_table" class="md-nav__link">
    <span class="md-ellipsis">
      status_table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.SyncPair" class="md-nav__link">
    <span class="md-ellipsis">
      SyncPair
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.tabulateCounter" class="md-nav__link">
    <span class="md-ellipsis">
      tabulateCounter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="tabulateCounter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.tabulateCounter.TabulateCounter" class="md-nav__link">
    <span class="md-ellipsis">
      TabulateCounter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TabulateCounter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.tabulateCounter.TabulateCounter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.tabulateCounter.TabulateCounter.mostCommonTable" class="md-nav__link">
    <span class="md-ellipsis">
      mostCommonTable
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.uml" class="md-nav__link">
    <span class="md-ellipsis">
      uml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="uml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.uml.UML" class="md-nav__link">
    <span class="md-ellipsis">
      UML
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UML">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.uml.UML.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.uml.UML.mergeSchema" class="md-nav__link">
    <span class="md-ellipsis">
      mergeSchema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.uml.UML.tableListToPlantUml" class="md-nav__link">
    <span class="md-ellipsis">
      tableListToPlantUml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.version.Version" class="md-nav__link">
    <span class="md-ellipsis">
      Version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.yaml_path" class="md-nav__link">
    <span class="md-ellipsis">
      yaml_path
    </span>
  </a>
  
    <nav class="md-nav" aria-label="yaml_path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.yaml_path.YamlPath" class="md-nav__link">
    <span class="md-ellipsis">
      YamlPath
    </span>
  </a>
  
    <nav class="md-nav" aria-label="YamlPath">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.yaml_path.YamlPath.getDefaultPath" class="md-nav__link">
    <span class="md-ellipsis">
      getDefaultPath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.yaml_path.YamlPath.getPaths" class="md-nav__link">
    <span class="md-ellipsis">
      getPaths
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.yaml_path.YamlPath.getSamplePath" class="md-nav__link">
    <span class="md-ellipsis">
      getSamplePath
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lodstorage" class="md-nav__link">
    <span class="md-ellipsis">
      lodstorage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.docstring_parser" class="md-nav__link">
    <span class="md-ellipsis">
      docstring_parser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="docstring_parser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.docstring_parser.DocstringParser" class="md-nav__link">
    <span class="md-ellipsis">
      DocstringParser
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DocstringParser">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.docstring_parser.DocstringParser.parse" class="md-nav__link">
    <span class="md-ellipsis">
      parse
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.exception_handler" class="md-nav__link">
    <span class="md-ellipsis">
      exception_handler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="exception_handler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.exception_handler.ExceptionHandler" class="md-nav__link">
    <span class="md-ellipsis">
      ExceptionHandler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ExceptionHandler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.exception_handler.ExceptionHandler.handle" class="md-nav__link">
    <span class="md-ellipsis">
      handle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.linkml" class="md-nav__link">
    <span class="md-ellipsis">
      linkml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="linkml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.Class" class="md-nav__link">
    <span class="md-ellipsis">
      Class
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.PythonTypes" class="md-nav__link">
    <span class="md-ellipsis">
      PythonTypes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PythonTypes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.PythonTypes.get_linkml_range" class="md-nav__link">
    <span class="md-ellipsis">
      get_linkml_range
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.PythonTypes.get_rdf_datatype" class="md-nav__link">
    <span class="md-ellipsis">
      get_rdf_datatype
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.Schema" class="md-nav__link">
    <span class="md-ellipsis">
      Schema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml.Slot" class="md-nav__link">
    <span class="md-ellipsis">
      Slot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.linkml_gen" class="md-nav__link">
    <span class="md-ellipsis">
      linkml_gen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="linkml_gen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml_gen.LinkMLGen" class="md-nav__link">
    <span class="md-ellipsis">
      LinkMLGen
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LinkMLGen">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml_gen.LinkMLGen.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.linkml_gen.LinkMLGen.gen_schema_from_instance" class="md-nav__link">
    <span class="md-ellipsis">
      gen_schema_from_instance
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.lod" class="md-nav__link">
    <span class="md-ellipsis">
      lod
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lod">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD" class="md-nav__link">
    <span class="md-ellipsis">
      LOD
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LOD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.addLookup" class="md-nav__link">
    <span class="md-ellipsis">
      addLookup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.filterFields" class="md-nav__link">
    <span class="md-ellipsis">
      filterFields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.getFields" class="md-nav__link">
    <span class="md-ellipsis">
      getFields
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.getLookup" class="md-nav__link">
    <span class="md-ellipsis">
      getLookup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.handleListTypes" class="md-nav__link">
    <span class="md-ellipsis">
      handleListTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.intersect" class="md-nav__link">
    <span class="md-ellipsis">
      intersect
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.setNone" class="md-nav__link">
    <span class="md-ellipsis">
      setNone
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.setNone4List" class="md-nav__link">
    <span class="md-ellipsis">
      setNone4List
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod.LOD.sortKey" class="md-nav__link">
    <span class="md-ellipsis">
      sortKey
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.lod2xml" class="md-nav__link">
    <span class="md-ellipsis">
      lod2xml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lod2xml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod2xml.Lod2Xml" class="md-nav__link">
    <span class="md-ellipsis">
      Lod2Xml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lod2Xml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod2xml.Lod2Xml.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod2xml.Lod2Xml.asXml" class="md-nav__link">
    <span class="md-ellipsis">
      asXml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.lod_csv" class="md-nav__link">
    <span class="md-ellipsis">
      lod_csv
    </span>
  </a>
  
    <nav class="md-nav" aria-label="lod_csv">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV" class="md-nav__link">
    <span class="md-ellipsis">
      CSV
    </span>
  </a>
  
    <nav class="md-nav" aria-label="CSV">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.__new__" class="md-nav__link">
    <span class="md-ellipsis">
      __new__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.fixTypes" class="md-nav__link">
    <span class="md-ellipsis">
      fixTypes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.fromCSV" class="md-nav__link">
    <span class="md-ellipsis">
      fromCSV
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.get_instance" class="md-nav__link">
    <span class="md-ellipsis">
      get_instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.readFile" class="md-nav__link">
    <span class="md-ellipsis">
      readFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.restoreFromCSVFile" class="md-nav__link">
    <span class="md-ellipsis">
      restoreFromCSVFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.storeToCSVFile" class="md-nav__link">
    <span class="md-ellipsis">
      storeToCSVFile
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.toCSV" class="md-nav__link">
    <span class="md-ellipsis">
      toCSV
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.lod_csv.CSV.writeFile" class="md-nav__link">
    <span class="md-ellipsis">
      writeFile
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.mwTable" class="md-nav__link">
    <span class="md-ellipsis">
      mwTable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mwTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.mwTable.MediaWikiTable" class="md-nav__link">
    <span class="md-ellipsis">
      MediaWikiTable
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MediaWikiTable">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.mwTable.MediaWikiTable.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.mwTable.MediaWikiTable.addHeader" class="md-nav__link">
    <span class="md-ellipsis">
      addHeader
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.mwTable.MediaWikiTable.asWikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      asWikiMarkup
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.mysql" class="md-nav__link">
    <span class="md-ellipsis">
      mysql
    </span>
  </a>
  
    <nav class="md-nav" aria-label="mysql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.mysql.MySqlQuery" class="md-nav__link">
    <span class="md-ellipsis">
      MySqlQuery
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MySqlQuery">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.mysql.MySqlQuery.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.mysql.MySqlQuery.decode_record" class="md-nav__link">
    <span class="md-ellipsis">
      decode_record
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.mysql.MySqlQuery.execute_sql_query" class="md-nav__link">
    <span class="md-ellipsis">
      execute_sql_query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.mysql.MySqlQuery.query_generator" class="md-nav__link">
    <span class="md-ellipsis">
      query_generator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.params" class="md-nav__link">
    <span class="md-ellipsis">
      params
    </span>
  </a>
  
    <nav class="md-nav" aria-label="params">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Param" class="md-nav__link">
    <span class="md-ellipsis">
      Param
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params" class="md-nav__link">
    <span class="md-ellipsis">
      Params
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Params">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params.apply_parameters" class="md-nav__link">
    <span class="md-ellipsis">
      apply_parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params.apply_parameters_with_check" class="md-nav__link">
    <span class="md-ellipsis">
      apply_parameters_with_check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params.audit" class="md-nav__link">
    <span class="md-ellipsis">
      audit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.Params.set" class="md-nav__link">
    <span class="md-ellipsis">
      set
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.StoreDictKeyPair" class="md-nav__link">
    <span class="md-ellipsis">
      StoreDictKeyPair
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StoreDictKeyPair">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.params.StoreDictKeyPair.__call__" class="md-nav__link">
    <span class="md-ellipsis">
      __call__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.plot" class="md-nav__link">
    <span class="md-ellipsis">
      plot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="plot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot" class="md-nav__link">
    <span class="md-ellipsis">
      Plot
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Plot">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot.barchart" class="md-nav__link">
    <span class="md-ellipsis">
      barchart
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot.hist" class="md-nav__link">
    <span class="md-ellipsis">
      hist
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot.showMe" class="md-nav__link">
    <span class="md-ellipsis">
      showMe
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.plot.Plot.titleMe" class="md-nav__link">
    <span class="md-ellipsis">
      titleMe
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.prefix_config" class="md-nav__link">
    <span class="md-ellipsis">
      prefix_config
    </span>
  </a>
  
    <nav class="md-nav" aria-label="prefix_config">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfig" class="md-nav__link">
    <span class="md-ellipsis">
      PrefixConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PrefixConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfig.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfig.as_text" class="md-nav__link">
    <span class="md-ellipsis">
      as_text
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs" class="md-nav__link">
    <span class="md-ellipsis">
      PrefixConfigs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="PrefixConfigs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.get_instance" class="md-nav__link">
    <span class="md-ellipsis">
      get_instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.get_prefix_declarations" class="md-nav__link">
    <span class="md-ellipsis">
      get_prefix_declarations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.get_selected_declarations" class="md-nav__link">
    <span class="md-ellipsis">
      get_selected_declarations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.of_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      of_yaml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefix_config.PrefixConfigs.preload" class="md-nav__link">
    <span class="md-ellipsis">
      preload
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      prefixes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="prefixes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefixes.Prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      Prefixes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Prefixes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefixes.Prefixes.extract_prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      extract_prefixes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefixes.Prefixes.getPrefixes" class="md-nav__link">
    <span class="md-ellipsis">
      getPrefixes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefixes.Prefixes.merge_prefix_dict" class="md-nav__link">
    <span class="md-ellipsis">
      merge_prefix_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.prefixes.Prefixes.merge_prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      merge_prefixes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.profiler" class="md-nav__link">
    <span class="md-ellipsis">
      profiler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="profiler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.profiler.Profiler" class="md-nav__link">
    <span class="md-ellipsis">
      Profiler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Profiler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.profiler.Profiler.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.profiler.Profiler.start" class="md-nav__link">
    <span class="md-ellipsis">
      start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.profiler.Profiler.time" class="md-nav__link">
    <span class="md-ellipsis">
      time
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
    <nav class="md-nav" aria-label="query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Endpoint" class="md-nav__link">
    <span class="md-ellipsis">
      Endpoint
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Endpoint">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Endpoint.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Endpoint.getDefault" class="md-nav__link">
    <span class="md-ellipsis">
      getDefault
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Endpoint.get_prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      get_prefixes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.EndpointManager" class="md-nav__link">
    <span class="md-ellipsis">
      EndpointManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EndpointManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.EndpointManager.getEndpointNames" class="md-nav__link">
    <span class="md-ellipsis">
      getEndpointNames
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.EndpointManager.getEndpoints" class="md-nav__link">
    <span class="md-ellipsis">
      getEndpoints
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.EndpointManager.ofYaml" class="md-nav__link">
    <span class="md-ellipsis">
      ofYaml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Format" class="md-nav__link">
    <span class="md-ellipsis">
      Format
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query" class="md-nav__link">
    <span class="md-ellipsis">
      Query
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Query">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.add_endpoint_prefixes" class="md-nav__link">
    <span class="md-ellipsis">
      add_endpoint_prefixes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.apply_default_params" class="md-nav__link">
    <span class="md-ellipsis">
      apply_default_params
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.asWikiMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      asWikiMarkup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.asWikiSourceMarkup" class="md-nav__link">
    <span class="md-ellipsis">
      asWikiSourceMarkup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.documentQueryResult" class="md-nav__link">
    <span class="md-ellipsis">
      documentQueryResult
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.formatWithValueFormatters" class="md-nav__link">
    <span class="md-ellipsis">
      formatWithValueFormatters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.getLink" class="md-nav__link">
    <span class="md-ellipsis">
      getLink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.getTryItUrl" class="md-nav__link">
    <span class="md-ellipsis">
      getTryItUrl
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.preFormatWithCallBacks" class="md-nav__link">
    <span class="md-ellipsis">
      preFormatWithCallBacks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.prefixToLink" class="md-nav__link">
    <span class="md-ellipsis">
      prefixToLink
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.Query.set_default_params" class="md-nav__link">
    <span class="md-ellipsis">
      set_default_params
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryManager" class="md-nav__link">
    <span class="md-ellipsis">
      QueryManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryManager.getQueries" class="md-nav__link">
    <span class="md-ellipsis">
      getQueries
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryResultDocumentation" class="md-nav__link">
    <span class="md-ellipsis">
      QueryResultDocumentation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryResultDocumentation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryResultDocumentation.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryResultDocumentation.__str__" class="md-nav__link">
    <span class="md-ellipsis">
      __str__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryResultDocumentation.asText" class="md-nav__link">
    <span class="md-ellipsis">
      asText
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QueryResultDocumentation.uniCode2Latex" class="md-nav__link">
    <span class="md-ellipsis">
      uniCode2Latex
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QuerySyntaxHighlight" class="md-nav__link">
    <span class="md-ellipsis">
      QuerySyntaxHighlight
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QuerySyntaxHighlight">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QuerySyntaxHighlight.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.QuerySyntaxHighlight.highlight" class="md-nav__link">
    <span class="md-ellipsis">
      highlight
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatter" class="md-nav__link">
    <span class="md-ellipsis">
      ValueFormatter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ValueFormatter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatter.applyFormat" class="md-nav__link">
    <span class="md-ellipsis">
      applyFormat
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatter.apply_format" class="md-nav__link">
    <span class="md-ellipsis">
      apply_format
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatters" class="md-nav__link">
    <span class="md-ellipsis">
      ValueFormatters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ValueFormatters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatters.get_instance" class="md-nav__link">
    <span class="md-ellipsis">
      get_instance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatters.of_yaml" class="md-nav__link">
    <span class="md-ellipsis">
      of_yaml
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query.ValueFormatters.preload" class="md-nav__link">
    <span class="md-ellipsis">
      preload
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.query_cmd" class="md-nav__link">
    <span class="md-ellipsis">
      query_cmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="query_cmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query_cmd.QueryCmd" class="md-nav__link">
    <span class="md-ellipsis">
      QueryCmd
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryCmd">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.query_cmd.QueryCmd.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query_cmd.QueryCmd.format_output" class="md-nav__link">
    <span class="md-ellipsis">
      format_output
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.query_cmd.QueryCmd.handle_args" class="md-nav__link">
    <span class="md-ellipsis">
      handle_args
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.querymain" class="md-nav__link">
    <span class="md-ellipsis">
      querymain
    </span>
  </a>
  
    <nav class="md-nav" aria-label="querymain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.QueryMain" class="md-nav__link">
    <span class="md-ellipsis">
      QueryMain
    </span>
  </a>
  
    <nav class="md-nav" aria-label="QueryMain">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.QueryMain.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.QueryMain.rawQuery" class="md-nav__link">
    <span class="md-ellipsis">
      rawQuery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.main" class="md-nav__link">
    <span class="md-ellipsis">
      main
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.mainSPARQL" class="md-nav__link">
    <span class="md-ellipsis">
      mainSPARQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.querymain.mainSQL" class="md-nav__link">
    <span class="md-ellipsis">
      mainSQL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.rate_limiter" class="md-nav__link">
    <span class="md-ellipsis">
      rate_limiter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="rate_limiter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.rate_limiter.RateLimiter" class="md-nav__link">
    <span class="md-ellipsis">
      RateLimiter
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.rdf" class="md-nav__link">
    <span class="md-ellipsis">
      rdf
    </span>
  </a>
  
    <nav class="md-nav" aria-label="rdf">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper" class="md-nav__link">
    <span class="md-ellipsis">
      RDFDumper
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RDFDumper">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.convert_to_literal" class="md-nav__link">
    <span class="md-ellipsis">
      convert_to_literal
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.convert_to_rdf" class="md-nav__link">
    <span class="md-ellipsis">
      convert_to_rdf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.get_instance_uri" class="md-nav__link">
    <span class="md-ellipsis">
      get_instance_uri
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.serialize" class="md-nav__link">
    <span class="md-ellipsis">
      serialize
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf.RDFDumper.value_iterator" class="md-nav__link">
    <span class="md-ellipsis">
      value_iterator
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.rdf_format" class="md-nav__link">
    <span class="md-ellipsis">
      rdf_format
    </span>
  </a>
  
    <nav class="md-nav" aria-label="rdf_format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf_format.RdfFormat" class="md-nav__link">
    <span class="md-ellipsis">
      RdfFormat
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RdfFormat">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.rdf_format.RdfFormat.by_label" class="md-nav__link">
    <span class="md-ellipsis">
      by_label
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.sample2" class="md-nav__link">
    <span class="md-ellipsis">
      sample2
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sample2">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Countries" class="md-nav__link">
    <span class="md-ellipsis">
      Countries
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Countries">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Countries.get_countries_erdem" class="md-nav__link">
    <span class="md-ellipsis">
      get_countries_erdem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Countries.get_samples" class="md-nav__link">
    <span class="md-ellipsis">
      get_samples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Country" class="md-nav__link">
    <span class="md-ellipsis">
      Country
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royal" class="md-nav__link">
    <span class="md-ellipsis">
      Royal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Royal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royal.born" class="md-nav__link">
    <span class="md-ellipsis">
      born
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royal.died" class="md-nav__link">
    <span class="md-ellipsis">
      died
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royal.identifier" class="md-nav__link">
    <span class="md-ellipsis">
      identifier
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royal.__post_init__" class="md-nav__link">
    <span class="md-ellipsis">
      __post_init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royals" class="md-nav__link">
    <span class="md-ellipsis">
      Royals
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Royals">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Royals.get_samples" class="md-nav__link">
    <span class="md-ellipsis">
      get_samples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Sample" class="md-nav__link">
    <span class="md-ellipsis">
      Sample
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sample">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Sample.get" class="md-nav__link">
    <span class="md-ellipsis">
      get
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Sample.getCities" class="md-nav__link">
    <span class="md-ellipsis">
      getCities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Sample.getRoyals" class="md-nav__link">
    <span class="md-ellipsis">
      getRoyals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sample2.Sample.getSample" class="md-nav__link">
    <span class="md-ellipsis">
      getSample
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.schema" class="md-nav__link">
    <span class="md-ellipsis">
      schema
    </span>
  </a>
  
    <nav class="md-nav" aria-label="schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.Schema" class="md-nav__link">
    <span class="md-ellipsis">
      Schema
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Schema">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.Schema.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.Schema.generalizeColumn" class="md-nav__link">
    <span class="md-ellipsis">
      generalizeColumn
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.Schema.getGeneral" class="md-nav__link">
    <span class="md-ellipsis">
      getGeneral
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.Schema.getGeneralViewDDL" class="md-nav__link">
    <span class="md-ellipsis">
      getGeneralViewDDL
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.SchemaManager" class="md-nav__link">
    <span class="md-ellipsis">
      SchemaManager
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SchemaManager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.schema.SchemaManager.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.sparql" class="md-nav__link">
    <span class="md-ellipsis">
      sparql
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sparql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL" class="md-nav__link">
    <span class="md-ellipsis">
      SPARQL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SPARQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.addAuthentication" class="md-nav__link">
    <span class="md-ellipsis">
      addAuthentication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.asListOfDicts" class="md-nav__link">
    <span class="md-ellipsis">
      asListOfDicts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.controlEscape" class="md-nav__link">
    <span class="md-ellipsis">
      controlEscape
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.fix_comments" class="md-nav__link">
    <span class="md-ellipsis">
      fix_comments
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.fromEndpointConf" class="md-nav__link">
    <span class="md-ellipsis">
      fromEndpointConf
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.getFirst" class="md-nav__link">
    <span class="md-ellipsis">
      getFirst
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.getLocalName" class="md-nav__link">
    <span class="md-ellipsis">
      getLocalName
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.getResults" class="md-nav__link">
    <span class="md-ellipsis">
      getResults
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.getValue" class="md-nav__link">
    <span class="md-ellipsis">
      getValue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.getValues" class="md-nav__link">
    <span class="md-ellipsis">
      getValues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.insert" class="md-nav__link">
    <span class="md-ellipsis">
      insert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.insertListOfDicts" class="md-nav__link">
    <span class="md-ellipsis">
      insertListOfDicts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.insertListOfDictsBatch" class="md-nav__link">
    <span class="md-ellipsis">
      insertListOfDictsBatch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.post_query_direct" class="md-nav__link">
    <span class="md-ellipsis">
      post_query_direct
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.printErrors" class="md-nav__link">
    <span class="md-ellipsis">
      printErrors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.queryAsListOfDicts" class="md-nav__link">
    <span class="md-ellipsis">
      queryAsListOfDicts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.rawQuery" class="md-nav__link">
    <span class="md-ellipsis">
      rawQuery
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.strToDatetime" class="md-nav__link">
    <span class="md-ellipsis">
      strToDatetime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sparql.SPARQL.test_query" class="md-nav__link">
    <span class="md-ellipsis">
      test_query
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.sql" class="md-nav__link">
    <span class="md-ellipsis">
      sql
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sql">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo" class="md-nav__link">
    <span class="md-ellipsis">
      EntityInfo
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EntityInfo">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo.addType" class="md-nav__link">
    <span class="md-ellipsis">
      addType
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo.fixDates" class="md-nav__link">
    <span class="md-ellipsis">
      fixDates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo.getCreateTableCmd" class="md-nav__link">
    <span class="md-ellipsis">
      getCreateTableCmd
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.EntityInfo.getInsertCmd" class="md-nav__link">
    <span class="md-ellipsis">
      getInsertCmd
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB" class="md-nav__link">
    <span class="md-ellipsis">
      SQLDB
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQLDB">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.backup" class="md-nav__link">
    <span class="md-ellipsis">
      backup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.close" class="md-nav__link">
    <span class="md-ellipsis">
      close
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.copyTo" class="md-nav__link">
    <span class="md-ellipsis">
      copyTo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.createTable" class="md-nav__link">
    <span class="md-ellipsis">
      createTable
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.createTable4EntityInfo" class="md-nav__link">
    <span class="md-ellipsis">
      createTable4EntityInfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.execute" class="md-nav__link">
    <span class="md-ellipsis">
      execute
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.executeDump" class="md-nav__link">
    <span class="md-ellipsis">
      executeDump
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.getDebugInfo" class="md-nav__link">
    <span class="md-ellipsis">
      getDebugInfo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.getTableDict" class="md-nav__link">
    <span class="md-ellipsis">
      getTableDict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.getTableList" class="md-nav__link">
    <span class="md-ellipsis">
      getTableList
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.logError" class="md-nav__link">
    <span class="md-ellipsis">
      logError
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.progress" class="md-nav__link">
    <span class="md-ellipsis">
      progress
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.query" class="md-nav__link">
    <span class="md-ellipsis">
      query
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.queryAll" class="md-nav__link">
    <span class="md-ellipsis">
      queryAll
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.queryGen" class="md-nav__link">
    <span class="md-ellipsis">
      queryGen
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.restore" class="md-nav__link">
    <span class="md-ellipsis">
      restore
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.showDump" class="md-nav__link">
    <span class="md-ellipsis">
      showDump
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sql.SQLDB.store" class="md-nav__link">
    <span class="md-ellipsis">
      store
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api" class="md-nav__link">
    <span class="md-ellipsis">
      sqlite_api
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sqlite_api">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.DatetimeAdapter" class="md-nav__link">
    <span class="md-ellipsis">
      DatetimeAdapter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DatetimeAdapter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.DatetimeAdapter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.DatetimeAdapter.convert_date" class="md-nav__link">
    <span class="md-ellipsis">
      convert_date
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.DatetimeAdapter.convert_datetime" class="md-nav__link">
    <span class="md-ellipsis">
      convert_datetime
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.DatetimeAdapter.convert_timestamp" class="md-nav__link">
    <span class="md-ellipsis">
      convert_timestamp
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer" class="md-nav__link">
    <span class="md-ellipsis">
      SQLiteApiFixer
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQLiteApiFixer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.adapt_boolean" class="md-nav__link">
    <span class="md-ellipsis">
      adapt_boolean
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.adapt_date_iso" class="md-nav__link">
    <span class="md-ellipsis">
      adapt_date_iso
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.adapt_datetime_iso" class="md-nav__link">
    <span class="md-ellipsis">
      adapt_datetime_iso
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.convert_boolean" class="md-nav__link">
    <span class="md-ellipsis">
      convert_boolean
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.install" class="md-nav__link">
    <span class="md-ellipsis">
      install
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.register_adapters" class="md-nav__link">
    <span class="md-ellipsis">
      register_adapters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sqlite_api.SQLiteApiFixer.register_converters" class="md-nav__link">
    <span class="md-ellipsis">
      register_converters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.storageconfig" class="md-nav__link">
    <span class="md-ellipsis">
      storageconfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="storageconfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.storageconfig.StorageConfig" class="md-nav__link">
    <span class="md-ellipsis">
      StorageConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StorageConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.storageconfig.StorageConfig.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.storageconfig.StorageConfig.getCachePath" class="md-nav__link">
    <span class="md-ellipsis">
      getCachePath
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.storageconfig.StoreMode" class="md-nav__link">
    <span class="md-ellipsis">
      StoreMode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.sync" class="md-nav__link">
    <span class="md-ellipsis">
      sync
    </span>
  </a>
  
    <nav class="md-nav" aria-label="sync">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync" class="md-nav__link">
    <span class="md-ellipsis">
      Sync
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Sync">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync.get_keys" class="md-nav__link">
    <span class="md-ellipsis">
      get_keys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync.get_record_by_key" class="md-nav__link">
    <span class="md-ellipsis">
      get_record_by_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync.get_record_by_pkey" class="md-nav__link">
    <span class="md-ellipsis">
      get_record_by_pkey
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.Sync.status_table" class="md-nav__link">
    <span class="md-ellipsis">
      status_table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.sync.SyncPair" class="md-nav__link">
    <span class="md-ellipsis">
      SyncPair
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.tabulateCounter" class="md-nav__link">
    <span class="md-ellipsis">
      tabulateCounter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="tabulateCounter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.tabulateCounter.TabulateCounter" class="md-nav__link">
    <span class="md-ellipsis">
      TabulateCounter
    </span>
  </a>
  
    <nav class="md-nav" aria-label="TabulateCounter">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.tabulateCounter.TabulateCounter.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.tabulateCounter.TabulateCounter.mostCommonTable" class="md-nav__link">
    <span class="md-ellipsis">
      mostCommonTable
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.uml" class="md-nav__link">
    <span class="md-ellipsis">
      uml
    </span>
  </a>
  
    <nav class="md-nav" aria-label="uml">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.uml.UML" class="md-nav__link">
    <span class="md-ellipsis">
      UML
    </span>
  </a>
  
    <nav class="md-nav" aria-label="UML">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.uml.UML.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.uml.UML.mergeSchema" class="md-nav__link">
    <span class="md-ellipsis">
      mergeSchema
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.uml.UML.tableListToPlantUml" class="md-nav__link">
    <span class="md-ellipsis">
      tableListToPlantUml
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.version" class="md-nav__link">
    <span class="md-ellipsis">
      version
    </span>
  </a>
  
    <nav class="md-nav" aria-label="version">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.version.Version" class="md-nav__link">
    <span class="md-ellipsis">
      Version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lodstorage.yaml_path" class="md-nav__link">
    <span class="md-ellipsis">
      yaml_path
    </span>
  </a>
  
    <nav class="md-nav" aria-label="yaml_path">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.yaml_path.YamlPath" class="md-nav__link">
    <span class="md-ellipsis">
      YamlPath
    </span>
  </a>
  
    <nav class="md-nav" aria-label="YamlPath">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lodstorage.yaml_path.YamlPath.getDefaultPath" class="md-nav__link">
    <span class="md-ellipsis">
      getDefaultPath
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.yaml_path.YamlPath.getPaths" class="md-nav__link">
    <span class="md-ellipsis">
      getPaths
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lodstorage.yaml_path.YamlPath.getSamplePath" class="md-nav__link">
    <span class="md-ellipsis">
      getSamplePath
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="pylodstorage-api-documentation">pyLodStorage API Documentation</h1>


<div class="doc doc-object doc-module">



<a id="lodstorage"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">










<div class="doc doc-object doc-module">



<h2 id="lodstorage.docstring_parser" class="doc doc-heading">
            <code>docstring_parser</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2024-01-21</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.docstring_parser.DocstringParser" class="doc doc-heading">
            <code>DocstringParser</code>


</h3>


    <div class="doc doc-contents ">


        <p>A Python docstring parser.</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/docstring_parser.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DocstringParser</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Python docstring parser.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Define basic elements</span>
        <span class="n">identifier</span> <span class="o">=</span> <span class="n">Word</span><span class="p">(</span><span class="n">alphas</span><span class="p">,</span> <span class="n">alphanums</span> <span class="o">+</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>
        <span class="n">type_identifier</span> <span class="o">=</span> <span class="n">Word</span><span class="p">(</span><span class="n">alphas</span><span class="p">,</span> <span class="n">alphanums</span> <span class="o">+</span> <span class="s2">&quot;_.[]&quot;</span><span class="p">)</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">restOfLine</span>

        <span class="c1"># Define patterns for capturing attributes</span>
        <span class="n">attribute_start</span> <span class="o">=</span> <span class="n">Suppress</span><span class="p">(</span><span class="n">Literal</span><span class="p">(</span><span class="s2">&quot;Attributes:&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">attribute</span> <span class="o">=</span> <span class="n">Group</span><span class="p">(</span>
            <span class="n">identifier</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>
            <span class="o">+</span> <span class="n">Suppress</span><span class="p">(</span><span class="s2">&quot;(&quot;</span><span class="p">)</span>
            <span class="o">+</span> <span class="n">Optional</span><span class="p">(</span><span class="n">type_identifier</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">))</span>
            <span class="o">+</span> <span class="n">Suppress</span><span class="p">(</span><span class="s2">&quot;):&quot;</span><span class="p">)</span>
            <span class="o">+</span> <span class="n">description</span><span class="p">(</span><span class="s2">&quot;description&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Define pattern for class docstring</span>
        <span class="n">class_docstring</span> <span class="o">=</span> <span class="n">restOfLine</span><span class="p">(</span><span class="s2">&quot;class_description&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="n">Optional</span><span class="p">(</span>
            <span class="n">attribute_start</span> <span class="o">+</span> <span class="n">OneOrMore</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">)(</span><span class="s2">&quot;attributes&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Updated class_docstring pattern to correctly handle multi-line class descriptions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">class_docstring</span> <span class="o">=</span> <span class="n">class_docstring</span> <span class="o">+</span> <span class="n">Optional</span><span class="p">(</span>
            <span class="n">OneOrMore</span><span class="p">(</span><span class="o">~</span><span class="n">attribute_start</span> <span class="o">+</span> <span class="n">restOfLine</span><span class="p">)(</span><span class="s2">&quot;class_description&quot;</span><span class="p">)</span>
            <span class="o">+</span> <span class="n">attribute_start</span>
            <span class="o">+</span> <span class="n">OneOrMore</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">attribute</span><span class="p">)(</span><span class="s2">&quot;attributes&quot;</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docstring</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse the given docstring.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">class_docstring</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">docstring</span><span class="p">,</span> <span class="n">parseAll</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">class_description</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">class_description</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">attr</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">strip</span><span class="p">()}</span>
            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">attributes</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">class_description</span><span class="p">,</span> <span class="n">attributes</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.docstring_parser.DocstringParser.parse" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">parse</span><span class="p">(</span><span class="n">docstring</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Parse the given docstring.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/docstring_parser.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docstring</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parse the given docstring.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">class_docstring</span><span class="o">.</span><span class="n">parseString</span><span class="p">(</span><span class="n">docstring</span><span class="p">,</span> <span class="n">parseAll</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">class_description</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">class_description</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="n">attributes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">attr</span><span class="o">.</span><span class="n">name</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">attr</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">strip</span><span class="p">()}</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">attributes</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">class_description</span><span class="p">,</span> <span class="n">attributes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.exception_handler" class="doc doc-heading">
            <code>exception_handler</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2025-12-01</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.exception_handler.ExceptionHandler" class="doc doc-heading">
            <code>ExceptionHandler</code>


</h3>


    <div class="doc doc-contents ">


        <p>handle exceptions</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/exception_handler.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">ExceptionHandler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    handle exceptions</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">handle</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ex</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Centralized exception logging (non-fatal).</span>

<span class="sd">        Args:</span>
<span class="sd">            msg: context message</span>
<span class="sd">            ex: the exception caught</span>
<span class="sd">            debug: if True, print full traceback</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">full_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">full_msg</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.exception_handler.ExceptionHandler.handle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Centralized exception logging (non-fatal).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>msg</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>context message</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>ex</code>
            </td>
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the exception caught</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True, print full traceback</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/exception_handler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">handle</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">msg</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">ex</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Centralized exception logging (non-fatal).</span>

<span class="sd">    Args:</span>
<span class="sd">        msg: context message</span>
<span class="sd">        ex: the exception caught</span>
<span class="sd">        debug: if True, print full traceback</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">full_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">full_msg</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.linkml" class="doc doc-heading">
            <code>linkml</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2024-01-28</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.linkml.Class" class="doc doc-heading">
            <code>Class</code>


</h3>


    <div class="doc doc-contents ">


        <p>Represents a class in the LinkML schema.</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/linkml.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">Class</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a class in the LinkML schema.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">slots</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Slot</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.linkml.PythonTypes" class="doc doc-heading">
            <code>PythonTypes</code>


</h3>


    <div class="doc doc-contents ">


        <p>python type handling</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/linkml.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">PythonTypes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    python type handling</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Define a mapping from Python types to LinkML ranges</span>
    <span class="n">to_linkml_ranges</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nb">str</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
        <span class="nb">int</span><span class="p">:</span> <span class="s2">&quot;integer&quot;</span><span class="p">,</span>
        <span class="nb">float</span><span class="p">:</span> <span class="s2">&quot;float&quot;</span><span class="p">,</span>
        <span class="nb">bool</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
        <span class="nb">list</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
        <span class="nb">dict</span><span class="p">:</span> <span class="s2">&quot;dictionary&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># Mapping from Python types to RDF (XSD) datatypes</span>
    <span class="n">to_rdf_datatypes</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nb">str</span><span class="p">:</span> <span class="n">XSD</span><span class="o">.</span><span class="n">string</span><span class="p">,</span>
        <span class="nb">int</span><span class="p">:</span> <span class="n">XSD</span><span class="o">.</span><span class="n">integer</span><span class="p">,</span>
        <span class="nb">float</span><span class="p">:</span> <span class="n">XSD</span><span class="o">.</span><span class="n">float</span><span class="p">,</span>
        <span class="nb">bool</span><span class="p">:</span> <span class="n">XSD</span><span class="o">.</span><span class="n">boolean</span><span class="p">,</span>
        <span class="c1"># Add more mappings if needed</span>
    <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_linkml_range</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">ptype</span><span class="p">:</span> <span class="n">Type</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines the LinkML range for a given Python type.</span>

<span class="sd">        Args:</span>
<span class="sd">            ptype (Type): The Python type for which the LinkML range is required.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The corresponding LinkML range as a string. Defaults to &quot;string&quot; if the type is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">to_linkml_ranges</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ptype</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_rdf_datatype</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">ptype</span><span class="p">:</span> <span class="n">Type</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">XSD</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Determines the RDF (XSD) datatype for a given Python type.</span>

<span class="sd">        Args:</span>
<span class="sd">            ptype (Type): The Python type for which the RDF (XSD) datatype is required.</span>

<span class="sd">        Returns:</span>
<span class="sd">            XSD: The corresponding RDF (XSD) datatype. Returns None if the type is not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">to_rdf_datatypes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ptype</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.linkml.PythonTypes.get_linkml_range" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_linkml_range</span><span class="p">(</span><span class="n">ptype</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Determines the LinkML range for a given Python type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ptype</code>
            </td>
            <td>
                  <code><span title="lodstorage.linkml.Type">Type</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Python type for which the LinkML range is required.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The corresponding LinkML range as a string. Defaults to "string" if the type is not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/linkml.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_linkml_range</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">ptype</span><span class="p">:</span> <span class="n">Type</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determines the LinkML range for a given Python type.</span>

<span class="sd">    Args:</span>
<span class="sd">        ptype (Type): The Python type for which the LinkML range is required.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The corresponding LinkML range as a string. Defaults to &quot;string&quot; if the type is not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">to_linkml_ranges</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ptype</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.linkml.PythonTypes.get_rdf_datatype" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_rdf_datatype</span><span class="p">(</span><span class="n">ptype</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Determines the RDF (XSD) datatype for a given Python type.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ptype</code>
            </td>
            <td>
                  <code><span title="lodstorage.linkml.Type">Type</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Python type for which the RDF (XSD) datatype is required.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>XSD</code></td>            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="rdflib.namespace.XSD">XSD</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The corresponding RDF (XSD) datatype. Returns None if the type is not found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/linkml.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_rdf_datatype</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">ptype</span><span class="p">:</span> <span class="n">Type</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">XSD</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Determines the RDF (XSD) datatype for a given Python type.</span>

<span class="sd">    Args:</span>
<span class="sd">        ptype (Type): The Python type for which the RDF (XSD) datatype is required.</span>

<span class="sd">    Returns:</span>
<span class="sd">        XSD: The corresponding RDF (XSD) datatype. Returns None if the type is not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">to_rdf_datatypes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">ptype</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.linkml.Schema" class="doc doc-heading">
            <code>Schema</code>


</h3>


    <div class="doc doc-contents ">


        <p>Represents the entire LinkML schema.</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/linkml.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">Schema</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents the entire LinkML schema.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="nb">id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">license</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">default_prefix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">prefixes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">imports</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">default_range</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;string&quot;</span>
    <span class="n">classes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Class</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">slots</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Slot</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">types</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Type</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.linkml.Slot" class="doc doc-heading">
            <code>Slot</code>


</h3>


    <div class="doc doc-contents ">


        <p>Represents a slot in the LinkML schema, equivalent to a field or property.</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/linkml.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">Slot</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a slot in the LinkML schema, equivalent to a field or property.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">description</span><span class="p">:</span> <span class="nb">str</span>
    <span class="nb">range</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;string&quot;</span>
    <span class="n">multivalued</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">identifier</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.linkml_gen" class="doc doc-heading">
            <code>linkml_gen</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2024-01-21</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.linkml_gen.LinkMLGen" class="doc doc-heading">
            <code>LinkMLGen</code>


</h3>


    <div class="doc doc-contents ">


        <p>Class for generating LinkML YAML schema from Python data models using dataclasses.</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/linkml_gen.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LinkMLGen</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class for generating LinkML YAML schema from Python data models using dataclasses.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the LinkMLGen.</span>

<span class="sd">        Args:</span>
<span class="sd">            schema (Schema): The LinkML schema to be generated.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span>

    <span class="k">def</span> <span class="nf">gen_schema</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_model_class</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Schema</span><span class="p">:</span>
        <span class="c1"># Use DocstringParser to extract class description</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">DocstringParser</span><span class="p">()</span>
        <span class="n">class_description</span><span class="p">,</span> <span class="n">doc_attributes</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">data_model_class</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>

        <span class="n">class_name</span> <span class="o">=</span> <span class="n">data_model_class</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">new_class</span> <span class="o">=</span> <span class="n">Class</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">class_description</span><span class="p">,</span> <span class="n">slots</span><span class="o">=</span><span class="p">[])</span>

        <span class="c1"># Iterate over the fields of the dataclass</span>
        <span class="k">for</span> <span class="n">field_info</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">data_model_class</span><span class="p">):</span>
            <span class="n">attr_name</span> <span class="o">=</span> <span class="n">field_info</span><span class="o">.</span><span class="n">name</span>
            <span class="n">attr_type</span> <span class="o">=</span> <span class="n">field_info</span><span class="o">.</span><span class="n">type</span>

            <span class="c1"># Handle Optional and List types</span>
            <span class="n">is_optional</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">is_list</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">content_type</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">attr_type</span><span class="p">,</span> <span class="s2">&quot;__origin__&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">attr_type</span><span class="o">.</span><span class="n">__origin__</span> <span class="ow">is</span> <span class="n">Union</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span> <span class="ow">in</span> <span class="n">attr_type</span><span class="o">.</span><span class="n">__args__</span><span class="p">:</span>
                    <span class="n">is_optional</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">attr_type</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">attr_type</span><span class="o">.</span><span class="n">__args__</span> <span class="k">if</span> <span class="n">t</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">type</span><span class="p">(</span><span class="kc">None</span><span class="p">)][</span>
                        <span class="mi">0</span>
                    <span class="p">]</span>  <span class="c1"># unwrap Optional type</span>
                <span class="k">elif</span> <span class="n">attr_type</span><span class="o">.</span><span class="n">__origin__</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
                    <span class="n">is_list</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">content_type</span> <span class="o">=</span> <span class="n">attr_type</span><span class="o">.</span><span class="n">__args__</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># unwrap List type</span>
                <span class="k">elif</span> <span class="n">attr_type</span><span class="o">.</span><span class="n">__origin__</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
                    <span class="c1"># Assuming dictionary values are of interest, keys are strings</span>
                    <span class="n">content_type</span> <span class="o">=</span> <span class="n">attr_type</span><span class="o">.</span><span class="n">__args__</span><span class="p">[</span>
                        <span class="mi">1</span>
                    <span class="p">]</span>  <span class="c1"># unwrap Dict type, focusing on value type</span>

            <span class="c1"># Check and handle nested dataclasses for lists or dicts</span>
            <span class="k">if</span> <span class="n">is_dataclass</span><span class="p">(</span><span class="n">content_type</span><span class="p">):</span>
                <span class="c1"># Recursive call to handle nested dataclass</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gen_schema</span><span class="p">(</span><span class="n">content_type</span><span class="p">)</span>
                <span class="c1"># Set the range to the name of the dataclass</span>
                <span class="n">linkml_range</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">content_type</span><span class="o">.</span><span class="vm">__name__</span>
                <span class="p">)</span>  <span class="c1"># Use the name of the dataclass as the range</span>
            <span class="k">elif</span> <span class="n">is_list</span><span class="p">:</span>
                <span class="c1"># If it&#39;s a list, get the LinkML range for the base type</span>
                <span class="c1"># Use self.get_linkml_range to ensure consistent type mapping</span>
                <span class="n">linkml_range</span> <span class="o">=</span> <span class="n">PythonTypes</span><span class="o">.</span><span class="n">get_linkml_range</span><span class="p">(</span><span class="n">content_type</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># For non-list and non-dataclass types, use self.get_linkml_range for consistent type mapping</span>
                <span class="n">linkml_range</span> <span class="o">=</span> <span class="n">PythonTypes</span><span class="o">.</span><span class="n">get_linkml_range</span><span class="p">(</span><span class="n">attr_type</span><span class="p">)</span>

            <span class="c1"># Extract description from doc_attributes</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">doc_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">attr_name</span><span class="si">}</span><span class="s2"> - missing description&quot;</span>
            <span class="p">)</span>

            <span class="c1"># Create a new slot for the field</span>
            <span class="n">new_slot</span> <span class="o">=</span> <span class="n">Slot</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="n">linkml_range</span><span class="p">,</span> <span class="n">multivalued</span><span class="o">=</span><span class="n">is_list</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">attr_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_slot</span>
            <span class="n">new_class</span><span class="o">.</span><span class="n">slots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attr_name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">classes</span><span class="p">[</span><span class="n">class_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_class</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span>

    <span class="k">def</span> <span class="nf">gen_schema_from_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_model_instance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Schema</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate a LinkML YAML schema from a Python data model using dataclasses.</span>

<span class="sd">        Args:</span>
<span class="sd">            data_model_instance: An instance of the Python data model.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Schema: The LinkML schema generated from the data model.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Use DocstringParser to extract class description and attributes</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">DocstringParser</span><span class="p">()</span>
        <span class="n">class_description</span><span class="p">,</span> <span class="n">doc_attributes</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">data_model_instance</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>

        <span class="n">class_name</span> <span class="o">=</span> <span class="n">data_model_instance</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="n">new_class</span> <span class="o">=</span> <span class="n">Class</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">class_description</span><span class="p">,</span> <span class="n">slots</span><span class="o">=</span><span class="p">[])</span>

        <span class="k">for</span> <span class="n">field_info</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">data_model_instance</span><span class="p">):</span>
            <span class="n">attr_name</span> <span class="o">=</span> <span class="n">field_info</span><span class="o">.</span><span class="n">name</span>
            <span class="n">attr_type</span> <span class="o">=</span> <span class="n">field_info</span><span class="o">.</span><span class="n">type</span>

            <span class="c1"># Extract field type/range</span>
            <span class="n">linkml_range</span> <span class="o">=</span> <span class="n">PythonTypes</span><span class="o">.</span><span class="n">get_linkml_range</span><span class="p">(</span><span class="n">attr_type</span><span class="p">)</span>

            <span class="c1"># Check values for multivalued and type consistency</span>
            <span class="n">attr_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">data_model_instance</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span>
            <span class="n">multivalued</span><span class="p">,</span> <span class="n">actual_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_value</span><span class="p">(</span><span class="n">attr_value</span><span class="p">)</span>

            <span class="c1"># Ensure documentation, declaration, and value type are consistent</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ensure_consistency</span><span class="p">(</span>
                <span class="n">attr_name</span><span class="p">,</span> <span class="n">linkml_range</span><span class="p">,</span> <span class="n">actual_type</span><span class="p">,</span> <span class="n">doc_attributes</span>
            <span class="p">)</span>

            <span class="c1"># Prepare slot</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">doc_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">attr_name</span><span class="si">}</span><span class="s2"> - missing description&quot;</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">attr_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">slots</span><span class="p">:</span>
                <span class="n">new_slot</span> <span class="o">=</span> <span class="n">Slot</span><span class="p">(</span>
                    <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="n">linkml_range</span><span class="p">,</span> <span class="n">multivalued</span><span class="o">=</span><span class="n">multivalued</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">attr_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_slot</span>
                <span class="n">new_class</span><span class="o">.</span><span class="n">slots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attr_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">multivalued</span><span class="p">:</span>
                <span class="c1"># recursive call if type of list or dict is a dataclass</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">attr_type</span><span class="p">,</span> <span class="s2">&quot;__args__&quot;</span><span class="p">):</span>
                    <span class="n">content_type</span> <span class="o">=</span> <span class="n">attr_type</span><span class="o">.</span><span class="n">__args__</span><span class="p">[</span>
                        <span class="mi">0</span>
                    <span class="p">]</span>  <span class="c1"># Get the declared content type</span>
                    <span class="k">if</span> <span class="n">is_dataclass</span><span class="p">(</span><span class="n">content_type</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">gen_schema</span><span class="p">(</span><span class="n">content_type</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">classes</span><span class="p">[</span><span class="n">class_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_class</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span>

    <span class="k">def</span> <span class="nf">check_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="c1"># Method to check if the value is multivalued and determine its type</span>
        <span class="n">multivalued</span> <span class="o">=</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="n">Iterable</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">))</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">value_type</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">return</span> <span class="n">multivalued</span><span class="p">,</span> <span class="n">value_type</span>

    <span class="k">def</span> <span class="nf">ensure_consistency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">declared_type</span><span class="p">,</span> <span class="n">actual_type</span><span class="p">,</span> <span class="n">doc_attributes</span><span class="p">):</span>
        <span class="c1"># Adjust this method to handle complex types like list, dict, etc.</span>

        <span class="c1"># Check if the actual type is a list or dict, and if so, get the type of its elements</span>
        <span class="k">if</span> <span class="n">actual_type</span> <span class="o">==</span> <span class="s2">&quot;list&quot;</span> <span class="ow">or</span> <span class="n">actual_type</span> <span class="o">==</span> <span class="s2">&quot;dict&quot;</span><span class="p">:</span>
            <span class="c1"># You may need a more complex logic here to handle lists of custom dataclasses</span>
            <span class="c1"># For simplicity, let&#39;s assume it&#39;s a list of strings for now</span>
            <span class="n">actual_type</span> <span class="o">=</span> <span class="s2">&quot;string&quot;</span>

        <span class="c1"># Now compare the adjusted actual type with the declared type</span>
        <span class="k">if</span> <span class="n">declared_type</span> <span class="o">!=</span> <span class="n">actual_type</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Type mismatch for &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;: declared as &#39;</span><span class="si">{</span><span class="n">declared_type</span><span class="si">}</span><span class="s2">&#39;, actual type is &#39;</span><span class="si">{</span><span class="n">actual_type</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
            <span class="p">)</span>

        <span class="c1"># Check for documentation</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">doc_attributes</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Missing documentation for field &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39;&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.linkml_gen.LinkMLGen.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize the LinkMLGen.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schema</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Schema (lodstorage.linkml.Schema)" href="#lodstorage.linkml.Schema">Schema</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The LinkML schema to be generated.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/linkml_gen.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the LinkMLGen.</span>

<span class="sd">    Args:</span>
<span class="sd">        schema (Schema): The LinkML schema to be generated.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.linkml_gen.LinkMLGen.gen_schema_from_instance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">gen_schema_from_instance</span><span class="p">(</span><span class="n">data_model_instance</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Generate a LinkML YAML schema from a Python data model using dataclasses.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data_model_instance</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An instance of the Python data model.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>Schema</code></td>            <td>
                  <code><a class="autorefs autorefs-internal" title="Schema (lodstorage.linkml.Schema)" href="#lodstorage.linkml.Schema">Schema</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The LinkML schema generated from the data model.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/linkml_gen.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">gen_schema_from_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_model_instance</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Schema</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a LinkML YAML schema from a Python data model using dataclasses.</span>

<span class="sd">    Args:</span>
<span class="sd">        data_model_instance: An instance of the Python data model.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Schema: The LinkML schema generated from the data model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Use DocstringParser to extract class description and attributes</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">DocstringParser</span><span class="p">()</span>
    <span class="n">class_description</span><span class="p">,</span> <span class="n">doc_attributes</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">data_model_instance</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)</span>

    <span class="n">class_name</span> <span class="o">=</span> <span class="n">data_model_instance</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="n">new_class</span> <span class="o">=</span> <span class="n">Class</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="n">class_description</span><span class="p">,</span> <span class="n">slots</span><span class="o">=</span><span class="p">[])</span>

    <span class="k">for</span> <span class="n">field_info</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">data_model_instance</span><span class="p">):</span>
        <span class="n">attr_name</span> <span class="o">=</span> <span class="n">field_info</span><span class="o">.</span><span class="n">name</span>
        <span class="n">attr_type</span> <span class="o">=</span> <span class="n">field_info</span><span class="o">.</span><span class="n">type</span>

        <span class="c1"># Extract field type/range</span>
        <span class="n">linkml_range</span> <span class="o">=</span> <span class="n">PythonTypes</span><span class="o">.</span><span class="n">get_linkml_range</span><span class="p">(</span><span class="n">attr_type</span><span class="p">)</span>

        <span class="c1"># Check values for multivalued and type consistency</span>
        <span class="n">attr_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">data_model_instance</span><span class="p">,</span> <span class="n">attr_name</span><span class="p">)</span>
        <span class="n">multivalued</span><span class="p">,</span> <span class="n">actual_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_value</span><span class="p">(</span><span class="n">attr_value</span><span class="p">)</span>

        <span class="c1"># Ensure documentation, declaration, and value type are consistent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ensure_consistency</span><span class="p">(</span>
            <span class="n">attr_name</span><span class="p">,</span> <span class="n">linkml_range</span><span class="p">,</span> <span class="n">actual_type</span><span class="p">,</span> <span class="n">doc_attributes</span>
        <span class="p">)</span>

        <span class="c1"># Prepare slot</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">doc_attributes</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">attr_name</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
            <span class="s2">&quot;description&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">attr_name</span><span class="si">}</span><span class="s2"> - missing description&quot;</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">attr_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">slots</span><span class="p">:</span>
            <span class="n">new_slot</span> <span class="o">=</span> <span class="n">Slot</span><span class="p">(</span>
                <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span><span class="n">linkml_range</span><span class="p">,</span> <span class="n">multivalued</span><span class="o">=</span><span class="n">multivalued</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">slots</span><span class="p">[</span><span class="n">attr_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_slot</span>
            <span class="n">new_class</span><span class="o">.</span><span class="n">slots</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attr_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">multivalued</span><span class="p">:</span>
            <span class="c1"># recursive call if type of list or dict is a dataclass</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">attr_type</span><span class="p">,</span> <span class="s2">&quot;__args__&quot;</span><span class="p">):</span>
                <span class="n">content_type</span> <span class="o">=</span> <span class="n">attr_type</span><span class="o">.</span><span class="n">__args__</span><span class="p">[</span>
                    <span class="mi">0</span>
                <span class="p">]</span>  <span class="c1"># Get the declared content type</span>
                <span class="k">if</span> <span class="n">is_dataclass</span><span class="p">(</span><span class="n">content_type</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">gen_schema</span><span class="p">(</span><span class="n">content_type</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">classes</span><span class="p">[</span><span class="n">class_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_class</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.lod" class="doc doc-heading">
            <code>lod</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2021-01-31</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.lod.LOD" class="doc doc-heading">
            <code>LOD</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>list of Dict aka Table</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/lod.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">LOD</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    list of Dict aka Table</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">pass</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getFields</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">,</span> <span class="n">sampleCount</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract field names from a list of dictionaries.</span>

<span class="sd">        Args:</span>
<span class="sd">            listOfDicts: List of dictionaries to extract field names from</span>
<span class="sd">            sampleCount: Number of dictionaries to sample. If None, all are sampled</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: Field names found in the dictionaries, or None if listOfDicts is None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">listOfDicts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">sampleCount</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sampleCount</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>

        <span class="n">fields</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">sampleCount</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                    <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">fields</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">setNone4List</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">,</span> <span class="n">fields</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set the given fields to None for the records in the given listOfDicts</span>
<span class="sd">        if they are not set</span>
<span class="sd">        Args:</span>
<span class="sd">            listOfDicts(list): the list of records to work on</span>
<span class="sd">            fields(list): the list of fields to set to None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">listOfDicts</span><span class="p">:</span>
            <span class="n">LOD</span><span class="o">.</span><span class="n">setNone</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">setNone</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">fields</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        make sure the given fields in the given record are set to none</span>
<span class="sd">        Args:</span>
<span class="sd">            record(dict): the record to work on</span>
<span class="sd">            fields(list): the list of fields to set to None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                <span class="n">record</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    https://stackoverflow.com/questions/33542997/python-intersection-of-2-lists-of-dictionaries/33543164</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">sortKey</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;get the sort key for the given dict d with the given key&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># https://stackoverflow.com/a/60765557/1497139</span>
            <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">d</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">intersect</span><span class="p">(</span><span class="n">listOfDict1</span><span class="p">,</span> <span class="n">listOfDict2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the  intersection of the two lists of Dicts by the given key</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">i1</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">listOfDict1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">LOD</span><span class="o">.</span><span class="n">sortKey</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">key</span><span class="p">)))</span>
        <span class="n">i2</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">listOfDict2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">LOD</span><span class="o">.</span><span class="n">sortKey</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">key</span><span class="p">)))</span>
        <span class="n">c1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">)</span>
        <span class="n">c2</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">)</span>
        <span class="n">lr</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">val1</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">sortKey</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                <span class="n">val2</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">sortKey</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">val1</span> <span class="o">&lt;</span> <span class="n">val2</span><span class="p">:</span>
                    <span class="n">c1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">val1</span> <span class="o">&gt;</span> <span class="n">val2</span><span class="p">:</span>
                    <span class="n">c2</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">lr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
                    <span class="n">c1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">)</span>
                    <span class="n">c2</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="k">return</span> <span class="n">lr</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">addLookup</span><span class="p">(</span><span class="n">lookup</span><span class="p">,</span> <span class="n">duplicates</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">withDuplicates</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        add a single lookup result</span>

<span class="sd">        Args:</span>
<span class="sd">            lookup(dict): the lookup map</span>
<span class="sd">            duplicates(list): the list of duplicates</span>
<span class="sd">            record(dict): the current record</span>
<span class="sd">            value(object): the current value to lookup</span>
<span class="sd">            withDuplicates(bool): if True duplicates should be allowed and lists returned if False a separate duplicates</span>
<span class="sd">            list is created</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">lookup</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">withDuplicates</span><span class="p">:</span>
                <span class="n">lookupResult</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
                <span class="n">lookupResult</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">duplicates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
                <span class="k">return</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">withDuplicates</span><span class="p">:</span>
                <span class="n">lookupResult</span> <span class="o">=</span> <span class="p">[</span><span class="n">record</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lookupResult</span> <span class="o">=</span> <span class="n">record</span>
        <span class="n">lookup</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">lookupResult</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getLookup</span><span class="p">(</span><span class="n">lod</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">attrName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">withDuplicates</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a lookup dictionary by the given attribute name for the given list of dicts</span>

<span class="sd">        Args:</span>
<span class="sd">            lod(list): the list of dicts to get the lookup dictionary for</span>
<span class="sd">            attrName(str): the attribute to lookup</span>
<span class="sd">            withDuplicates(bool): whether to retain single values or lists</span>

<span class="sd">        Return:</span>
<span class="sd">            a dictionary for lookup</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lookup</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">duplicates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">attrName</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">attrName</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">attrName</span><span class="p">):</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">attrName</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="k">for</span> <span class="n">listValue</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                        <span class="n">LOD</span><span class="o">.</span><span class="n">addLookup</span><span class="p">(</span>
                            <span class="n">lookup</span><span class="p">,</span> <span class="n">duplicates</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">listValue</span><span class="p">,</span> <span class="n">withDuplicates</span>
                        <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">LOD</span><span class="o">.</span><span class="n">addLookup</span><span class="p">(</span><span class="n">lookup</span><span class="p">,</span> <span class="n">duplicates</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">withDuplicates</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">withDuplicates</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lookup</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lookup</span><span class="p">,</span> <span class="n">duplicates</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">handleListTypes</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">lod</span><span class="p">,</span> <span class="n">doFilter</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        handle list types in the given list of dicts</span>

<span class="sd">        Args:</span>
<span class="sd">            cls: this class</span>
<span class="sd">            lod(list): a list of dicts</span>
<span class="sd">            doFilter(bool): True if records containing lists value items should be filtered</span>
<span class="sd">            separator(str): the separator to use when converting lists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># see https://stackoverflow.com/a/1207485/1497139</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lod</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">record</span> <span class="o">=</span> <span class="n">lod</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">doFilter</span><span class="p">:</span>
                            <span class="k">del</span> <span class="n">lod</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                            <span class="k">continue</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">newValue</span> <span class="o">=</span> <span class="n">separator</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
                            <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">filterFields</span><span class="p">(</span><span class="n">lod</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">reverse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        filter the given LoD with the given list of fields by either limiting the LoD to the fields or removing the</span>
<span class="sd">        fields contained in the list depending on the state of the reverse parameter</span>

<span class="sd">        Args:</span>
<span class="sd">            lod(list): list of dicts from which the fields should be excluded</span>
<span class="sd">            fields(list): list of fields that should be excluded from the lod</span>
<span class="sd">            reverse(bool): If True limit dict to the list of given fields. Otherwise exclude the fields from the dict.</span>

<span class="sd">        Returns:</span>
<span class="sd">            LoD</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">reverse</span><span class="p">:</span>
                <span class="n">recordReduced</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">:</span> <span class="n">record</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">record</span> <span class="k">if</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">recordReduced</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">:</span> <span class="n">record</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">record</span> <span class="k">if</span> <span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">}</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">recordReduced</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod.LOD.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Constructor</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod.LOD.addLookup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">addLookup</span><span class="p">(</span><span class="n">lookup</span><span class="p">,</span> <span class="n">duplicates</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">withDuplicates</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>add a single lookup result</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lookup(dict)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the lookup map</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>duplicates(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of duplicates</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>record(dict)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the current record</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>value(object)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the current value to lookup</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withDuplicates(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True duplicates should be allowed and lists returned if False a separate duplicates</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">addLookup</span><span class="p">(</span><span class="n">lookup</span><span class="p">,</span> <span class="n">duplicates</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">withDuplicates</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    add a single lookup result</span>

<span class="sd">    Args:</span>
<span class="sd">        lookup(dict): the lookup map</span>
<span class="sd">        duplicates(list): the list of duplicates</span>
<span class="sd">        record(dict): the current record</span>
<span class="sd">        value(object): the current value to lookup</span>
<span class="sd">        withDuplicates(bool): if True duplicates should be allowed and lists returned if False a separate duplicates</span>
<span class="sd">        list is created</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">lookup</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">withDuplicates</span><span class="p">:</span>
            <span class="n">lookupResult</span> <span class="o">=</span> <span class="n">lookup</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
            <span class="n">lookupResult</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">duplicates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
            <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">withDuplicates</span><span class="p">:</span>
            <span class="n">lookupResult</span> <span class="o">=</span> <span class="p">[</span><span class="n">record</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lookupResult</span> <span class="o">=</span> <span class="n">record</span>
    <span class="n">lookup</span><span class="p">[</span><span class="n">value</span><span class="p">]</span> <span class="o">=</span> <span class="n">lookupResult</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod.LOD.filterFields" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">filterFields</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">fields</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>filter the given LoD with the given list of fields by either limiting the LoD to the fields or removing the
fields contained in the list depending on the state of the reverse parameter</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lod(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of dicts from which the fields should be excluded</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fields(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of fields that should be excluded from the lod</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>reverse(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True limit dict to the list of given fields. Otherwise exclude the fields from the dict.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>LoD</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">filterFields</span><span class="p">(</span><span class="n">lod</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">fields</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">reverse</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    filter the given LoD with the given list of fields by either limiting the LoD to the fields or removing the</span>
<span class="sd">    fields contained in the list depending on the state of the reverse parameter</span>

<span class="sd">    Args:</span>
<span class="sd">        lod(list): list of dicts from which the fields should be excluded</span>
<span class="sd">        fields(list): list of fields that should be excluded from the lod</span>
<span class="sd">        reverse(bool): If True limit dict to the list of given fields. Otherwise exclude the fields from the dict.</span>

<span class="sd">    Returns:</span>
<span class="sd">        LoD</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">reverse</span><span class="p">:</span>
            <span class="n">recordReduced</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">:</span> <span class="n">record</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">record</span> <span class="k">if</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">recordReduced</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">:</span> <span class="n">record</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">record</span> <span class="k">if</span> <span class="n">d</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">}</span>
        <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">recordReduced</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">res</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod.LOD.getFields" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getFields</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">,</span> <span class="n">sampleCount</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Extract field names from a list of dictionaries.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>listOfDicts</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of dictionaries to extract field names from</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sampleCount</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of dictionaries to sample. If None, all are sampled</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Field names found in the dictionaries, or None if listOfDicts is None</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getFields</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">,</span> <span class="n">sampleCount</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extract field names from a list of dictionaries.</span>

<span class="sd">    Args:</span>
<span class="sd">        listOfDicts: List of dictionaries to extract field names from</span>
<span class="sd">        sampleCount: Number of dictionaries to sample. If None, all are sampled</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: Field names found in the dictionaries, or None if listOfDicts is None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">listOfDicts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">sampleCount</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">sampleCount</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>

    <span class="n">fields</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="n">sampleCount</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">row</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                <span class="n">fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">fields</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod.LOD.getLookup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getLookup</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">attrName</span><span class="p">,</span> <span class="n">withDuplicates</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>create a lookup dictionary by the given attribute name for the given list of dicts</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lod(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of dicts to get the lookup dictionary for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attrName(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the attribute to lookup</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withDuplicates(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>whether to retain single values or lists</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="return" open>
  <summary>Return</summary>
  <p>a dictionary for lookup</p>
</details>

            <details class="quote">
              <summary>Source code in <code>lodstorage/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getLookup</span><span class="p">(</span><span class="n">lod</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">attrName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">withDuplicates</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    create a lookup dictionary by the given attribute name for the given list of dicts</span>

<span class="sd">    Args:</span>
<span class="sd">        lod(list): the list of dicts to get the lookup dictionary for</span>
<span class="sd">        attrName(str): the attribute to lookup</span>
<span class="sd">        withDuplicates(bool): whether to retain single values or lists</span>

<span class="sd">    Return:</span>
<span class="sd">        a dictionary for lookup</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lookup</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">duplicates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">attrName</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">attrName</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">attrName</span><span class="p">):</span>
                <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">attrName</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">listValue</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="n">LOD</span><span class="o">.</span><span class="n">addLookup</span><span class="p">(</span>
                        <span class="n">lookup</span><span class="p">,</span> <span class="n">duplicates</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">listValue</span><span class="p">,</span> <span class="n">withDuplicates</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">LOD</span><span class="o">.</span><span class="n">addLookup</span><span class="p">(</span><span class="n">lookup</span><span class="p">,</span> <span class="n">duplicates</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">withDuplicates</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">withDuplicates</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">lookup</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">lookup</span><span class="p">,</span> <span class="n">duplicates</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod.LOD.handleListTypes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handleListTypes</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">doFilter</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>handle list types in the given list of dicts</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>cls</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>this class</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lod(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of dicts</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>doFilter(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if records containing lists value items should be filtered</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>separator(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the separator to use when converting lists</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">handleListTypes</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">lod</span><span class="p">,</span> <span class="n">doFilter</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">separator</span><span class="o">=</span><span class="s2">&quot;,&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    handle list types in the given list of dicts</span>

<span class="sd">    Args:</span>
<span class="sd">        cls: this class</span>
<span class="sd">        lod(list): a list of dicts</span>
<span class="sd">        doFilter(bool): True if records containing lists value items should be filtered</span>
<span class="sd">        separator(str): the separator to use when converting lists</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># see https://stackoverflow.com/a/1207485/1497139</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lod</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">lod</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">doFilter</span><span class="p">:</span>
                        <span class="k">del</span> <span class="n">lod</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                        <span class="k">continue</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">newValue</span> <span class="o">=</span> <span class="n">separator</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
                        <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod.LOD.intersect" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">intersect</span><span class="p">(</span><span class="n">listOfDict1</span><span class="p">,</span> <span class="n">listOfDict2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>get the  intersection of the two lists of Dicts by the given key</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">intersect</span><span class="p">(</span><span class="n">listOfDict1</span><span class="p">,</span> <span class="n">listOfDict2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the  intersection of the two lists of Dicts by the given key</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">i1</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">listOfDict1</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">LOD</span><span class="o">.</span><span class="n">sortKey</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">key</span><span class="p">)))</span>
    <span class="n">i2</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">listOfDict2</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span class="n">LOD</span><span class="o">.</span><span class="n">sortKey</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">key</span><span class="p">)))</span>
    <span class="n">c1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">)</span>
    <span class="n">c2</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">)</span>
    <span class="n">lr</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">val1</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">sortKey</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="n">val2</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">sortKey</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">val1</span> <span class="o">&lt;</span> <span class="n">val2</span><span class="p">:</span>
                <span class="n">c1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">val1</span> <span class="o">&gt;</span> <span class="n">val2</span><span class="p">:</span>
                <span class="n">c2</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
                <span class="n">c1</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i1</span><span class="p">)</span>
                <span class="n">c2</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i2</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="k">return</span> <span class="n">lr</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod.LOD.setNone" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setNone</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>make sure the given fields in the given record are set to none
Args:
    record(dict): the record to work on
    fields(list): the list of fields to set to None</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">setNone</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">fields</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    make sure the given fields in the given record are set to none</span>
<span class="sd">    Args:</span>
<span class="sd">        record(dict): the record to work on</span>
<span class="sd">        fields(list): the list of fields to set to None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
            <span class="n">record</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod.LOD.setNone4List" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">setNone4List</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>set the given fields to None for the records in the given listOfDicts
if they are not set
Args:
    listOfDicts(list): the list of records to work on
    fields(list): the list of fields to set to None</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">setNone4List</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">,</span> <span class="n">fields</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    set the given fields to None for the records in the given listOfDicts</span>
<span class="sd">    if they are not set</span>
<span class="sd">    Args:</span>
<span class="sd">        listOfDicts(list): the list of records to work on</span>
<span class="sd">        fields(list): the list of fields to set to None</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">listOfDicts</span><span class="p">:</span>
        <span class="n">LOD</span><span class="o">.</span><span class="n">setNone</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">fields</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod.LOD.sortKey" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">sortKey</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>get the sort key for the given dict d with the given key</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">sortKey</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;get the sort key for the given dict d with the given key&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># https://stackoverflow.com/a/60765557/1497139</span>
        <span class="k">return</span> <span class="nb">hash</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">d</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.lod2xml" class="doc doc-heading">
            <code>lod2xml</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2022-06-20</p>
<p>see
    https://github.com/tyleradams/json-toolkit
    https://stackoverflow.com/questions/36021526/converting-an-array-dict-to-xml-in-python</p>
<p>@author: tyleradams
@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.lod2xml.Lod2Xml" class="doc doc-heading">
            <code>Lod2Xml</code>


</h3>


    <div class="doc doc-contents ">


        <p>convert a list of dicts to XML</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/lod2xml.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Lod2Xml</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert a list of dicts to XML</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;root&quot;</span><span class="p">,</span> <span class="n">node_name</span><span class="p">:</span> <span class="nb">callable</span> <span class="o">=</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;node&quot;</span><span class="p">)</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        construct me with the given list of dicts</span>

<span class="sd">        Args:</span>
<span class="sd">            lod (list): the list of dicts to convert to XML</span>
<span class="sd">            root (str): the name of the root nod</span>
<span class="sd">            item_name (func): the function to use to calculate node names</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lod</span> <span class="o">=</span> <span class="n">lod</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">item_name</span> <span class="o">=</span> <span class="n">node_name</span>

    <span class="k">def</span> <span class="nf">asXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pretty</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert result to XML</span>

<span class="sd">        Args:</span>
<span class="sd">            pretty (bool): if True pretty print the result</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">xml</span> <span class="o">=</span> <span class="n">dicttoxml</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lod</span><span class="p">,</span> <span class="n">custom_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">item_func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">item_name</span><span class="p">,</span> <span class="n">attr_type</span><span class="o">=</span><span class="kc">False</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">pretty</span><span class="p">:</span>
            <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>
            <span class="n">prettyXml</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prettyXml</span> <span class="o">=</span> <span class="n">xml</span>
        <span class="k">return</span> <span class="n">prettyXml</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod2xml.Lod2Xml.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">root</span><span class="o">=</span><span class="s1">&#39;root&#39;</span><span class="p">,</span> <span class="n">node_name</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;node&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>construct me with the given list of dicts</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lod</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of dicts to convert to XML</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>root</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name of the root nod</p>
              </div>
            </td>
            <td>
                  <code>&#39;root&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>item_name</code>
            </td>
            <td>
                  <code><span title="func">func</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the function to use to calculate node names</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod2xml.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">,</span> <span class="n">root</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;root&quot;</span><span class="p">,</span> <span class="n">node_name</span><span class="p">:</span> <span class="nb">callable</span> <span class="o">=</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot;node&quot;</span><span class="p">)</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    construct me with the given list of dicts</span>

<span class="sd">    Args:</span>
<span class="sd">        lod (list): the list of dicts to convert to XML</span>
<span class="sd">        root (str): the name of the root nod</span>
<span class="sd">        item_name (func): the function to use to calculate node names</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lod</span> <span class="o">=</span> <span class="n">lod</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">item_name</span> <span class="o">=</span> <span class="n">node_name</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod2xml.Lod2Xml.asXml" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">asXml</span><span class="p">(</span><span class="n">pretty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>convert result to XML</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pretty</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True pretty print the result</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod2xml.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">asXml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pretty</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert result to XML</span>

<span class="sd">    Args:</span>
<span class="sd">        pretty (bool): if True pretty print the result</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">xml</span> <span class="o">=</span> <span class="n">dicttoxml</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lod</span><span class="p">,</span> <span class="n">custom_root</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">item_func</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">item_name</span><span class="p">,</span> <span class="n">attr_type</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">pretty</span><span class="p">:</span>
        <span class="n">dom</span> <span class="o">=</span> <span class="n">parseString</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>
        <span class="n">prettyXml</span> <span class="o">=</span> <span class="n">dom</span><span class="o">.</span><span class="n">toprettyxml</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">prettyXml</span> <span class="o">=</span> <span class="n">xml</span>
    <span class="k">return</span> <span class="n">prettyXml</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.lod_csv" class="doc doc-heading">
            <code>lod_csv</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created 2021</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.lod_csv.CSV" class="doc doc-heading">
            <code>CSV</code>


</h3>


    <div class="doc doc-contents ">


        <p>helper for converting data in csv format to list of dicts (LoD) and vice versa</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/lod_csv.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">CSV</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    helper for converting data in csv format to list of dicts (LoD) and vice versa</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_instance</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">dialect</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;excel&quot;</span><span class="p">,</span> <span class="n">quoting</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONNUMERIC</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor to set dialect and quoting defaults</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span><span class="o">.</span><span class="n">dialect</span> <span class="o">=</span> <span class="n">dialect</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span><span class="o">.</span><span class="n">quoting</span> <span class="o">=</span> <span class="n">quoting</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">dialect</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;excel&quot;</span><span class="p">,</span> <span class="n">quoting</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONNUMERIC</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get singleton instance of CSV class&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">dialect</span><span class="p">,</span> <span class="n">quoting</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">restoreFromCSVFile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">headerNames</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">withPostfix</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        restore LOD from given csv file</span>

<span class="sd">        Args:</span>
<span class="sd">            filePath(str): file name</span>
<span class="sd">            headerNames(List[str]): Names of the headers that should be used. If None it is assumed that the header is given.</span>
<span class="sd">            withPostfix(bool): If False the file type is appended to given filePath. Otherwise file type MUST be given with filePath.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Dict[str, Any]]: list of dicts (LoD) containing the content of the given csv file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">withPostfix</span><span class="p">:</span>
            <span class="n">filePath</span> <span class="o">+=</span> <span class="s2">&quot;.csv&quot;</span>
        <span class="n">csvStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
        <span class="n">lod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromCSV</span><span class="p">(</span><span class="n">csvStr</span><span class="p">,</span> <span class="n">headerNames</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lod</span>

    <span class="k">def</span> <span class="nf">fromCSV</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">csvString</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">fields</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dialect</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">quoting</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert given csv string to list of dicts (LOD)</span>

<span class="sd">        Args:</span>
<span class="sd">            csvString(str): csv string that should be converted to LOD</span>
<span class="sd">            fields(List[str]): Names of the headers that should be used. If None it is assumed that the header is given.</span>
<span class="sd">            dialect(str): CSV dialect to use</span>
<span class="sd">            quoting(int): CSV quoting behavior</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Dict[str, Any]]: list of dicts (LoD) containing the content of the given csv string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">dialect</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dialect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dialect</span>
        <span class="k">if</span> <span class="n">quoting</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">quoting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">quoting</span>
        <span class="n">csvStream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">csvString</span><span class="p">)</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span>
            <span class="n">csvStream</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span> <span class="n">dialect</span><span class="o">=</span><span class="n">dialect</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">quoting</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="n">lod</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fixTypes</span><span class="p">(</span><span class="n">lod</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lod</span>

    <span class="k">def</span> <span class="nf">storeToCSVFile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span> <span class="n">filePath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">withPostfix</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        converts the given lod to CSV file.</span>

<span class="sd">        Args:</span>
<span class="sd">            lod(List[Dict[str, Any]]): lod that should be converted to csv file</span>
<span class="sd">            filePath(str): file name the csv should be stored to</span>
<span class="sd">            withPostfix(bool): If False the file type is appended to given filePath. Otherwise file type MUST be given with filePath.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">withPostfix</span><span class="p">:</span>
            <span class="n">filePath</span> <span class="o">+=</span> <span class="s2">&quot;.csv&quot;</span>
        <span class="n">csvStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toCSV</span><span class="p">(</span><span class="n">lod</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeFile</span><span class="p">(</span><span class="n">csvStr</span><span class="p">,</span> <span class="n">filePath</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">toCSV</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">lod</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
        <span class="n">includeFields</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">excludeFields</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">dialect</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">quoting</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        converts the given lod to CSV string.</span>

<span class="sd">        Args:</span>
<span class="sd">            lod(List[Dict[str, Any]]): lod that should be converted to csv string</span>
<span class="sd">            includeFields(List[str]): list of fields that should be included in the csv</span>
<span class="sd">            excludeFields(List[str]): list of fields that should be excluded from the csv</span>
<span class="sd">            dialect(str): CSV dialect to use</span>
<span class="sd">            quoting(int): CSV quoting behavior</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: csv string of the given lod</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">dialect</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">dialect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dialect</span>
        <span class="k">if</span> <span class="n">quoting</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">quoting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">quoting</span>
        <span class="k">if</span> <span class="n">lod</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">excludeFields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lod</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">filterFields</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">excludeFields</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">includeFields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">getFields</span><span class="p">(</span><span class="n">lod</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">includeFields</span>
            <span class="n">lod</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">filterFields</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">includeFields</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">csvStream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
        <span class="n">dict_writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span>
            <span class="n">csvStream</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span> <span class="n">dialect</span><span class="o">=</span><span class="n">dialect</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">quoting</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="n">dict_writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
        <span class="n">dict_writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">lod</span><span class="p">)</span>
        <span class="n">csvString</span> <span class="o">=</span> <span class="n">csvStream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">csvString</span>

    <span class="k">def</span> <span class="nf">readFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reads the given filename and returns it as string</span>

<span class="sd">        Args:</span>
<span class="sd">            filename(str): Name of the file that should be returned as string</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Content of the file as string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">content</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">content</span>

    <span class="k">def</span> <span class="nf">writeFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write the given str to the given filename</span>

<span class="sd">        Args:</span>
<span class="sd">            content(str): string that should be written into the file</span>
<span class="sd">            filename(str): Name of the file the given str should be written to</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fixTypes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        fixes the types of the given LoD.</span>

<span class="sd">        Args:</span>
<span class="sd">            lod(List[Dict[str, Any]]): List of dictionaries to fix types for</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                    <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod_csv.CSV.__new__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__new__</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="s1">&#39;excel&#39;</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONNUMERIC</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>constructor to set dialect and quoting defaults</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod_csv.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">dialect</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;excel&quot;</span><span class="p">,</span> <span class="n">quoting</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONNUMERIC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor to set dialect and quoting defaults</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span><span class="o">.</span><span class="n">dialect</span> <span class="o">=</span> <span class="n">dialect</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span><span class="o">.</span><span class="n">quoting</span> <span class="o">=</span> <span class="n">quoting</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod_csv.CSV.fixTypes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fixTypes</span><span class="p">(</span><span class="n">lod</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>fixes the types of the given LoD.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lod(List[Dict[str,</code>
            </td>
            <td>
                  <code>Any]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of dictionaries to fix types for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod_csv.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fixTypes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    fixes the types of the given LoD.</span>

<span class="sd">    Args:</span>
<span class="sd">        lod(List[Dict[str, Any]]): List of dictionaries to fix types for</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod_csv.CSV.fromCSV" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fromCSV</span><span class="p">(</span><span class="n">csvString</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dialect</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>convert given csv string to list of dicts (LOD)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>csvString(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>csv string that should be converted to LOD</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fields(List[str])</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Names of the headers that should be used. If None it is assumed that the header is given.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dialect(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>CSV dialect to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>quoting(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>CSV quoting behavior</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[Dict[str, Any]]: list of dicts (LoD) containing the content of the given csv string</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod_csv.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fromCSV</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">csvString</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">fields</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">dialect</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">quoting</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert given csv string to list of dicts (LOD)</span>

<span class="sd">    Args:</span>
<span class="sd">        csvString(str): csv string that should be converted to LOD</span>
<span class="sd">        fields(List[str]): Names of the headers that should be used. If None it is assumed that the header is given.</span>
<span class="sd">        dialect(str): CSV dialect to use</span>
<span class="sd">        quoting(int): CSV quoting behavior</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[Dict[str, Any]]: list of dicts (LoD) containing the content of the given csv string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">dialect</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dialect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dialect</span>
    <span class="k">if</span> <span class="n">quoting</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">quoting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">quoting</span>
    <span class="n">csvStream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">csvString</span><span class="p">)</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span>
        <span class="n">csvStream</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span> <span class="n">dialect</span><span class="o">=</span><span class="n">dialect</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">quoting</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="n">lod</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fixTypes</span><span class="p">(</span><span class="n">lod</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lod</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod_csv.CSV.get_instance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_instance</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="s1">&#39;excel&#39;</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONNUMERIC</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get singleton instance of CSV class</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod_csv.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">dialect</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;excel&quot;</span><span class="p">,</span> <span class="n">quoting</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">QUOTE_NONNUMERIC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get singleton instance of CSV class&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="p">(</span><span class="n">dialect</span><span class="p">,</span> <span class="n">quoting</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod_csv.CSV.readFile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">readFile</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Reads the given filename and returns it as string</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filename(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the file that should be returned as string</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Content of the file as string</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod_csv.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">readFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Reads the given filename and returns it as string</span>

<span class="sd">    Args:</span>
<span class="sd">        filename(str): Name of the file that should be returned as string</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Content of the file as string</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">content</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod_csv.CSV.restoreFromCSVFile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">restoreFromCSVFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="n">headerNames</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">withPostfix</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>restore LOD from given csv file</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>filePath(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>file name</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>headerNames(List[str])</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Names of the headers that should be used. If None it is assumed that the header is given.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withPostfix(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If False the file type is appended to given filePath. Otherwise file type MUST be given with filePath.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List[Dict[str, Any]]: list of dicts (LoD) containing the content of the given csv file</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod_csv.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">restoreFromCSVFile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">headerNames</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">withPostfix</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    restore LOD from given csv file</span>

<span class="sd">    Args:</span>
<span class="sd">        filePath(str): file name</span>
<span class="sd">        headerNames(List[str]): Names of the headers that should be used. If None it is assumed that the header is given.</span>
<span class="sd">        withPostfix(bool): If False the file type is appended to given filePath. Otherwise file type MUST be given with filePath.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[Dict[str, Any]]: list of dicts (LoD) containing the content of the given csv file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">withPostfix</span><span class="p">:</span>
        <span class="n">filePath</span> <span class="o">+=</span> <span class="s2">&quot;.csv&quot;</span>
    <span class="n">csvStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">readFile</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span>
    <span class="n">lod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fromCSV</span><span class="p">(</span><span class="n">csvStr</span><span class="p">,</span> <span class="n">headerNames</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lod</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod_csv.CSV.storeToCSVFile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">storeToCSVFile</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">filePath</span><span class="p">,</span> <span class="n">withPostfix</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>converts the given lod to CSV file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lod(List[Dict[str,</code>
            </td>
            <td>
                  <code>Any]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>lod that should be converted to csv file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filePath(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>file name the csv should be stored to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withPostfix(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If False the file type is appended to given filePath. Otherwise file type MUST be given with filePath.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod_csv.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">storeToCSVFile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span> <span class="n">filePath</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">withPostfix</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    converts the given lod to CSV file.</span>

<span class="sd">    Args:</span>
<span class="sd">        lod(List[Dict[str, Any]]): lod that should be converted to csv file</span>
<span class="sd">        filePath(str): file name the csv should be stored to</span>
<span class="sd">        withPostfix(bool): If False the file type is appended to given filePath. Otherwise file type MUST be given with filePath.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">withPostfix</span><span class="p">:</span>
        <span class="n">filePath</span> <span class="o">+=</span> <span class="s2">&quot;.csv&quot;</span>
    <span class="n">csvStr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">toCSV</span><span class="p">(</span><span class="n">lod</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">writeFile</span><span class="p">(</span><span class="n">csvStr</span><span class="p">,</span> <span class="n">filePath</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod_csv.CSV.toCSV" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">toCSV</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">includeFields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">excludeFields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dialect</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>converts the given lod to CSV string.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lod(List[Dict[str,</code>
            </td>
            <td>
                  <code>Any]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>lod that should be converted to csv string</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>includeFields(List[str])</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of fields that should be included in the csv</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>excludeFields(List[str])</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of fields that should be excluded from the csv</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dialect(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>CSV dialect to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>quoting(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>CSV quoting behavior</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>csv string of the given lod</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod_csv.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">toCSV</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">lod</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]],</span>
    <span class="n">includeFields</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">excludeFields</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">dialect</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">quoting</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    converts the given lod to CSV string.</span>

<span class="sd">    Args:</span>
<span class="sd">        lod(List[Dict[str, Any]]): lod that should be converted to csv string</span>
<span class="sd">        includeFields(List[str]): list of fields that should be included in the csv</span>
<span class="sd">        excludeFields(List[str]): list of fields that should be excluded from the csv</span>
<span class="sd">        dialect(str): CSV dialect to use</span>
<span class="sd">        quoting(int): CSV quoting behavior</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: csv string of the given lod</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">dialect</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">dialect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dialect</span>
    <span class="k">if</span> <span class="n">quoting</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">quoting</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">quoting</span>
    <span class="k">if</span> <span class="n">lod</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">excludeFields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">lod</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">filterFields</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">excludeFields</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">includeFields</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">getFields</span><span class="p">(</span><span class="n">lod</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">includeFields</span>
        <span class="n">lod</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">filterFields</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">includeFields</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">csvStream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
    <span class="n">dict_writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span>
        <span class="n">csvStream</span><span class="p">,</span> <span class="n">fieldnames</span><span class="o">=</span><span class="n">fields</span><span class="p">,</span> <span class="n">dialect</span><span class="o">=</span><span class="n">dialect</span><span class="p">,</span> <span class="n">quoting</span><span class="o">=</span><span class="n">quoting</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="n">dict_writer</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
    <span class="n">dict_writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">lod</span><span class="p">)</span>
    <span class="n">csvString</span> <span class="o">=</span> <span class="n">csvStream</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">csvString</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.lod_csv.CSV.writeFile" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">writeFile</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Write the given str to the given filename</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>content(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>string that should be written into the file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>filename(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the file the given str should be written to</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/lod_csv.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">writeFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">filename</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Write the given str to the given filename</span>

<span class="sd">    Args:</span>
<span class="sd">        content(str): string that should be written into the file</span>
<span class="sd">        filename(str): Name of the file the given str should be written to</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
        <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.mwTable" class="doc doc-heading">
            <code>mwTable</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2020-08-21</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.mwTable.MediaWikiTable" class="doc doc-heading">
            <code>MediaWikiTable</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>helper for https://www.mediawiki.org/wiki/Help:Tables</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/mwTable.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MediaWikiTable</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    helper for https://www.mediawiki.org/wiki/Help:Tables</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">wikiTable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">colFormats</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sortable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">withNewLines</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colFormats</span> <span class="o">=</span> <span class="n">colFormats</span>
        <span class="n">cssDelim</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">wikiTable</span><span class="p">:</span>
            <span class="n">cWikiTable</span> <span class="o">=</span> <span class="s2">&quot;wikitable&quot;</span>
            <span class="n">cssDelim</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cWikiTable</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">sortable</span><span class="p">:</span>
            <span class="n">cSortable</span> <span class="o">=</span> <span class="s2">&quot;sortable&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cSortable</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="s1">&#39;{|class=&quot;</span><span class="si">%s%s%s</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cWikiTable</span><span class="p">,</span> <span class="n">cssDelim</span><span class="p">,</span> <span class="n">cSortable</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">|}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">withNewLines</span> <span class="o">=</span> <span class="n">withNewLines</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">addHeader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        add the given record as a &quot;sample&quot; header</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">withNewLines</span><span class="p">:</span>
            <span class="n">headerStart</span> <span class="o">=</span> <span class="s2">&quot;|+&quot;</span>
            <span class="n">firstColDelim</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">!&quot;</span>
            <span class="n">colDelim</span> <span class="o">=</span> <span class="n">firstColDelim</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headerStart</span> <span class="o">=</span> <span class="s2">&quot;|+</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">firstColDelim</span> <span class="o">=</span> <span class="s2">&quot;!&quot;</span>
            <span class="n">colDelim</span> <span class="o">=</span> <span class="s2">&quot;!!&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="n">headerStart</span>
        <span class="n">first</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">first</span><span class="p">:</span>
                <span class="n">delim</span> <span class="o">=</span> <span class="n">firstColDelim</span>
                <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">delim</span> <span class="o">=</span> <span class="n">colDelim</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">delim</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">addRow4Dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addHeader</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">withNewLines</span><span class="p">:</span>
            <span class="n">rowStart</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">|-&quot;</span>
            <span class="n">colDelim</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">|&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rowStart</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">|-</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">colDelim</span> <span class="o">=</span> <span class="s2">&quot;||&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">+=</span> <span class="n">rowStart</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">colFormats</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">colFormats</span><span class="p">:</span>
                <span class="n">colFormat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colFormats</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">colFormat</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">colFormat</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">colDelim</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">fromListOfDicts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listOfDicts</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">listOfDicts</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addRow4Dict</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span> <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">asWikiMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert me to MediaWiki markup</span>

<span class="sd">        Returns:</span>
<span class="sd">            string: the MediWiki Markup for this table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">markup</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.mwTable.MediaWikiTable.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">wikiTable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">colFormats</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sortable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">withNewLines</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Constructor</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/mwTable.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">wikiTable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">colFormats</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sortable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">withNewLines</span><span class="o">=</span><span class="kc">False</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">colFormats</span> <span class="o">=</span> <span class="n">colFormats</span>
    <span class="n">cssDelim</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">wikiTable</span><span class="p">:</span>
        <span class="n">cWikiTable</span> <span class="o">=</span> <span class="s2">&quot;wikitable&quot;</span>
        <span class="n">cssDelim</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cWikiTable</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">sortable</span><span class="p">:</span>
        <span class="n">cSortable</span> <span class="o">=</span> <span class="s2">&quot;sortable&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">cSortable</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="s1">&#39;{|class=&quot;</span><span class="si">%s%s%s</span><span class="s1">&quot;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">cWikiTable</span><span class="p">,</span> <span class="n">cssDelim</span><span class="p">,</span> <span class="n">cSortable</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">|}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">withNewLines</span> <span class="o">=</span> <span class="n">withNewLines</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.mwTable.MediaWikiTable.addHeader" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">addHeader</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>add the given record as a "sample" header</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/mwTable.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">addHeader</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    add the given record as a &quot;sample&quot; header</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">withNewLines</span><span class="p">:</span>
        <span class="n">headerStart</span> <span class="o">=</span> <span class="s2">&quot;|+&quot;</span>
        <span class="n">firstColDelim</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">!&quot;</span>
        <span class="n">colDelim</span> <span class="o">=</span> <span class="n">firstColDelim</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">headerStart</span> <span class="o">=</span> <span class="s2">&quot;|+</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">firstColDelim</span> <span class="o">=</span> <span class="s2">&quot;!&quot;</span>
        <span class="n">colDelim</span> <span class="o">=</span> <span class="s2">&quot;!!&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">=</span> <span class="n">headerStart</span>
    <span class="n">first</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">first</span><span class="p">:</span>
            <span class="n">delim</span> <span class="o">=</span> <span class="n">firstColDelim</span>
            <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">delim</span> <span class="o">=</span> <span class="n">colDelim</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">header</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">delim</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.mwTable.MediaWikiTable.asWikiMarkup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">asWikiMarkup</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>convert me to MediaWiki markup</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>string</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the MediWiki Markup for this table</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/mwTable.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">asWikiMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert me to MediaWiki markup</span>

<span class="sd">    Returns:</span>
<span class="sd">        string: the MediWiki Markup for this table</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">markup</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">header</span><span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">noneReplace</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">end</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">markup</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.mysql" class="doc doc-heading">
            <code>mysql</code>


</h2>

    <div class="doc doc-contents ">

        <p>mysql.py:</p>
<p>MySQL and MariaDB support</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.mysql.MySqlQuery" class="doc doc-heading">
            <code>MySqlQuery</code>


</h3>


    <div class="doc doc-contents ">


        <p>A class to manage and execute mySQL queries with optional debugging.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.mysql.MySqlQuery.endpoint_info">endpoint_info</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Endpoint (lodstorage.query.Endpoint)" href="#lodstorage.query.Endpoint">Endpoint</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>endpoint configuration.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.mysql.MySqlQuery.debug">debug</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag to enable debugging.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>lodstorage/mysql.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">MySqlQuery</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to manage and execute mySQL queries with optional debugging.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        endpoint_info (Endpoint): endpoint configuration.</span>
<span class="sd">        debug (bool): Flag to enable debugging.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="n">Endpoint</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initializes the Query class with command-line arguments.</span>

<span class="sd">        Args:</span>
<span class="sd">            endpoint (Endpoint): endpoint configuration.</span>
<span class="sd">            debug (bool): Flag to enable debugging.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">db_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">host</span> <span class="ow">or</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
            <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">port</span> <span class="ow">or</span> <span class="mi">3306</span><span class="p">,</span>
            <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">user</span> <span class="ow">or</span> <span class="s2">&quot;root&quot;</span><span class="p">,</span>
            <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
            <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">database</span><span class="p">,</span>
            <span class="s2">&quot;charset&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">charset</span> <span class="ow">or</span> <span class="s2">&quot;utf8mb4&quot;</span><span class="p">,</span>
            <span class="s2">&quot;use_unicode&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># ensure proper unicode handling</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>

    <span class="k">def</span> <span class="nf">get_cursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Executing query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;With connection parameters: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">db_params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">connection</span> <span class="o">=</span> <span class="n">pymysql</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">db_params</span><span class="p">)</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">(</span><span class="n">pymysql</span><span class="o">.</span><span class="n">cursors</span><span class="o">.</span><span class="n">DictCursor</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">connection</span><span class="p">,</span> <span class="n">cursor</span>

    <span class="k">def</span> <span class="nf">decode_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts binary values to UTF-8 strings.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (Dict[str, Any]): Raw database row data</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: Data with binary values decoded to strings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">decoded_record</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
                <span class="n">decoded_record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">decoded_record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">decoded_record</span>

    <span class="k">def</span> <span class="nf">execute_sql_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes an SQL query using the provided connection parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">            query (str): The SQL query to execute.</span>
<span class="sd">            connection_params (dict): Database connection parameters.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: A list of dictionaries representing the query results.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">connection</span><span class="p">,</span> <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cursor</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="n">raw_lod</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">lod</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">raw_row</span> <span class="ow">in</span> <span class="n">raw_lod</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_record</span><span class="p">(</span><span class="n">raw_row</span><span class="p">)</span>
            <span class="n">lod</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lod</span>

    <span class="k">def</span> <span class="nf">query_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generator for fetching records one by one from a SQL query.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">connection</span><span class="p">,</span> <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cursor</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
            <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
                <span class="n">raw_record</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">raw_record</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_record</span><span class="p">(</span><span class="n">raw_record</span><span class="p">)</span>
                <span class="k">yield</span> <span class="n">record</span>

        <span class="k">finally</span><span class="p">:</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.mysql.MySqlQuery.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initializes the Query class with command-line arguments.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>endpoint</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Endpoint (lodstorage.query.Endpoint)" href="#lodstorage.query.Endpoint">Endpoint</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>endpoint configuration.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Flag to enable debugging.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/mysql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="n">Endpoint</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the Query class with command-line arguments.</span>

<span class="sd">    Args:</span>
<span class="sd">        endpoint (Endpoint): endpoint configuration.</span>
<span class="sd">        debug (bool): Flag to enable debugging.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">db_params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;host&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">host</span> <span class="ow">or</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
        <span class="s2">&quot;port&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">port</span> <span class="ow">or</span> <span class="mi">3306</span><span class="p">,</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">user</span> <span class="ow">or</span> <span class="s2">&quot;root&quot;</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">password</span><span class="p">,</span>
        <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">database</span><span class="p">,</span>
        <span class="s2">&quot;charset&quot;</span><span class="p">:</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">charset</span> <span class="ow">or</span> <span class="s2">&quot;utf8mb4&quot;</span><span class="p">,</span>
        <span class="s2">&quot;use_unicode&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>  <span class="c1"># ensure proper unicode handling</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.mysql.MySqlQuery.decode_record" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">decode_record</span><span class="p">(</span><span class="n">record</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Converts binary values to UTF-8 strings.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>data</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raw database row data</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[str, Any]: Data with binary values decoded to strings</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/mysql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">decode_record</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts binary values to UTF-8 strings.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (Dict[str, Any]): Raw database row data</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, Any]: Data with binary values decoded to strings</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">decoded_record</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">decoded_record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">decoded_record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">decoded_record</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.mysql.MySqlQuery.execute_sql_query" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">execute_sql_query</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Executes an SQL query using the provided connection parameters.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SQL query to execute.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>connection_params</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Database connection parameters.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of dictionaries representing the query results.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/mysql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">execute_sql_query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Executes an SQL query using the provided connection parameters.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str): The SQL query to execute.</span>
<span class="sd">        connection_params (dict): Database connection parameters.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of dictionaries representing the query results.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">connection</span><span class="p">,</span> <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cursor</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">raw_lod</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">lod</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">raw_row</span> <span class="ow">in</span> <span class="n">raw_lod</span><span class="p">:</span>
        <span class="n">row</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_record</span><span class="p">(</span><span class="n">raw_row</span><span class="p">)</span>
        <span class="n">lod</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lod</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.mysql.MySqlQuery.query_generator" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">query_generator</span><span class="p">(</span><span class="n">query</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Generator for fetching records one by one from a SQL query.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/mysql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">query_generator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Generator</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generator for fetching records one by one from a SQL query.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">connection</span><span class="p">,</span> <span class="n">cursor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_cursor</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">raw_record</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">fetchone</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">raw_record</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decode_record</span><span class="p">(</span><span class="n">raw_record</span><span class="p">)</span>
            <span class="k">yield</span> <span class="n">record</span>

    <span class="k">finally</span><span class="p">:</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">connection</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.params" class="doc doc-heading">
            <code>params</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2024-05-06</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.params.Param" class="doc doc-heading">
            <code>Param</code>


</h3>


    <div class="doc doc-contents ">


        <p>a parameter  (input or output) for a query</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/params.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">Param</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a parameter  (input or output) for a query</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="nb">type</span><span class="p">:</span> <span class="nb">str</span>  <span class="c1"># python type</span>
    <span class="n">default_value</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># for input parameters only</span>
    <span class="nb">range</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">list</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>  <span class="c1"># for output only</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># optional for doc/UI</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.params.Params" class="doc doc-heading">
            <code>Params</code>


</h3>


    <div class="doc doc-contents ">


        <p>parameter handling</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/params.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Params</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    parameter handling</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">illegal_chars</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&quot;[;&lt;&gt;&amp;|]&quot;&#39;&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">with_audit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor</span>

<span class="sd">        Args:</span>
<span class="sd">            query (str): the query to analyze for parameters</span>
<span class="sd">            illegal_chars (str): chars that may not be in the values</span>
<span class="sd">            with_audit (bool): if True audit parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">illegal_chars</span> <span class="o">=</span> <span class="n">illegal_chars</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">with_audit</span> <span class="o">=</span> <span class="n">with_audit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;{{\s*(\w+)\s*}}&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">param</span><span class="p">:</span> <span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">has_params</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set my params</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params_dict</span> <span class="o">=</span> <span class="n">params_dict</span>

    <span class="k">def</span> <span class="nf">audit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Audit the usage of parameters in the query.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If potentially malicious values are detected in the parameter dictionary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">illegal_chars</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;Potentially malicious value detected for parameter &#39;</span><span class="si">{</span><span class="n">param</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Replace Jinja templates in the query with corresponding parameter values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The query with Jinja templates replaced by parameter values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">with_audit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">audit</span><span class="p">()</span>
        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span>
        <span class="k">for</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;{{\s*&quot;</span> <span class="o">+</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\s*\}\}&quot;</span><span class="p">)</span>
            <span class="n">value_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">query</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">value_str</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">query</span>

    <span class="k">def</span> <span class="nf">apply_parameters_with_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply parameters to the query string with parameter checking.</span>

<span class="sd">        This method checks if the query requires parameters. If parameters are required</span>
<span class="sd">        but not provided, it raises an exception with a descriptive message. If parameters</span>
<span class="sd">        are provided, it applies them to the query.</span>

<span class="sd">        Args:</span>
<span class="sd">            param_dict (dict, optional): A dictionary of parameter names and values.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The query string with parameters applied, if applicable.</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If parameters are required but not provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_params</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">param_dict</span><span class="p">:</span>
                <span class="n">param_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                    <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
                <span class="p">)</span>  <span class="c1"># remove duplicates while preserving order</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">param_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">displayed_params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">param_names</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;, ...&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">displayed_params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">param_names</span><span class="p">)</span>
                <span class="n">plural_suffix</span> <span class="o">=</span> <span class="s2">&quot;s&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">param_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Query needs </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">param_names</span><span class="p">)</span><span class="si">}</span><span class="s2"> parameter</span><span class="si">{</span><span class="n">plural_suffix</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">displayed_params</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">param_dict</span><span class="p">)</span>
                <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_parameters</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">query</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.params.Params.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">illegal_chars</span><span class="o">=</span><span class="s1">&#39;&quot;[;&lt;&gt;&amp;|]&quot;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">with_audit</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>constructor</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the query to analyze for parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>illegal_chars</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>chars that may not be in the values</p>
              </div>
            </td>
            <td>
                  <code>&#39;&#34;[;&lt;&gt;&amp;|]&#34;\&#39;&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>with_audit</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True audit parameters</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/params.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">illegal_chars</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&quot;[;&lt;&gt;&amp;|]&quot;&#39;&quot;&quot;&quot;</span><span class="p">,</span> <span class="n">with_audit</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str): the query to analyze for parameters</span>
<span class="sd">        illegal_chars (str): chars that may not be in the values</span>
<span class="sd">        with_audit (bool): if True audit parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">illegal_chars</span> <span class="o">=</span> <span class="n">illegal_chars</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">with_audit</span> <span class="o">=</span> <span class="n">with_audit</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;{{\s*(\w+)\s*}}&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pattern</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">params_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">param</span><span class="p">:</span> <span class="s2">&quot;&quot;</span> <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">has_params</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.params.Params.apply_parameters" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">apply_parameters</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Replace Jinja templates in the query with corresponding parameter values.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The query with Jinja templates replaced by parameter values.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/params.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">apply_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Replace Jinja templates in the query with corresponding parameter values.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The query with Jinja templates replaced by parameter values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">with_audit</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">audit</span><span class="p">()</span>
    <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span>
    <span class="k">for</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;{{\s*&quot;</span> <span class="o">+</span> <span class="n">re</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">param</span><span class="p">)</span> <span class="o">+</span> <span class="sa">r</span><span class="s2">&quot;\s*\}\}&quot;</span><span class="p">)</span>
        <span class="n">value_str</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="n">pattern</span><span class="p">,</span> <span class="n">value_str</span><span class="p">,</span> <span class="n">query</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">query</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.params.Params.apply_parameters_with_check" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">apply_parameters_with_check</span><span class="p">(</span><span class="n">param_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Apply parameters to the query string with parameter checking.</p>
<p>This method checks if the query requires parameters. If parameters are required
but not provided, it raises an exception with a descriptive message. If parameters
are provided, it applies them to the query.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>param_dict</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of parameter names and values.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The query string with parameters applied, if applicable.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If parameters are required but not provided.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/params.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">apply_parameters_with_check</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">param_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply parameters to the query string with parameter checking.</span>

<span class="sd">    This method checks if the query requires parameters. If parameters are required</span>
<span class="sd">    but not provided, it raises an exception with a descriptive message. If parameters</span>
<span class="sd">    are provided, it applies them to the query.</span>

<span class="sd">    Args:</span>
<span class="sd">        param_dict (dict, optional): A dictionary of parameter names and values.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The query string with parameters applied, if applicable.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If parameters are required but not provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">has_params</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">param_dict</span><span class="p">:</span>
            <span class="n">param_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
            <span class="p">)</span>  <span class="c1"># remove duplicates while preserving order</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">param_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">displayed_params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">param_names</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;, ...&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">displayed_params</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">param_names</span><span class="p">)</span>
            <span class="n">plural_suffix</span> <span class="o">=</span> <span class="s2">&quot;s&quot;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">param_names</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Query needs </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">param_names</span><span class="p">)</span><span class="si">}</span><span class="s2"> parameter</span><span class="si">{</span><span class="n">plural_suffix</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">displayed_params</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">param_dict</span><span class="p">)</span>
            <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_parameters</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">query</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.params.Params.audit" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">audit</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Audit the usage of parameters in the query.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If potentially malicious values are detected in the parameter dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/params.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">audit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Audit the usage of parameters in the query.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If potentially malicious values are detected in the parameter dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">illegal_chars</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Potentially malicious value detected for parameter &#39;</span><span class="si">{</span><span class="n">param</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
                    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.params.Params.set" class="doc doc-heading">
            <code class="highlight language-python"><span class="nb">set</span><span class="p">(</span><span class="n">params_dict</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>set my params</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/params.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    set my params</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">params_dict</span> <span class="o">=</span> <span class="n">params_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.params.StoreDictKeyPair" class="doc doc-heading">
            <code>StoreDictKeyPair</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="argparse.Action">Action</span></code></p>


        <p>Custom argparse action to store key-value pairs as a dictionary.</p>
<p>This class implements an argparse action to parse and store command-line
arguments in the form of key-value pairs. The pairs should be separated by
a comma and each key-value pair should be separated by an equals sign.</p>


<details class="example" open>
  <summary>Example</summary>
  <p>--option key1=value1,key2=value2,key3=value3</p>
</details>

<details class="reference" open>
  <summary>Reference</summary>
  <p>https://stackoverflow.com/a/42355279/1497139</p>
</details>






              <details class="quote">
                <summary>Source code in <code>lodstorage/params.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">StoreDictKeyPair</span><span class="p">(</span><span class="n">argparse</span><span class="o">.</span><span class="n">Action</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Custom argparse action to store key-value pairs as a dictionary.</span>

<span class="sd">    This class implements an argparse action to parse and store command-line</span>
<span class="sd">    arguments in the form of key-value pairs. The pairs should be separated by</span>
<span class="sd">    a comma and each key-value pair should be separated by an equals sign.</span>

<span class="sd">    Example:</span>
<span class="sd">        --option key1=value1,key2=value2,key3=value3</span>

<span class="sd">    Reference:</span>
<span class="sd">        https://stackoverflow.com/a/42355279/1497139</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">_parser</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">,</span>
        <span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">,</span>
        <span class="n">values</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">_option_string</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parse key-value pairs and store them as a dictionary in the namespace.</span>

<span class="sd">        Args:</span>
<span class="sd">            parser (argparse.ArgumentParser): The argument parser object.</span>
<span class="sd">            namespace (argparse.Namespace): The namespace to store the parsed values.</span>
<span class="sd">            values (str): The string containing key-value pairs separated by commas.</span>
<span class="sd">            option_string (Optional[str]): The option string, if provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">my_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">kv</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">):</span>
            <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">kv</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)</span>
            <span class="n">my_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="n">my_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.params.StoreDictKeyPair.__call__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__call__</span><span class="p">(</span><span class="n">_parser</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">_option_string</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Parse key-value pairs and store them as a dictionary in the namespace.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>parser</code>
            </td>
            <td>
                  <code><span title="argparse.ArgumentParser">ArgumentParser</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The argument parser object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>namespace</code>
            </td>
            <td>
                  <code><span title="argparse.Namespace">Namespace</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The namespace to store the parsed values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>values</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The string containing key-value pairs separated by commas.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>option_string</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The option string, if provided.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/params.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">_parser</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">,</span>
    <span class="n">namespace</span><span class="p">:</span> <span class="n">argparse</span><span class="o">.</span><span class="n">Namespace</span><span class="p">,</span>
    <span class="n">values</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">_option_string</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parse key-value pairs and store them as a dictionary in the namespace.</span>

<span class="sd">    Args:</span>
<span class="sd">        parser (argparse.ArgumentParser): The argument parser object.</span>
<span class="sd">        namespace (argparse.Namespace): The namespace to store the parsed values.</span>
<span class="sd">        values (str): The string containing key-value pairs separated by commas.</span>
<span class="sd">        option_string (Optional[str]): The option string, if provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">my_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">kv</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">):</span>
        <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">kv</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;=&quot;</span><span class="p">)</span>
        <span class="n">my_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
    <span class="nb">setattr</span><span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dest</span><span class="p">,</span> <span class="n">my_dict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.plot" class="doc doc-heading">
            <code>plot</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2020-07-05</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.plot.Plot" class="doc doc-heading">
            <code>Plot</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>create Plot based on counters
see https://stackoverflow.com/questions/19198920/using-counter-in-python-to-build-histogram</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/plot.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Plot</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    create Plot based on counters</span>
<span class="sd">    see https://stackoverflow.com/questions/19198920/using-counter-in-python-to-build-histogram</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">valueList</span><span class="p">,</span>
        <span class="n">title</span><span class="p">,</span>
        <span class="n">xlabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">ylabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">gformat</span><span class="o">=</span><span class="s2">&quot;.png&quot;</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
        <span class="n">plotdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">valueList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">valueList</span> <span class="o">=</span> <span class="n">valueList</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span> <span class="o">=</span> <span class="n">xlabel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span> <span class="o">=</span> <span class="n">ylabel</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">=</span> <span class="n">fontsize</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gformat</span> <span class="o">=</span> <span class="n">gformat</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">plotdir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotdir</span> <span class="o">=</span> <span class="n">plotdir</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotdir</span> <span class="o">=</span> <span class="n">path</span> <span class="o">+</span> <span class="s2">&quot;/../plots/&quot;</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotdir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">titleMe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;set my title and labels&quot;&quot;&quot;</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">showMe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;show&quot;</span><span class="p">,</span> <span class="n">close</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;show me in the given mode&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;show&quot;</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotdir</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">gformat</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">close</span><span class="p">:</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">barchart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;show&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;barchart based histogram for the given counter&quot;&quot;&quot;</span>
        <span class="n">labels</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titleMe</span><span class="p">()</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">indexes</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">indexes</span> <span class="o">+</span> <span class="n">width</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showMe</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">showDebug</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;   value  list: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">valueList</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;counter  items: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;counter values: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;counter   keys: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">hist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;show&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;create histogram for the given counter&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showDebug</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titleMe</span><span class="p">()</span>
        <span class="c1"># see https://stackoverflow.com/a/2162045/1497139</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valueList</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showMe</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.plot.Plot.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">valueList</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">xlabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ylabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">gformat</span><span class="o">=</span><span class="s1">&#39;.png&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">plotdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Constructor</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/plot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">valueList</span><span class="p">,</span>
    <span class="n">title</span><span class="p">,</span>
    <span class="n">xlabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">ylabel</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">gformat</span><span class="o">=</span><span class="s2">&quot;.png&quot;</span><span class="p">,</span>
    <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
    <span class="n">plotdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">valueList</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">valueList</span> <span class="o">=</span> <span class="n">valueList</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span> <span class="o">=</span> <span class="n">xlabel</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span> <span class="o">=</span> <span class="n">ylabel</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span> <span class="o">=</span> <span class="n">fontsize</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">gformat</span> <span class="o">=</span> <span class="n">gformat</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">plotdir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotdir</span> <span class="o">=</span> <span class="n">plotdir</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotdir</span> <span class="o">=</span> <span class="n">path</span> <span class="o">+</span> <span class="s2">&quot;/../plots/&quot;</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotdir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.plot.Plot.barchart" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">barchart</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;show&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>barchart based histogram for the given counter</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/plot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">barchart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;show&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;barchart based histogram for the given counter&quot;&quot;&quot;</span>
    <span class="n">labels</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
    <span class="n">indexes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">))</span>
    <span class="n">width</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">titleMe</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">indexes</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">width</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">indexes</span> <span class="o">+</span> <span class="n">width</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span> <span class="n">labels</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">max</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">showMe</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.plot.Plot.hist" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">hist</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;show&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>create histogram for the given counter</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/plot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">hist</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;show&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;create histogram for the given counter&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showDebug</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">titleMe</span><span class="p">()</span>
    <span class="c1"># see https://stackoverflow.com/a/2162045/1497139</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">valueList</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">showMe</span><span class="p">(</span><span class="n">mode</span><span class="p">)</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.plot.Plot.showMe" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">showMe</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;show&#39;</span><span class="p">,</span> <span class="n">close</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>show me in the given mode</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/plot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">showMe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;show&quot;</span><span class="p">,</span> <span class="n">close</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;show me in the given mode&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">mode</span> <span class="o">==</span> <span class="s2">&quot;show&quot;</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotdir</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">gformat</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">close</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.plot.Plot.titleMe" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">titleMe</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>set my title and labels</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/plot.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">titleMe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;set my title and labels&quot;&quot;&quot;</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fontsize</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">xlabel</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ylabel</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.prefix_config" class="doc doc-heading">
            <code>prefix_config</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2025-06-04</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.prefix_config.PrefixConfig" class="doc doc-heading">
            <code>PrefixConfig</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>Configuration for SPARQL prefixes</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/prefix_config.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">PrefixConfig</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configuration for SPARQL prefixes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">wikidata_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">prefix_prefix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">prefixes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set default values after initialization</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># nothing to do yet</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">as_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get prefixes as formatted text block.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Newline-separated prefix declarations</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">text</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefix_config.PrefixConfig.__post_init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__post_init__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Set default values after initialization</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefix_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Set default values after initialization</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># nothing to do yet</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefix_config.PrefixConfig.as_text" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">as_text</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get prefixes as formatted text block.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Newline-separated prefix declarations</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefix_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">as_text</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get prefixes as formatted text block.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Newline-separated prefix declarations</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">text</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.prefix_config.PrefixConfigs" class="doc doc-heading">
            <code>PrefixConfigs</code>


</h3>


    <div class="doc doc-contents ">


        <p>Collection of prefix configurations loaded from YAML.</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/prefix_config.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">PrefixConfigs</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Collection of prefix configurations loaded from YAML.&quot;&quot;&quot;</span>

    <span class="c1"># ClassVars: IGNORED by @dataclass</span>
    <span class="c1"># Enables singleton</span>
    <span class="n">_instance</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;PrefixConfigs&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_prefixes_path</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">prefix_sets</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">PrefixConfig</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PrefixConfigs&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get singleton PrefixConfigs (loads prefixes.yaml via YamlPath if needed).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">of_yaml</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">preload</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">prefixes_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PrefixConfigs&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Preload singleton with specific prefixes path.&quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">of_yaml</span><span class="p">(</span><span class="n">prefixes_path</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_prefixes_path</span> <span class="o">=</span> <span class="n">prefixes_path</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">of_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">yaml_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PrefixConfigs&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load from YAML (uses prefixes.yaml via YamlPath if yaml_path=None).&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">yaml_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">paths</span> <span class="o">=</span> <span class="n">YamlPath</span><span class="o">.</span><span class="n">getPaths</span><span class="p">(</span><span class="s2">&quot;prefixes.yaml&quot;</span><span class="p">)</span>
            <span class="n">yaml_path</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">paths</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">yaml_path</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">yaml_path</span><span class="p">):</span>
            <span class="n">prefix_configs</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">load_from_yaml_file</span><span class="p">(</span><span class="n">yaml_path</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prefix_configs</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>  <span class="c1"># Empty if no file</span>
        <span class="k">return</span> <span class="n">prefix_configs</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        initialize all prefixes and test prefix prefix for all prefix configs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_prefixes</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">prefix_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_sets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">prefix_config</span><span class="o">.</span><span class="n">prefix_prefix</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">prefix_config</span><span class="o">.</span><span class="n">prefix_prefix</span> <span class="o">=</span> <span class="n">key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_prefixes</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">prefix_config</span><span class="o">.</span><span class="n">prefixes</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_selected_declarations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix_set</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get PREFIX declarations for selected prefix sets.</span>

<span class="sd">        Args:</span>
<span class="sd">            prefix_set: List of prefix set names to include</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Combined PREFIX declarations</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">selected_prefixes</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">prefix_set_name</span> <span class="ow">in</span> <span class="n">prefix_set</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prefix_set_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_sets</span><span class="p">:</span>
                <span class="n">prefix_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_sets</span><span class="p">[</span><span class="n">prefix_set_name</span><span class="p">]</span>
                <span class="n">selected_prefixes</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">prefix_config</span><span class="o">.</span><span class="n">prefixes</span><span class="p">)</span>
        <span class="n">declarations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_prefix_declarations</span><span class="p">(</span><span class="n">selected_prefixes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">declarations</span>

    <span class="k">def</span> <span class="nf">get_prefix_declarations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert prefixes to PREFIX declarations.</span>

<span class="sd">        Args:</span>
<span class="sd">            prefixes: Dictionary of prefix mappings, defaults to all_prefixes</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: Newline-separated PREFIX declarations</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">prefixes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prefixes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_prefixes</span>
        <span class="n">prefix_lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">prefix_name</span><span class="p">,</span> <span class="n">prefix_uri</span> <span class="ow">in</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">prefix_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PREFIX </span><span class="si">{</span><span class="n">prefix_name</span><span class="si">}</span><span class="s2">: &lt;</span><span class="si">{</span><span class="n">prefix_uri</span><span class="si">}</span><span class="s2">&gt;&quot;</span><span class="p">)</span>
            <span class="n">declarations</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prefix_lines</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">declarations</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefix_config.PrefixConfigs.__post_init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__post_init__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>initialize all prefixes and test prefix prefix for all prefix configs</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefix_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    initialize all prefixes and test prefix prefix for all prefix configs</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_prefixes</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">prefix_config</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_sets</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">prefix_config</span><span class="o">.</span><span class="n">prefix_prefix</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">prefix_config</span><span class="o">.</span><span class="n">prefix_prefix</span> <span class="o">=</span> <span class="n">key</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_prefixes</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">prefix_config</span><span class="o">.</span><span class="n">prefixes</span><span class="p">)</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefix_config.PrefixConfigs.get_instance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_instance</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get singleton PrefixConfigs (loads prefixes.yaml via YamlPath if needed).</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefix_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PrefixConfigs&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get singleton PrefixConfigs (loads prefixes.yaml via YamlPath if needed).&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">of_yaml</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefix_config.PrefixConfigs.get_prefix_declarations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_prefix_declarations</span><span class="p">(</span><span class="n">prefixes</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Convert prefixes to PREFIX declarations.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>prefixes</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of prefix mappings, defaults to all_prefixes</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Newline-separated PREFIX declarations</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefix_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_prefix_declarations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert prefixes to PREFIX declarations.</span>

<span class="sd">    Args:</span>
<span class="sd">        prefixes: Dictionary of prefix mappings, defaults to all_prefixes</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Newline-separated PREFIX declarations</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">prefixes</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">prefixes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_prefixes</span>
    <span class="n">prefix_lines</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">prefix_name</span><span class="p">,</span> <span class="n">prefix_uri</span> <span class="ow">in</span> <span class="n">prefixes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">prefix_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;PREFIX </span><span class="si">{</span><span class="n">prefix_name</span><span class="si">}</span><span class="s2">: &lt;</span><span class="si">{</span><span class="n">prefix_uri</span><span class="si">}</span><span class="s2">&gt;&quot;</span><span class="p">)</span>
        <span class="n">declarations</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">prefix_lines</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">declarations</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefix_config.PrefixConfigs.get_selected_declarations" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_selected_declarations</span><span class="p">(</span><span class="n">prefix_set</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get PREFIX declarations for selected prefix sets.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>prefix_set</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of prefix set names to include</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Combined PREFIX declarations</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefix_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_selected_declarations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix_set</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get PREFIX declarations for selected prefix sets.</span>

<span class="sd">    Args:</span>
<span class="sd">        prefix_set: List of prefix set names to include</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: Combined PREFIX declarations</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">selected_prefixes</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">prefix_set_name</span> <span class="ow">in</span> <span class="n">prefix_set</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">prefix_set_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_sets</span><span class="p">:</span>
            <span class="n">prefix_config</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_sets</span><span class="p">[</span><span class="n">prefix_set_name</span><span class="p">]</span>
            <span class="n">selected_prefixes</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">prefix_config</span><span class="o">.</span><span class="n">prefixes</span><span class="p">)</span>
    <span class="n">declarations</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_prefix_declarations</span><span class="p">(</span><span class="n">selected_prefixes</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">declarations</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefix_config.PrefixConfigs.of_yaml" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">of_yaml</span><span class="p">(</span><span class="n">yaml_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Load from YAML (uses prefixes.yaml via YamlPath if yaml_path=None).</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefix_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">of_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">yaml_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PrefixConfigs&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load from YAML (uses prefixes.yaml via YamlPath if yaml_path=None).&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">yaml_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="n">YamlPath</span><span class="o">.</span><span class="n">getPaths</span><span class="p">(</span><span class="s2">&quot;prefixes.yaml&quot;</span><span class="p">)</span>
        <span class="n">yaml_path</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">paths</span> <span class="k">else</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">yaml_path</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">yaml_path</span><span class="p">):</span>
        <span class="n">prefix_configs</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">load_from_yaml_file</span><span class="p">(</span><span class="n">yaml_path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">prefix_configs</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">()</span>  <span class="c1"># Empty if no file</span>
    <span class="k">return</span> <span class="n">prefix_configs</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefix_config.PrefixConfigs.preload" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">preload</span><span class="p">(</span><span class="n">prefixes_path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Preload singleton with specific prefixes path.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefix_config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">preload</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">prefixes_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;PrefixConfigs&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Preload singleton with specific prefixes path.&quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">of_yaml</span><span class="p">(</span><span class="n">prefixes_path</span><span class="p">)</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">_prefixes_path</span> <span class="o">=</span> <span class="n">prefixes_path</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.prefixes" class="doc doc-heading">
            <code>prefixes</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2024-03-02</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.prefixes.Prefixes" class="doc doc-heading">
            <code>Prefixes</code>


</h3>


    <div class="doc doc-contents ">


        <p>Handles the generation of standard SPARQL prefix declarations for queries.
This utility class simplifies the inclusion of common prefixes used in SPARQL
queries by providing a method to generate the necessary PREFIX lines based on
a list of prefix keys.</p>
<p>The class supports a wide range of prefixes relevant to Wikidata and general RDF/SPARQL
usage, including RDF, RDFS, Wikibase, Schema.org, and more. It aims to reduce redundancy
and improve clarity in SPARQL query construction by centralizing prefix management.</p>


<p><span class="doc-section-title">Methods:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="getPrefixes(prefixes=['rdf', 'rdfs', 'schema', 'wd', 'wdt', 'wikibase', 'xsd'])

  
      classmethod
   (lodstorage.prefixes.Prefixes.getPrefixes)" href="#lodstorage.prefixes.Prefixes.getPrefixes">getPrefixes</a></code></td>
              <td>
                <div class="doc-md-description">
                  <p>Generates SPARQL PREFIX lines for a given list of prefix keys.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>lodstorage/prefixes.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Prefixes</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Handles the generation of standard SPARQL prefix declarations for queries.</span>
<span class="sd">    This utility class simplifies the inclusion of common prefixes used in SPARQL</span>
<span class="sd">    queries by providing a method to generate the necessary PREFIX lines based on</span>
<span class="sd">    a list of prefix keys.</span>

<span class="sd">    The class supports a wide range of prefixes relevant to Wikidata and general RDF/SPARQL</span>
<span class="sd">    usage, including RDF, RDFS, Wikibase, Schema.org, and more. It aims to reduce redundancy</span>
<span class="sd">    and improve clarity in SPARQL query construction by centralizing prefix management.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        None</span>

<span class="sd">    Methods:</span>
<span class="sd">        getPrefixes(prefixes): Generates SPARQL PREFIX lines for a given list of prefix keys.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># see https://www.wikidata.org/wiki/EntitySchema:E49</span>
    <span class="n">prefixMap</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;bd&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.bigdata.com/rdf#&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cc&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://creativecommons.org/ns#&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dct&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://purl.org/dc/terms/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;geo&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.opengis.net/ont/geosparql#&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mwapi&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;https://www.mediawiki.org/ontology#API/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ontolex&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.w3.org/ns/lemon/ontolex#&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;owl&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.w3.org/2002/07/owl#&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;p&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pq&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/qualifier/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pqn&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/qualifier/value-normalized/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pqv&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/qualifier/value/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pr&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/reference/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;prn&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/reference/value-normalized/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;prov&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.w3.org/ns/prov#&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;prv&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/reference/value/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;ps&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/statement/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;psn&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/statement/value-normalized/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;psv&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/statement/value/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rdf&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;rdfs&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.w3.org/2000/01/rdf-schema#&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;schema&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://schema.org/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;skos&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.w3.org/2004/02/skos/core#&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wd&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/entity/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wdsubgraph&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;https://query.wikidata.org/subgraph/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wdata&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/wiki/Special:EntityData/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wdno&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/novalue/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wdref&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/reference/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wds&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/entity/statement/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wdt&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/direct/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wdtn&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/prop/direct-normalized/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wdv&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.wikidata.org/value/&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;wikibase&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://wikiba.se/ontology#&gt;&quot;</span><span class="p">,</span>
        <span class="s2">&quot;xsd&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;http://www.w3.org/2001/XMLSchema#&gt;&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getPrefixes</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">prefixes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rdf&quot;</span><span class="p">,</span> <span class="s2">&quot;rdfs&quot;</span><span class="p">,</span> <span class="s2">&quot;schema&quot;</span><span class="p">,</span> <span class="s2">&quot;wd&quot;</span><span class="p">,</span> <span class="s2">&quot;wdt&quot;</span><span class="p">,</span> <span class="s2">&quot;wikibase&quot;</span><span class="p">,</span> <span class="s2">&quot;xsd&quot;</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generates SPARQL PREFIX lines for a given list of prefix keys.</span>

<span class="sd">        This method looks up URIs for the specified prefixes from a predefined map and constructs</span>
<span class="sd">        PREFIX lines suitable for inclusion at the beginning of a SPARQL query. It allows for easy</span>
<span class="sd">        and flexible specification of the prefixes needed for a particular query.</span>

<span class="sd">        Args:</span>
<span class="sd">            prefixes (list of str): A list of prefix keys for which PREFIX lines should be generated.</span>
<span class="sd">                Defaults to a common set of prefixes used in Wikidata queries.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: A string containing the SPARQL PREFIX lines for the specified prefixes, each ending</span>
<span class="sd">                with a newline character. If a prefix key is not recognized, it is ignored.</span>

<span class="sd">        Example:</span>
<span class="sd">            &gt;&gt;&gt; Prefixes.getPrefixes([&quot;wd&quot;, &quot;wdt&quot;])</span>
<span class="sd">            &#39;PREFIX wd: &lt;http://www.wikidata.org/entity/&gt;\nPREFIX wdt: &lt;http://www.wikidata.org/prop/direct/&gt;\n&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># see also https://www.wikidata.org/wiki/EntitySchema:E49</span>
        <span class="n">prefixes</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">prefix_string</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">prefixMap</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prefixes</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">prefix_string</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">prefix_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">prefix_keys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">]):</span>
        <span class="n">prefixes</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">prefix_keys</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">prefix_dict</span><span class="p">:</span>
                <span class="n">prefixes</span> <span class="o">+=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">prefix_line</span><span class="p">(</span><span class="n">prefix_dict</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prefixes</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">prefix_line</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">prefix_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;PREFIX </span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">prefix_dict</span><span class="p">[</span><span class="n">prefix</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">line</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">extract_prefixes</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">sparql_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Extract only the explicitly declared prefixes from a SPARQL query string.</span>
<span class="sd">        Simple regex-based extraction that finds PREFIX declarations in the query text.</span>

<span class="sd">        Args:</span>
<span class="sd">            sparql_query (str): The SPARQL query containing PREFIX declarations</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Dictionary mapping prefix names to their URI strings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">declared_prefixes</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># Simple pattern to match PREFIX declarations: PREFIX name: &lt;uri&gt;</span>
        <span class="n">prefix_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;PREFIX\s+(\w+):\s*&lt;([^&gt;]+)&gt;&quot;</span>

        <span class="c1"># Find all PREFIX declarations (case insensitive)</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">prefix_pattern</span><span class="p">,</span> <span class="n">sparql_query</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>

        <span class="c1"># Convert matches to dictionary</span>
        <span class="k">for</span> <span class="n">prefix_name</span><span class="p">,</span> <span class="n">uri</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
            <span class="n">declared_prefixes</span><span class="p">[</span><span class="n">prefix_name</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

        <span class="k">return</span> <span class="n">declared_prefixes</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">merge_prefix_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prefix_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Merge prefixes from dict into SPARQL query by prepending missing prefix declarations.</span>

<span class="sd">        Args:</span>
<span class="sd">            query (str): The SPARQL query</span>
<span class="sd">            prefix_dict (dict): Dictionary of prefixes to merge</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: SPARQL query with missing prefixes prepended</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">existing_prefixes</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">extract_prefixes</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
        <span class="n">missing</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">prefix_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">existing_prefixes</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">prepend</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">prefix_string</span><span class="p">(</span><span class="n">prefix_dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">missing</span><span class="p">))</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">prepend</span> <span class="o">+</span> <span class="n">query</span>

        <span class="k">return</span> <span class="n">query</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">merge_prefixes</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Merge prefixes from string into SPARQL query by prepending missing prefix declarations.</span>

<span class="sd">        Args:</span>
<span class="sd">            query (str): The SPARQL query</span>
<span class="sd">            prefixes (str): String containing PREFIX declarations</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: SPARQL query with missing prefixes prepended</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prefix_dict</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">extract_prefixes</span><span class="p">(</span><span class="n">prefixes</span><span class="p">)</span>
        <span class="n">merged_query</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">merge_prefix_dict</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">prefix_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">merged_query</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefixes.Prefixes.extract_prefixes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">extract_prefixes</span><span class="p">(</span><span class="n">sparql_query</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Extract only the explicitly declared prefixes from a SPARQL query string.
Simple regex-based extraction that finds PREFIX declarations in the query text.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sparql_query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SPARQL query containing PREFIX declarations</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary mapping prefix names to their URI strings</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefixes.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">extract_prefixes</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">sparql_query</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Extract only the explicitly declared prefixes from a SPARQL query string.</span>
<span class="sd">    Simple regex-based extraction that finds PREFIX declarations in the query text.</span>

<span class="sd">    Args:</span>
<span class="sd">        sparql_query (str): The SPARQL query containing PREFIX declarations</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Dictionary mapping prefix names to their URI strings</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">declared_prefixes</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Simple pattern to match PREFIX declarations: PREFIX name: &lt;uri&gt;</span>
    <span class="n">prefix_pattern</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;PREFIX\s+(\w+):\s*&lt;([^&gt;]+)&gt;&quot;</span>

    <span class="c1"># Find all PREFIX declarations (case insensitive)</span>
    <span class="n">matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">prefix_pattern</span><span class="p">,</span> <span class="n">sparql_query</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">)</span>

    <span class="c1"># Convert matches to dictionary</span>
    <span class="k">for</span> <span class="n">prefix_name</span><span class="p">,</span> <span class="n">uri</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">:</span>
        <span class="n">declared_prefixes</span><span class="p">[</span><span class="n">prefix_name</span><span class="p">]</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&lt;</span><span class="si">{</span><span class="n">uri</span><span class="si">}</span><span class="s2">&gt;&quot;</span>

    <span class="k">return</span> <span class="n">declared_prefixes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefixes.Prefixes.getPrefixes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getPrefixes</span><span class="p">(</span><span class="n">prefixes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;rdf&#39;</span><span class="p">,</span> <span class="s1">&#39;rdfs&#39;</span><span class="p">,</span> <span class="s1">&#39;schema&#39;</span><span class="p">,</span> <span class="s1">&#39;wd&#39;</span><span class="p">,</span> <span class="s1">&#39;wdt&#39;</span><span class="p">,</span> <span class="s1">&#39;wikibase&#39;</span><span class="p">,</span> <span class="s1">&#39;xsd&#39;</span><span class="p">])</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Generates SPARQL PREFIX lines for a given list of prefix keys.</p>
<pre><code>    This method looks up URIs for the specified prefixes from a predefined map and constructs
    PREFIX lines suitable for inclusion at the beginning of a SPARQL query. It allows for easy
    and flexible specification of the prefixes needed for a particular query.

    Args:
        prefixes (list of str): A list of prefix keys for which PREFIX lines should be generated.
            Defaults to a common set of prefixes used in Wikidata queries.

    Returns:
        str: A string containing the SPARQL PREFIX lines for the specified prefixes, each ending
            with a newline character. If a prefix key is not recognized, it is ignored.

    Example:
        &gt;&gt;&gt; Prefixes.getPrefixes(["wd", "wdt"])
        'PREFIX wd: &lt;http://www.wikidata.org/entity/&gt;
</code></pre>
<p>PREFIX wdt: <a href="http://www.wikidata.org/prop/direct/">http://www.wikidata.org/prop/direct/</a>
'</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefixes.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">getPrefixes</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">prefixes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;rdf&quot;</span><span class="p">,</span> <span class="s2">&quot;rdfs&quot;</span><span class="p">,</span> <span class="s2">&quot;schema&quot;</span><span class="p">,</span> <span class="s2">&quot;wd&quot;</span><span class="p">,</span> <span class="s2">&quot;wdt&quot;</span><span class="p">,</span> <span class="s2">&quot;wikibase&quot;</span><span class="p">,</span> <span class="s2">&quot;xsd&quot;</span><span class="p">]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates SPARQL PREFIX lines for a given list of prefix keys.</span>

<span class="sd">    This method looks up URIs for the specified prefixes from a predefined map and constructs</span>
<span class="sd">    PREFIX lines suitable for inclusion at the beginning of a SPARQL query. It allows for easy</span>
<span class="sd">    and flexible specification of the prefixes needed for a particular query.</span>

<span class="sd">    Args:</span>
<span class="sd">        prefixes (list of str): A list of prefix keys for which PREFIX lines should be generated.</span>
<span class="sd">            Defaults to a common set of prefixes used in Wikidata queries.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: A string containing the SPARQL PREFIX lines for the specified prefixes, each ending</span>
<span class="sd">            with a newline character. If a prefix key is not recognized, it is ignored.</span>

<span class="sd">    Example:</span>
<span class="sd">        &gt;&gt;&gt; Prefixes.getPrefixes([&quot;wd&quot;, &quot;wdt&quot;])</span>
<span class="sd">        &#39;PREFIX wd: &lt;http://www.wikidata.org/entity/&gt;\nPREFIX wdt: &lt;http://www.wikidata.org/prop/direct/&gt;\n&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># see also https://www.wikidata.org/wiki/EntitySchema:E49</span>
    <span class="n">prefixes</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">prefix_string</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">prefixMap</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">prefixes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefixes.Prefixes.merge_prefix_dict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">merge_prefix_dict</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">prefix_dict</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Merge prefixes from dict into SPARQL query by prepending missing prefix declarations.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SPARQL query</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prefix_dict</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of prefixes to merge</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SPARQL query with missing prefixes prepended</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefixes.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">merge_prefix_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prefix_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Merge prefixes from dict into SPARQL query by prepending missing prefix declarations.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str): The SPARQL query</span>
<span class="sd">        prefix_dict (dict): Dictionary of prefixes to merge</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: SPARQL query with missing prefixes prepended</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">existing_prefixes</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">extract_prefixes</span><span class="p">(</span><span class="n">query</span><span class="p">)</span>
    <span class="n">missing</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">prefix_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="n">existing_prefixes</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">prepend</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">prefix_string</span><span class="p">(</span><span class="n">prefix_dict</span><span class="p">,</span> <span class="nb">list</span><span class="p">(</span><span class="n">missing</span><span class="p">))</span>
    <span class="n">query</span> <span class="o">=</span> <span class="n">prepend</span> <span class="o">+</span> <span class="n">query</span>

    <span class="k">return</span> <span class="n">query</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.prefixes.Prefixes.merge_prefixes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">merge_prefixes</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Merge prefixes from string into SPARQL query by prepending missing prefix declarations.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SPARQL query</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prefixes</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>String containing PREFIX declarations</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SPARQL query with missing prefixes prepended</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/prefixes.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">merge_prefixes</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Merge prefixes from string into SPARQL query by prepending missing prefix declarations.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str): The SPARQL query</span>
<span class="sd">        prefixes (str): String containing PREFIX declarations</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: SPARQL query with missing prefixes prepended</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefix_dict</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">extract_prefixes</span><span class="p">(</span><span class="n">prefixes</span><span class="p">)</span>
    <span class="n">merged_query</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">merge_prefix_dict</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">prefix_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">merged_query</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.profiler" class="doc doc-heading">
            <code>profiler</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2022-11-18</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.profiler.Profiler" class="doc doc-heading">
            <code>Profiler</code>


</h3>


    <div class="doc doc-contents ">


        <p>simple profiler</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/profiler.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Profiler</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    simple profiler</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_start</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        construct me with the given msg and profile active flag</span>

<span class="sd">        Args:</span>
<span class="sd">            msg(str): the message to show if profiling is active</span>
<span class="sd">            profile(bool): True if messages should be shown</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">msg</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>
        <span class="k">if</span> <span class="n">with_start</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        start profiling</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">starttime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extraMsg</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        time the action and print if profile is active</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">starttime</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="si">}{</span><span class="n">extraMsg</span><span class="si">}</span><span class="s2"> took </span><span class="si">{</span><span class="n">elapsed</span><span class="si">:</span><span class="s2">5.1f</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">elapsed</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.profiler.Profiler.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_start</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>construct me with the given msg and profile active flag</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>msg(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the message to show if profiling is active</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>profile(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if messages should be shown</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/profiler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">with_start</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    construct me with the given msg and profile active flag</span>

<span class="sd">    Args:</span>
<span class="sd">        msg(str): the message to show if profiling is active</span>
<span class="sd">        profile(bool): True if messages should be shown</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">msg</span> <span class="o">=</span> <span class="n">msg</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>
    <span class="k">if</span> <span class="n">with_start</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.profiler.Profiler.start" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>start profiling</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/profiler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    start profiling</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">starttime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="si">}</span><span class="s2"> ...&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.profiler.Profiler.time" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">time</span><span class="p">(</span><span class="n">extraMsg</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>time the action and print if profile is active</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/profiler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">extraMsg</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    time the action and print if profile is active</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">starttime</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">msg</span><span class="si">}{</span><span class="n">extraMsg</span><span class="si">}</span><span class="s2"> took </span><span class="si">{</span><span class="n">elapsed</span><span class="si">:</span><span class="s2">5.1f</span><span class="si">}</span><span class="s2"> s&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">elapsed</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.query" class="doc doc-heading">
            <code>query</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2020-08-22</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.query.Endpoint" class="doc doc-heading">
            <code>Endpoint</code>


</h3>


    <div class="doc doc-contents ">


        <p>a query endpoint</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/query.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">Endpoint</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a query endpoint</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Basic identification</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Connection details</span>
    <span class="n">lang</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;SPARQL&quot;</span>
    <span class="n">endpoint</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">website</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">database</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;blazegraph&quot;</span>
    <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;POST&quot;</span>
    <span class="c1"># JDBC endpoints e.g. SQL</span>
    <span class="n">host</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;localhost&quot;</span>
    <span class="n">port</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3306</span>
    <span class="n">charset</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;utf8mb4&quot;</span>

    <span class="c1"># Authentication and rate limiting</span>
    <span class="n">calls_per_minute</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">auth</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">user</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">password</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Prefix handling</span>
    <span class="n">prefix_sets</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># References to prefix set names</span>
    <span class="n">prefixes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Legacy: inline prefixes for backward compatibility</span>

    <span class="c1"># Dataset characteristics</span>
    <span class="n">data_seeded</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="kc">None</span>  <span class="c1"># ISO date when data was initially seeded/imported: &quot;2012-10-29&quot;</span>
    <span class="p">)</span>
    <span class="n">auto_update</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="kc">None</span>  <span class="c1"># if false data_seeded is the most recent state of data</span>
    <span class="p">)</span>
    <span class="n">mtriples</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Dataset size in millions of triples</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getSamples</span><span class="p">():</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;wikidata&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lang&quot;</span><span class="p">:</span> <span class="s2">&quot;sparql&quot;</span><span class="p">,</span>
                <span class="s2">&quot;endpoint&quot;</span><span class="p">:</span> <span class="s2">&quot;https://query.wikidata.org/sparql&quot;</span><span class="p">,</span>
                <span class="s2">&quot;website&quot;</span><span class="p">:</span> <span class="s2">&quot;https://query.wikidata.org/&quot;</span><span class="p">,</span>
                <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;blazegraph&quot;</span><span class="p">,</span>
                <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
                <span class="s2">&quot;calls_per_minute&quot;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                <span class="s2">&quot;prefixes&quot;</span><span class="p">:</span> <span class="s2">&quot;PREFIX bd: &lt;http://www.bigdata.com/rdf#&gt;</span><span class="se">\n</span><span class="s2">PREFIX cc: &lt;http://creativecommons.org/ns#&gt;&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;dbis-jena&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lang&quot;</span><span class="p">:</span> <span class="s2">&quot;sparql&quot;</span><span class="p">,</span>
                <span class="s2">&quot;endpoint&quot;</span><span class="p">:</span> <span class="s2">&quot;https://confident.dbis.rwth-aachen.de/jena/&quot;</span><span class="p">,</span>
                <span class="s2">&quot;website&quot;</span><span class="p">:</span> <span class="s2">&quot;https://confident.dbis.rwth-aachen.de&quot;</span><span class="p">,</span>
                <span class="s2">&quot;auth&quot;</span><span class="p">:</span> <span class="s2">&quot;BASIC&quot;</span><span class="p">,</span>
                <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;secret&quot;</span><span class="p">,</span>
                <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;#not public - example not usable for access#&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="p">{</span>
                <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;qlever-wikidata&quot;</span><span class="p">,</span>
                <span class="s2">&quot;lang&quot;</span><span class="p">:</span> <span class="s2">&quot;sparql&quot;</span><span class="p">,</span>
                <span class="s2">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
                <span class="s2">&quot;database&quot;</span><span class="p">:</span> <span class="s2">&quot;qlever&quot;</span><span class="p">,</span>
                <span class="s2">&quot;endpoint&quot;</span><span class="p">:</span> <span class="s2">&quot;https://qlever.cs.uni-freiburg.de/api/wikidata&quot;</span><span class="p">,</span>
                <span class="s2">&quot;website&quot;</span><span class="p">:</span> <span class="s2">&quot;https://qlever.cs.uni-freiburg.de/wikidata&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="n">samples</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getDefault</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the default endpoint cofiguration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sample_data</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">getSamples</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">endpoint_conf</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">sample_data</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">endpoint_conf</span>

    <span class="k">def</span> <span class="nf">get_prefixes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix_configs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PrefixConfigs</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get prefix declarations for this endpoint.</span>

<span class="sd">        Args:</span>
<span class="sd">            prefix_configs: PrefixConfigs instance to resolve prefix_sets</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: PREFIX declarations</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># default: empty</span>
        <span class="n">prefixes</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># Use inline prefixes if defined (legacy support)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span><span class="p">:</span>
            <span class="n">prefixes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span>

        <span class="c1"># Resolve from prefix_sets if available</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_sets</span> <span class="ow">and</span> <span class="n">prefix_configs</span><span class="p">:</span>
            <span class="n">prefixes</span> <span class="o">=</span> <span class="n">prefix_configs</span><span class="o">.</span><span class="n">get_selected_declarations</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix_sets</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">prefixes</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns:</span>
<span class="sd">            str: a string representation of this Endpoint</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">website</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="k">return</span> <span class="n">text</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Endpoint.__str__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__str__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a string representation of this Endpoint</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: a string representation of this Endpoint</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">website</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">(</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="si">}</span><span class="s2">)&quot;</span>
    <span class="k">return</span> <span class="n">text</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Endpoint.getDefault" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getDefault</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>get the default endpoint cofiguration</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">getDefault</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the default endpoint cofiguration</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sample_data</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">getSamples</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">endpoint_conf</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">sample_data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">endpoint_conf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Endpoint.get_prefixes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_prefixes</span><span class="p">(</span><span class="n">prefix_configs</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get prefix declarations for this endpoint.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>prefix_configs</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="PrefixConfigs (lodstorage.prefix_config.PrefixConfigs)" href="#lodstorage.prefix_config.PrefixConfigs">PrefixConfigs</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>PrefixConfigs instance to resolve prefix_sets</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>PREFIX declarations</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_prefixes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix_configs</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PrefixConfigs</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get prefix declarations for this endpoint.</span>

<span class="sd">    Args:</span>
<span class="sd">        prefix_configs: PrefixConfigs instance to resolve prefix_sets</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: PREFIX declarations</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># default: empty</span>
    <span class="n">prefixes</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="c1"># Use inline prefixes if defined (legacy support)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span><span class="p">:</span>
        <span class="n">prefixes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span>

    <span class="c1"># Resolve from prefix_sets if available</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix_sets</span> <span class="ow">and</span> <span class="n">prefix_configs</span><span class="p">:</span>
        <span class="n">prefixes</span> <span class="o">=</span> <span class="n">prefix_configs</span><span class="o">.</span><span class="n">get_selected_declarations</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix_sets</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">prefixes</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.query.EndpointManager" class="doc doc-heading">
            <code>EndpointManager</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>manages a set of SPARQL endpoints</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/query.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">EndpointManager</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    manages a set of SPARQL endpoints</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">endpoints</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Endpoint</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">ofYaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">yaml_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;EndpointManager&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load prefix configurations from YAML file.&quot;&quot;&quot;</span>
        <span class="n">em</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">load_from_yaml_file</span><span class="p">(</span><span class="n">yaml_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">em</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getEndpoints</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">endpointPath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">lang</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the endpoints for the given endpointPath</span>

<span class="sd">        Args:</span>
<span class="sd">            endpointPath(str): the path to the yaml file with the endpoint configurations</span>
<span class="sd">            lang(str): if lang is given filter by the given language</span>
<span class="sd">            with_default(bool): if True include the default endpoints</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpointPaths</span> <span class="o">=</span> <span class="n">YamlPath</span><span class="o">.</span><span class="n">getPaths</span><span class="p">(</span>
            <span class="s2">&quot;endpoints.yaml&quot;</span><span class="p">,</span> <span class="n">endpointPath</span><span class="p">,</span> <span class="n">with_default</span><span class="o">=</span><span class="n">with_default</span>
        <span class="p">)</span>
        <span class="n">endpoints</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">lEndpointPath</span> <span class="ow">in</span> <span class="n">endpointPaths</span><span class="p">:</span>
            <span class="n">em</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ofYaml</span><span class="p">(</span><span class="n">lEndpointPath</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">endpoint</span> <span class="ow">in</span> <span class="n">em</span><span class="o">.</span><span class="n">endpoints</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">selected</span> <span class="o">=</span> <span class="n">lang</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">lang</span> <span class="o">==</span> <span class="n">lang</span>
                <span class="k">if</span> <span class="n">selected</span><span class="p">:</span>
                    <span class="n">endpoints</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">endpoint</span>
                    <span class="n">endpoint</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">return</span> <span class="n">endpoints</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getEndpointNames</span><span class="p">(</span><span class="n">endpointPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lang</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a list of all available endpoint names</span>
<span class="sd">        Args:</span>
<span class="sd">            endpointPath(str): the path to the yaml file with the endpoint configurations</span>
<span class="sd">            lang(str): if lang is given filter by the given language</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">endpoints</span> <span class="o">=</span> <span class="n">EndpointManager</span><span class="o">.</span><span class="n">getEndpoints</span><span class="p">(</span><span class="n">endpointPath</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span>
        <span class="n">endpoint_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">endpoints</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">endpoint_names</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.EndpointManager.getEndpointNames" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getEndpointNames</span><span class="p">(</span><span class="n">endpointPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Returns a list of all available endpoint names
Args:
    endpointPath(str): the path to the yaml file with the endpoint configurations
    lang(str): if lang is given filter by the given language</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getEndpointNames</span><span class="p">(</span><span class="n">endpointPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lang</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a list of all available endpoint names</span>
<span class="sd">    Args:</span>
<span class="sd">        endpointPath(str): the path to the yaml file with the endpoint configurations</span>
<span class="sd">        lang(str): if lang is given filter by the given language</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="n">EndpointManager</span><span class="o">.</span><span class="n">getEndpoints</span><span class="p">(</span><span class="n">endpointPath</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span>
    <span class="n">endpoint_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">endpoints</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">endpoint_names</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.EndpointManager.getEndpoints" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getEndpoints</span><span class="p">(</span><span class="n">endpointPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>get the endpoints for the given endpointPath</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>endpointPath(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path to the yaml file with the endpoint configurations</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lang(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if lang is given filter by the given language</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>with_default(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True include the default endpoints</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">getEndpoints</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">endpointPath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">lang</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the endpoints for the given endpointPath</span>

<span class="sd">    Args:</span>
<span class="sd">        endpointPath(str): the path to the yaml file with the endpoint configurations</span>
<span class="sd">        lang(str): if lang is given filter by the given language</span>
<span class="sd">        with_default(bool): if True include the default endpoints</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">endpointPaths</span> <span class="o">=</span> <span class="n">YamlPath</span><span class="o">.</span><span class="n">getPaths</span><span class="p">(</span>
        <span class="s2">&quot;endpoints.yaml&quot;</span><span class="p">,</span> <span class="n">endpointPath</span><span class="p">,</span> <span class="n">with_default</span><span class="o">=</span><span class="n">with_default</span>
    <span class="p">)</span>
    <span class="n">endpoints</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">lEndpointPath</span> <span class="ow">in</span> <span class="n">endpointPaths</span><span class="p">:</span>
        <span class="n">em</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">ofYaml</span><span class="p">(</span><span class="n">lEndpointPath</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">endpoint</span> <span class="ow">in</span> <span class="n">em</span><span class="o">.</span><span class="n">endpoints</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">selected</span> <span class="o">=</span> <span class="n">lang</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">lang</span> <span class="o">==</span> <span class="n">lang</span>
            <span class="k">if</span> <span class="n">selected</span><span class="p">:</span>
                <span class="n">endpoints</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">endpoint</span>
                <span class="n">endpoint</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="k">return</span> <span class="n">endpoints</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.EndpointManager.ofYaml" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ofYaml</span><span class="p">(</span><span class="n">yaml_path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Load prefix configurations from YAML file.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">ofYaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">yaml_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;EndpointManager&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load prefix configurations from YAML file.&quot;&quot;&quot;</span>
    <span class="n">em</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">load_from_yaml_file</span><span class="p">(</span><span class="n">yaml_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">em</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.query.Format" class="doc doc-heading">
            <code>Format</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>the supported formats for the results to be delivered</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/query.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Format</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    the supported formats for the results to be delivered</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">csv</span> <span class="o">=</span> <span class="s2">&quot;csv&quot;</span>
    <span class="n">json</span> <span class="o">=</span> <span class="s2">&quot;json&quot;</span>
    <span class="n">html</span> <span class="o">=</span> <span class="s2">&quot;html&quot;</span>
    <span class="n">xml</span> <span class="o">=</span> <span class="s2">&quot;xml&quot;</span>
    <span class="n">tsv</span> <span class="o">=</span> <span class="s2">&quot;tsv&quot;</span>
    <span class="n">latex</span> <span class="o">=</span> <span class="s2">&quot;latex&quot;</span>
    <span class="n">mediawiki</span> <span class="o">=</span> <span class="s2">&quot;mediawiki&quot;</span>
    <span class="n">raw</span> <span class="o">=</span> <span class="s2">&quot;raw&quot;</span>
    <span class="n">github</span> <span class="o">=</span> <span class="s2">&quot;github&quot;</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.query.Query" class="doc doc-heading">
            <code>Query</code>


</h3>


    <div class="doc doc-contents ">


        <p>A Query e.g. for SPARQL</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.name">name</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name/label of the query</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.query">query</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the native Query text e.g. in SPARQL</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.lang">lang</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the language of the query e.g. SPARQL</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.sparql(str)">sparql(str)</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SPARQL querycode</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.sql(str)">sql(str)</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SQL query code</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.ask(atr)">ask(atr)</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SMW ASK query code</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.endpoint">endpoint</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the endpoint url to use</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.database">database</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the type of database e.g. "blazegraph"</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.title">title</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the header/title of the query</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.description">description</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the description of the query</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.limit">limit</span></code></td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the limit of the query</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.prefixes">prefixes</span></code></td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of prefixes to be resolved</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.tryItUrl">tryItUrl</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the url of a "tryit" webpage</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.short_urls">short_urls</span></code></td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary of short urls keyed by endpoint name</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.formats">formats</span></code></td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>key,value pairs of ValueFormatters to be applied</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.query.Query.debug">debug</span></code></td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>true if debug mode should be switched on</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>lodstorage/query.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">Query</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Query e.g. for SPARQL</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): the name/label of the query</span>
<span class="sd">        query (str): the native Query text e.g. in SPARQL</span>
<span class="sd">        lang (str): the language of the query e.g. SPARQL</span>

<span class="sd">        sparql(str): SPARQL querycode</span>
<span class="sd">        sql(str): SQL query code</span>
<span class="sd">        ask(atr): SMW ASK query code</span>

<span class="sd">        endpoint (str): the endpoint url to use</span>
<span class="sd">        database (str): the type of database e.g. &quot;blazegraph&quot;</span>
<span class="sd">        title (str): the header/title of the query</span>
<span class="sd">        description (str): the description of the query</span>
<span class="sd">        limit (int): the limit of the query</span>
<span class="sd">        prefixes (list): list of prefixes to be resolved</span>
<span class="sd">        tryItUrl (str): the url of a &quot;tryit&quot; webpage</span>
<span class="sd">        short_urls (dict): dictionary of short urls keyed by endpoint name</span>
<span class="sd">        formats (list): key,value pairs of ValueFormatters to be applied</span>
<span class="sd">        debug (bool): true if debug mode should be switched on</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">lang</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;sparql&quot;</span>
    <span class="n">sparql</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">sql</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">ask</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">endpoint</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">database</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;blazegraph&quot;</span>
    <span class="n">title</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">prefixes</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">tryItUrl</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">short_urls</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>
    <span class="n">formats</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">formatCallBacks</span><span class="p">:</span> <span class="n">List</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">param_list</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Param</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>  <span class="c1"># input</span>
    <span class="n">output</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Param</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>  <span class="c1"># output</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">Params</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">queryStr</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">queryStr</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">set_default_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set the default parameters for the given params_dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_list</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">default_value</span>
            <span class="n">params_dict</span><span class="p">[</span><span class="n">param</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">apply_default_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        apply my default parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_default_params</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">params_dict</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">apply_parameters</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">addFormatCallBack</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callback</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formatCallBacks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">preFormatWithCallBacks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        run the configured call backs to pre-format the given list of dicts for the given tableformat</span>

<span class="sd">        Args:</span>
<span class="sd">            lod(list): the list of dicts to handle</span>
<span class="sd">            tablefmt(str): the table format (according to tabulate) to apply</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">formatCallBack</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatCallBacks</span><span class="p">:</span>
                        <span class="n">formatCallBack</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">formatWithValueFormatters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        format the given list of Dicts with the ValueFormatters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># is there anything to do?</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># no</span>
            <span class="k">return</span>
        <span class="c1"># get the value Formatters that might apply here</span>
        <span class="n">valueFormatters</span> <span class="o">=</span> <span class="n">ValueFormatters</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
        <span class="n">formatsToApply</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">valueFormatSpec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">formats</span><span class="p">:</span>
            <span class="n">parts</span> <span class="o">=</span> <span class="n">valueFormatSpec</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
            <span class="c1"># e.g. president:wikidata</span>
            <span class="n">keytoformat</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">formatName</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">formatName</span> <span class="ow">in</span> <span class="n">valueFormatters</span><span class="o">.</span><span class="n">formatters</span><span class="p">:</span>
                <span class="n">formatsToApply</span><span class="p">[</span><span class="n">keytoformat</span><span class="p">]</span> <span class="o">=</span> <span class="n">valueFormatters</span><span class="o">.</span><span class="n">formatters</span><span class="p">[</span><span class="n">formatName</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">keytoformat</span> <span class="ow">in</span> <span class="n">formatsToApply</span><span class="p">:</span>
                <span class="n">valueFormatter</span> <span class="o">=</span> <span class="n">formatsToApply</span><span class="p">[</span><span class="n">keytoformat</span><span class="p">]</span>
                <span class="c1"># format all key values</span>
                <span class="k">if</span> <span class="n">keytoformat</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                        <span class="n">valueFormatter</span><span class="o">.</span><span class="n">apply_format</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span>
                <span class="c1"># or just a selected one</span>
                <span class="k">elif</span> <span class="n">keytoformat</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                    <span class="n">valueFormatter</span><span class="o">.</span><span class="n">apply_format</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">keytoformat</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getTryItUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">baseurl</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">database</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;blazegraph&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the &quot;try it!&quot; url for the given baseurl</span>

<span class="sd">        Args:</span>
<span class="sd">            baseurl(str): the baseurl to used</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the &quot;try it!&quot; url for the given query</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># https://stackoverflow.com/a/9345102/1497139</span>
        <span class="n">prefixed_query</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span><span class="p">:</span>
            <span class="n">prepend</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span><span class="p">)</span>
            <span class="n">prefixed_query</span> <span class="o">=</span> <span class="n">prepend</span> <span class="o">+</span> <span class="n">prefixed_query</span>
        <span class="n">quoted</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">prefixed_query</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">database</span> <span class="o">==</span> <span class="s2">&quot;blazegraph&quot;</span><span class="p">:</span>
            <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;/#&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;?query=&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">baseurl</span><span class="si">}{</span><span class="n">delim</span><span class="si">}{</span><span class="n">quoted</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">url</span>

    <span class="k">def</span> <span class="nf">getLink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert the given url and title to a link for the given tablefmt</span>

<span class="sd">        Args:</span>
<span class="sd">            url(str): the url to convert</span>
<span class="sd">            title(str): the title to show</span>
<span class="sd">            tablefmt(str): the table format to use</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create a safe url</span>
        <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;&quot;</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;mediawiki&quot;</span><span class="p">:</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">]&quot;</span>
        <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;github&quot;</span><span class="p">:</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">](</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\href{</span><span class="si">%s</span><span class="s2">}{</span><span class="si">%s</span><span class="s2">}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">markup</span>

    <span class="k">def</span> <span class="nf">add_endpoint_prefixes</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="s2">&quot;Endpoint&quot;</span><span class="p">,</span> <span class="n">prefix_configs</span><span class="p">:</span> <span class="n">PrefixConfigs</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add endpoint-specific PREFIX declarations to this query (via prefix_sets or legacy prefixes).</span>

<span class="sd">        Merges (deduplicates by prefix name) endpoint prefixes into self.query using Prefixes.merge_prefixes().</span>
<span class="sd">        Updates self.prefixes to full unique PREFIX lines list. Safe/idempotent (no-op if prefixes_str empty).</span>

<span class="sd">        Args:</span>
<span class="sd">            endpoint (Endpoint): Endpoint config with prefix_sets or legacy prefixes.</span>
<span class="sd">            prefix_configs (PrefixConfigs): Loaded prefix configurations resolver.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prefixes_str</span> <span class="o">=</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">get_prefixes</span><span class="p">(</span><span class="n">prefix_configs</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">prefixes_str</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="c1"># Merge: Prepend ONLY missing prefixes (no dups like &#39;rdfs&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">Prefixes</span><span class="o">.</span><span class="n">merge_prefixes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">prefixes_str</span><span class="p">)</span>

        <span class="c1"># Update self.prefixes: Full unique lines from merged query</span>
        <span class="n">prefix_dict</span> <span class="o">=</span> <span class="n">Prefixes</span><span class="o">.</span><span class="n">extract_prefixes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">Prefixes</span><span class="o">.</span><span class="n">prefix_line</span><span class="p">(</span><span class="n">prefix_dict</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span> <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">prefix_dict</span><span class="p">)</span>
        <span class="p">]</span>

    <span class="k">def</span> <span class="nf">prefixToLink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert url prefixes to link according to the given table format</span>
<span class="sd">        TODO - refactor as preFormat callback</span>

<span class="sd">        Args:</span>
<span class="sd">            lod(list): the list of dicts to convert</span>
<span class="sd">            prefix(str): the prefix to strip</span>
<span class="sd">            tablefmt(str): the tabulate tableformat to use</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                    <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
                <span class="p">):</span>
                    <span class="n">item</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                    <span class="n">uqitem</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">unquote</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
                        <span class="n">link</span> <span class="o">=</span> <span class="n">uqitem</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLink</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">uqitem</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span>
                    <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">link</span>

    <span class="k">def</span> <span class="nf">asWikiSourceMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert me to Mediawiki markup for syntax highlighting using the &quot;source&quot; tag</span>


<span class="sd">        Returns:</span>
<span class="sd">            string: the Markup</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="s2">&quot;&lt;source lang=&#39;</span><span class="si">%s</span><span class="s2">&#39;&gt;</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&lt;/source&gt;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">markup</span>

    <span class="k">def</span> <span class="nf">asWikiMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listOfDicts</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert the given listOfDicts result to MediaWiki markup</span>

<span class="sd">        Args:</span>
<span class="sd">            listOfDicts(list): the list of Dicts to convert to MediaWiki markup</span>

<span class="sd">        Returns:</span>
<span class="sd">            string: the markup</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>
        <span class="n">mwTable</span> <span class="o">=</span> <span class="n">MediaWikiTable</span><span class="p">()</span>
        <span class="n">mwTable</span><span class="o">.</span><span class="n">fromListOfDicts</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="n">mwTable</span><span class="o">.</span><span class="n">asWikiMarkup</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">markup</span>

    <span class="k">def</span> <span class="nf">documentQueryResult</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">qlod</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mediawiki&quot;</span><span class="p">,</span>
        <span class="n">tryItUrl</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">withSourceCode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwArgs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        document the given query results - note that a copy of the whole list is going to be created for being able to format</span>

<span class="sd">        Args:</span>
<span class="sd">            qlod: the list of dicts result</span>
<span class="sd">            limit(int): the maximum number of records to display in result tabulate</span>
<span class="sd">            tablefmt(str): the table format to use</span>
<span class="sd">            tryItUrl: the &quot;try it!&quot; url to show</span>
<span class="sd">            withSourceCode(bool): if True document the source code</span>

<span class="sd">        Return:</span>
<span class="sd">            str: the documentation tabular text for the given parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sourceCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span>
        <span class="n">tryItMarkup</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">resultHeader</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lod</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">qlod</span><span class="p">[:</span><span class="n">limit</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lod</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">qlod</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preFormatWithCallBacks</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formatWithValueFormatters</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">tabulate</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="s2">&quot;keys&quot;</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">,</span> <span class="o">**</span><span class="n">kwArgs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tryItUrl</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;tryItUrl&quot;</span><span class="p">):</span>
            <span class="n">tryItUrl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tryItUrl</span>
        <span class="k">if</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;github&quot;</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">resultHeader</span> <span class="o">=</span> <span class="s2">&quot;## result&quot;</span>
        <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;mediawiki&quot;</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;== </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2"> ==&quot;</span>
            <span class="n">resultHeader</span> <span class="o">=</span> <span class="s2">&quot;=== result ===&quot;</span>
        <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
            <span class="n">resultHeader</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">result</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;&quot;&quot;\begin</span><span class="si">{table}</span>
<span class="s2">            \caption{</span><span class="si">%s</span><span class="s2">}</span>
<span class="s2">            \label{tab:</span><span class="si">%s</span><span class="s2">}</span>
<span class="s2">            </span><span class="si">%s</span>
<span class="s2">            \end</span><span class="si">{table}</span>
<span class="s2">            &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">result</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">resultHeader</span> <span class="o">=</span> <span class="s2">&quot;result:&quot;</span>
        <span class="k">if</span> <span class="n">withSourceCode</span><span class="p">:</span>
            <span class="n">tryItUrlEncoded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTryItUrl</span><span class="p">(</span><span class="n">tryItUrl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">)</span>
            <span class="n">tryItMarkup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLink</span><span class="p">(</span><span class="n">tryItUrlEncoded</span><span class="p">,</span> <span class="s2">&quot;try it!&quot;</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;github&quot;</span><span class="p">:</span>
                <span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="s2">&quot;### query&quot;</span>
                <span class="n">sourceCode</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;```</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="si">}</span>
<span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="si">}</span>
<span class="s2">```&quot;&quot;&quot;</span>
            <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;mediawiki&quot;</span><span class="p">:</span>
                <span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="s2">&quot;=== query ===&quot;</span>
                <span class="n">sourceCode</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;source lang=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="si">}</span><span class="s2">&#39;&gt;</span>
<span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="si">}</span>
<span class="s2">&lt;/source&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>
            <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
                <span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">r</span><span class="s2">&quot;see query listing \ref{listing:</span><span class="si">%s</span><span class="s2">} and result table \ref{tab:</span><span class="si">%s</span><span class="s2">}&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">sourceCode</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;&quot;&quot;\begin</span><span class="si">{listing}</span><span class="s2">[ht]</span>
<span class="s2">\caption{</span><span class="si">%s</span><span class="s2">}</span>
<span class="s2">\label{listing:</span><span class="si">%s</span><span class="s2">}</span>
<span class="s2">\begin</span><span class="si">{minted}</span><span class="s2">{</span><span class="si">%s</span><span class="s2">}</span>
<span class="si">%s</span>
<span class="s2">\end</span><span class="si">{minted}</span>
<span class="si">%s</span>
<span class="s2">\end</span><span class="si">{listing}</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span>
                    <span class="n">tryItMarkup</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="s2">&quot;query:&quot;</span>
                <span class="n">sourceCode</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="o">!=</span> <span class="s2">&quot;sparql&quot;</span><span class="p">:</span>
            <span class="n">tryItMarkup</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">queryResultDocumentation</span> <span class="o">=</span> <span class="n">QueryResultDocumentation</span><span class="p">(</span>
            <span class="n">query</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">,</span>
            <span class="n">tryItMarkup</span><span class="o">=</span><span class="n">tryItMarkup</span><span class="p">,</span>
            <span class="n">sourceCodeHeader</span><span class="o">=</span><span class="n">sourceCodeHeader</span><span class="p">,</span>
            <span class="n">sourceCode</span><span class="o">=</span><span class="n">sourceCode</span><span class="p">,</span>
            <span class="n">resultHeader</span><span class="o">=</span><span class="n">resultHeader</span><span class="p">,</span>
            <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">queryResultDocumentation</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Query.add_endpoint_prefixes" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_endpoint_prefixes</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">prefix_configs</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Add endpoint-specific PREFIX declarations to this query (via prefix_sets or legacy prefixes).</p>
<p>Merges (deduplicates by prefix name) endpoint prefixes into self.query using Prefixes.merge_prefixes().
Updates self.prefixes to full unique PREFIX lines list. Safe/idempotent (no-op if prefixes_str empty).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>endpoint</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Endpoint (lodstorage.query.Endpoint)" href="#lodstorage.query.Endpoint">Endpoint</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Endpoint config with prefix_sets or legacy prefixes.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prefix_configs</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="PrefixConfigs (lodstorage.prefix_config.PrefixConfigs)" href="#lodstorage.prefix_config.PrefixConfigs">PrefixConfigs</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Loaded prefix configurations resolver.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">add_endpoint_prefixes</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">:</span> <span class="s2">&quot;Endpoint&quot;</span><span class="p">,</span> <span class="n">prefix_configs</span><span class="p">:</span> <span class="n">PrefixConfigs</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add endpoint-specific PREFIX declarations to this query (via prefix_sets or legacy prefixes).</span>

<span class="sd">    Merges (deduplicates by prefix name) endpoint prefixes into self.query using Prefixes.merge_prefixes().</span>
<span class="sd">    Updates self.prefixes to full unique PREFIX lines list. Safe/idempotent (no-op if prefixes_str empty).</span>

<span class="sd">    Args:</span>
<span class="sd">        endpoint (Endpoint): Endpoint config with prefix_sets or legacy prefixes.</span>
<span class="sd">        prefix_configs (PrefixConfigs): Loaded prefix configurations resolver.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prefixes_str</span> <span class="o">=</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">get_prefixes</span><span class="p">(</span><span class="n">prefix_configs</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">prefixes_str</span><span class="o">.</span><span class="n">strip</span><span class="p">():</span>
        <span class="k">return</span>

    <span class="c1"># Merge: Prepend ONLY missing prefixes (no dups like &#39;rdfs&#39;)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">Prefixes</span><span class="o">.</span><span class="n">merge_prefixes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="n">prefixes_str</span><span class="p">)</span>

    <span class="c1"># Update self.prefixes: Full unique lines from merged query</span>
    <span class="n">prefix_dict</span> <span class="o">=</span> <span class="n">Prefixes</span><span class="o">.</span><span class="n">extract_prefixes</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">Prefixes</span><span class="o">.</span><span class="n">prefix_line</span><span class="p">(</span><span class="n">prefix_dict</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span> <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">prefix_dict</span><span class="p">)</span>
    <span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Query.apply_default_params" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">apply_default_params</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>apply my default parameters</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">apply_default_params</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    apply my default parameters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_default_params</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">params_dict</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">params</span><span class="o">.</span><span class="n">apply_parameters</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Query.asWikiMarkup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">asWikiMarkup</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>convert the given listOfDicts result to MediaWiki markup</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>listOfDicts(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of Dicts to convert to MediaWiki markup</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>string</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the markup</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">asWikiMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listOfDicts</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert the given listOfDicts result to MediaWiki markup</span>

<span class="sd">    Args:</span>
<span class="sd">        listOfDicts(list): the list of Dicts to convert to MediaWiki markup</span>

<span class="sd">    Returns:</span>
<span class="sd">        string: the markup</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>
    <span class="n">mwTable</span> <span class="o">=</span> <span class="n">MediaWikiTable</span><span class="p">()</span>
    <span class="n">mwTable</span><span class="o">.</span><span class="n">fromListOfDicts</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>
    <span class="n">markup</span> <span class="o">=</span> <span class="n">mwTable</span><span class="o">.</span><span class="n">asWikiMarkup</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">markup</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Query.asWikiSourceMarkup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">asWikiSourceMarkup</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>convert me to Mediawiki markup for syntax highlighting using the "source" tag</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>string</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the Markup</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">asWikiSourceMarkup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert me to Mediawiki markup for syntax highlighting using the &quot;source&quot; tag</span>


<span class="sd">    Returns:</span>
<span class="sd">        string: the Markup</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">markup</span> <span class="o">=</span> <span class="s2">&quot;&lt;source lang=&#39;</span><span class="si">%s</span><span class="s2">&#39;&gt;</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&lt;/source&gt;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">markup</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Query.documentQueryResult" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">documentQueryResult</span><span class="p">(</span><span class="n">qlod</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s1">&#39;mediawiki&#39;</span><span class="p">,</span> <span class="n">tryItUrl</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">withSourceCode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwArgs</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>document the given query results - note that a copy of the whole list is going to be created for being able to format</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>qlod</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of dicts result</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>limit(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the maximum number of records to display in result tabulate</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tablefmt(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the table format to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tryItUrl</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the "try it!" url to show</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withSourceCode(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True document the source code</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="return" open>
  <summary>Return</summary>
  <p>str: the documentation tabular text for the given parameters</p>
</details>

            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span></pre></div></td><td class="code"><div><pre><span></span><code>    <span class="k">def</span> <span class="nf">documentQueryResult</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">qlod</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
        <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;mediawiki&quot;</span><span class="p">,</span>
        <span class="n">tryItUrl</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">withSourceCode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwArgs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        document the given query results - note that a copy of the whole list is going to be created for being able to format</span>

<span class="sd">        Args:</span>
<span class="sd">            qlod: the list of dicts result</span>
<span class="sd">            limit(int): the maximum number of records to display in result tabulate</span>
<span class="sd">            tablefmt(str): the table format to use</span>
<span class="sd">            tryItUrl: the &quot;try it!&quot; url to show</span>
<span class="sd">            withSourceCode(bool): if True document the source code</span>

<span class="sd">        Return:</span>
<span class="sd">            str: the documentation tabular text for the given parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sourceCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span>
        <span class="n">tryItMarkup</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">resultHeader</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lod</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">qlod</span><span class="p">[:</span><span class="n">limit</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lod</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">qlod</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preFormatWithCallBacks</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formatWithValueFormatters</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">tabulate</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="s2">&quot;keys&quot;</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">,</span> <span class="o">**</span><span class="n">kwArgs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tryItUrl</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;tryItUrl&quot;</span><span class="p">):</span>
            <span class="n">tryItUrl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tryItUrl</span>
        <span class="k">if</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;github&quot;</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;## </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">resultHeader</span> <span class="o">=</span> <span class="s2">&quot;## result&quot;</span>
        <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;mediawiki&quot;</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;== </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2"> ==&quot;</span>
            <span class="n">resultHeader</span> <span class="o">=</span> <span class="s2">&quot;=== result ===&quot;</span>
        <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
            <span class="n">resultHeader</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">result</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;&quot;&quot;\begin</span><span class="si">{table}</span>
<span class="s2">            \caption{</span><span class="si">%s</span><span class="s2">}</span>
<span class="s2">            \label{tab:</span><span class="si">%s</span><span class="s2">}</span>
<span class="s2">            </span><span class="si">%s</span>
<span class="s2">            \end</span><span class="si">{table}</span>
<span class="s2">            &quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                <span class="n">result</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">resultHeader</span> <span class="o">=</span> <span class="s2">&quot;result:&quot;</span>
        <span class="k">if</span> <span class="n">withSourceCode</span><span class="p">:</span>
            <span class="n">tryItUrlEncoded</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTryItUrl</span><span class="p">(</span><span class="n">tryItUrl</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">database</span><span class="p">)</span>
            <span class="n">tryItMarkup</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLink</span><span class="p">(</span><span class="n">tryItUrlEncoded</span><span class="p">,</span> <span class="s2">&quot;try it!&quot;</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;github&quot;</span><span class="p">:</span>
                <span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="s2">&quot;### query&quot;</span>
                <span class="n">sourceCode</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;```</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="si">}</span>
<span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="si">}</span>
<span class="s2">```&quot;&quot;&quot;</span>
            <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;mediawiki&quot;</span><span class="p">:</span>
                <span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="s2">&quot;=== query ===&quot;</span>
                <span class="n">sourceCode</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;source lang=&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="si">}</span><span class="s2">&#39;&gt;</span>
<span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="si">}</span>
<span class="s2">&lt;/source&gt;</span>
<span class="s2">&quot;&quot;&quot;</span>
            <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
                <span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="sa">r</span><span class="s2">&quot;see query listing \ref{listing:</span><span class="si">%s</span><span class="s2">} and result table \ref{tab:</span><span class="si">%s</span><span class="s2">}&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">sourceCode</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;&quot;&quot;\begin</span><span class="si">{listing}</span><span class="s2">[ht]</span>
<span class="s2">\caption{</span><span class="si">%s</span><span class="s2">}</span>
<span class="s2">\label{listing:</span><span class="si">%s</span><span class="s2">}</span>
<span class="s2">\begin</span><span class="si">{minted}</span><span class="s2">{</span><span class="si">%s</span><span class="s2">}</span>
<span class="si">%s</span>
<span class="s2">\end</span><span class="si">{minted}</span>
<span class="si">%s</span>
<span class="s2">\end</span><span class="si">{listing}</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span>
                    <span class="n">tryItMarkup</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="s2">&quot;query:&quot;</span>
                <span class="n">sourceCode</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="o">!=</span> <span class="s2">&quot;sparql&quot;</span><span class="p">:</span>
            <span class="n">tryItMarkup</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">queryResultDocumentation</span> <span class="o">=</span> <span class="n">QueryResultDocumentation</span><span class="p">(</span>
            <span class="n">query</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">,</span>
            <span class="n">tryItMarkup</span><span class="o">=</span><span class="n">tryItMarkup</span><span class="p">,</span>
            <span class="n">sourceCodeHeader</span><span class="o">=</span><span class="n">sourceCodeHeader</span><span class="p">,</span>
            <span class="n">sourceCode</span><span class="o">=</span><span class="n">sourceCode</span><span class="p">,</span>
            <span class="n">resultHeader</span><span class="o">=</span><span class="n">resultHeader</span><span class="p">,</span>
            <span class="n">result</span><span class="o">=</span><span class="n">result</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">queryResultDocumentation</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Query.formatWithValueFormatters" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">formatWithValueFormatters</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>format the given list of Dicts with the ValueFormatters</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">formatWithValueFormatters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    format the given list of Dicts with the ValueFormatters</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># is there anything to do?</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># no</span>
        <span class="k">return</span>
    <span class="c1"># get the value Formatters that might apply here</span>
    <span class="n">valueFormatters</span> <span class="o">=</span> <span class="n">ValueFormatters</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
    <span class="n">formatsToApply</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">valueFormatSpec</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">formats</span><span class="p">:</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">valueFormatSpec</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
        <span class="c1"># e.g. president:wikidata</span>
        <span class="n">keytoformat</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">formatName</span> <span class="o">=</span> <span class="n">parts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">formatName</span> <span class="ow">in</span> <span class="n">valueFormatters</span><span class="o">.</span><span class="n">formatters</span><span class="p">:</span>
            <span class="n">formatsToApply</span><span class="p">[</span><span class="n">keytoformat</span><span class="p">]</span> <span class="o">=</span> <span class="n">valueFormatters</span><span class="o">.</span><span class="n">formatters</span><span class="p">[</span><span class="n">formatName</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">keytoformat</span> <span class="ow">in</span> <span class="n">formatsToApply</span><span class="p">:</span>
            <span class="n">valueFormatter</span> <span class="o">=</span> <span class="n">formatsToApply</span><span class="p">[</span><span class="n">keytoformat</span><span class="p">]</span>
            <span class="c1"># format all key values</span>
            <span class="k">if</span> <span class="n">keytoformat</span> <span class="o">==</span> <span class="s2">&quot;*&quot;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                    <span class="n">valueFormatter</span><span class="o">.</span><span class="n">apply_format</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span>
            <span class="c1"># or just a selected one</span>
            <span class="k">elif</span> <span class="n">keytoformat</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                <span class="n">valueFormatter</span><span class="o">.</span><span class="n">apply_format</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">keytoformat</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Query.getLink" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getLink</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>convert the given url and title to a link for the given tablefmt</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>url(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the url to convert</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the title to show</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tablefmt(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the table format to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getLink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert the given url and title to a link for the given tablefmt</span>

<span class="sd">    Args:</span>
<span class="sd">        url(str): the url to convert</span>
<span class="sd">        title(str): the title to show</span>
<span class="sd">        tablefmt(str): the table format to use</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># create a safe url</span>
    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span>
    <span class="n">markup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;mediawiki&quot;</span><span class="p">:</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">]&quot;</span>
    <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;github&quot;</span><span class="p">:</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2">](</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">)&quot;</span>
    <span class="k">elif</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
        <span class="n">markup</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\href{</span><span class="si">%s</span><span class="s2">}{</span><span class="si">%s</span><span class="s2">}&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">markup</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Query.getTryItUrl" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getTryItUrl</span><span class="p">(</span><span class="n">baseurl</span><span class="p">,</span> <span class="n">database</span><span class="o">=</span><span class="s1">&#39;blazegraph&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>return the "try it!" url for the given baseurl</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>baseurl(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the baseurl to used</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the "try it!" url for the given query</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getTryItUrl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">baseurl</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">database</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;blazegraph&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    return the &quot;try it!&quot; url for the given baseurl</span>

<span class="sd">    Args:</span>
<span class="sd">        baseurl(str): the baseurl to used</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the &quot;try it!&quot; url for the given query</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># https://stackoverflow.com/a/9345102/1497139</span>
    <span class="n">prefixed_query</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span><span class="p">:</span>
        <span class="n">prepend</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefixes</span><span class="p">)</span>
        <span class="n">prefixed_query</span> <span class="o">=</span> <span class="n">prepend</span> <span class="o">+</span> <span class="n">prefixed_query</span>
    <span class="n">quoted</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="n">prefixed_query</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">database</span> <span class="o">==</span> <span class="s2">&quot;blazegraph&quot;</span><span class="p">:</span>
        <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;/#&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;?query=&quot;</span>
    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">baseurl</span><span class="si">}{</span><span class="n">delim</span><span class="si">}{</span><span class="n">quoted</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">url</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Query.preFormatWithCallBacks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">preFormatWithCallBacks</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>run the configured call backs to pre-format the given list of dicts for the given tableformat</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lod(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of dicts to handle</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tablefmt(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the table format (according to tabulate) to apply</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">preFormatWithCallBacks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    run the configured call backs to pre-format the given list of dicts for the given tableformat</span>

<span class="sd">    Args:</span>
<span class="sd">        lod(list): the list of dicts to handle</span>
<span class="sd">        tablefmt(str): the table format (according to tabulate) to apply</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">formatCallBack</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatCallBacks</span><span class="p">:</span>
                    <span class="n">formatCallBack</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Query.prefixToLink" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">prefixToLink</span><span class="p">(</span><span class="n">lod</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>convert url prefixes to link according to the given table format
TODO - refactor as preFormat callback</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lod(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of dicts to convert</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prefix(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the prefix to strip</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tablefmt(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the tabulate tableformat to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">prefixToLink</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lod</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">prefix</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert url prefixes to link according to the given table format</span>
<span class="sd">    TODO - refactor as preFormat callback</span>

<span class="sd">    Args:</span>
<span class="sd">        lod(list): the list of dicts to convert</span>
<span class="sd">        prefix(str): the prefix to strip</span>
<span class="sd">        tablefmt(str): the tabulate tableformat to use</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">lod</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="n">item</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">uqitem</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">unquote</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">tablefmt</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
                    <span class="n">link</span> <span class="o">=</span> <span class="n">uqitem</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLink</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">uqitem</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">)</span>
                <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">link</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.Query.set_default_params" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_default_params</span><span class="p">(</span><span class="n">params_dict</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>set the default parameters for the given params_dict</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">set_default_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    set the default parameters for the given params_dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">param_list</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">default_value</span>
        <span class="n">params_dict</span><span class="p">[</span><span class="n">param</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.query.QueryManager" class="doc doc-heading">
            <code>QueryManager</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>manages pre packaged Queries</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/query.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">QueryManager</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    manages pre packaged Queries</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">lang</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queriesPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        Args:</span>
<span class="sd">            lang(str): the language to use for the queries sql or sparql</span>
<span class="sd">            queriesPath(str): the path of the yaml file to load queries from</span>
<span class="sd">            debug(bool): True if debug information should be shown</span>
<span class="sd">            with_default(bool): if True also load the default yaml file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">lang</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">lang</span> <span class="o">=</span> <span class="s2">&quot;sql&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queriesByName</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="o">=</span> <span class="n">lang</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="n">queries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getQueries</span><span class="p">(</span><span class="n">queriesPath</span><span class="o">=</span><span class="n">queriesPath</span><span class="p">,</span> <span class="n">with_default</span><span class="o">=</span><span class="n">with_default</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">queryDict</span> <span class="ow">in</span> <span class="n">queries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="ow">in</span> <span class="n">queryDict</span><span class="p">:</span>
                <span class="n">queryDict</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
                <span class="n">queryDict</span><span class="p">[</span><span class="s2">&quot;lang&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;query&quot;</span> <span class="ow">in</span> <span class="n">queryDict</span><span class="p">:</span>
                    <span class="n">queryDict</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">queryDict</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="p">]</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">queryDict</span><span class="p">)</span>
                    <span class="n">query</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">queriesByName</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">query</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Failed to load query &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="si">}</span><span class="s2">)&quot;</span>
                    <span class="n">ExceptionHandler</span><span class="o">.</span><span class="n">handle</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getQueries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queriesPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the queries for the given queries Path</span>

<span class="sd">        Args:</span>
<span class="sd">            queriesPath(str): the path of the yaml file to load queries from</span>
<span class="sd">            with_default(bool): if True also load the default yaml file</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">queriesPaths</span> <span class="o">=</span> <span class="n">YamlPath</span><span class="o">.</span><span class="n">getPaths</span><span class="p">(</span>
            <span class="s2">&quot;queries.yaml&quot;</span><span class="p">,</span> <span class="n">queriesPath</span><span class="p">,</span> <span class="n">with_default</span><span class="o">=</span><span class="n">with_default</span>
        <span class="p">)</span>
        <span class="n">queries</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">queriesPath</span> <span class="ow">in</span> <span class="n">queriesPaths</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">queriesPath</span><span class="p">):</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">queriesPath</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                    <span class="n">lqueries</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">lqueries</span><span class="p">:</span>
                        <span class="n">queries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">lqueries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">queries</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.QueryManager.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">lang</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queriesPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Constructor
Args:
    lang(str): the language to use for the queries sql or sparql
    queriesPath(str): the path of the yaml file to load queries from
    debug(bool): True if debug information should be shown
    with_default(bool): if True also load the default yaml file</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">lang</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">queriesPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    Args:</span>
<span class="sd">        lang(str): the language to use for the queries sql or sparql</span>
<span class="sd">        queriesPath(str): the path of the yaml file to load queries from</span>
<span class="sd">        debug(bool): True if debug information should be shown</span>
<span class="sd">        with_default(bool): if True also load the default yaml file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">lang</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">lang</span> <span class="o">=</span> <span class="s2">&quot;sql&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">queriesByName</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="o">=</span> <span class="n">lang</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="n">queries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getQueries</span><span class="p">(</span><span class="n">queriesPath</span><span class="o">=</span><span class="n">queriesPath</span><span class="p">,</span> <span class="n">with_default</span><span class="o">=</span><span class="n">with_default</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">queryDict</span> <span class="ow">in</span> <span class="n">queries</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang</span> <span class="ow">in</span> <span class="n">queryDict</span><span class="p">:</span>
            <span class="n">queryDict</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span>
            <span class="n">queryDict</span><span class="p">[</span><span class="s2">&quot;lang&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lang</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;query&quot;</span> <span class="ow">in</span> <span class="n">queryDict</span><span class="p">:</span>
                <span class="n">queryDict</span><span class="p">[</span><span class="s2">&quot;query&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">queryDict</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">queryDict</span><span class="p">)</span>
                <span class="n">query</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">queriesByName</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">query</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Failed to load query &#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&#39; (</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">lang</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="n">ExceptionHandler</span><span class="o">.</span><span class="n">handle</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.QueryManager.getQueries" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getQueries</span><span class="p">(</span><span class="n">queriesPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get the queries for the given queries Path</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>queriesPath(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path of the yaml file to load queries from</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>with_default(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True also load the default yaml file</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getQueries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queriesPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the queries for the given queries Path</span>

<span class="sd">    Args:</span>
<span class="sd">        queriesPath(str): the path of the yaml file to load queries from</span>
<span class="sd">        with_default(bool): if True also load the default yaml file</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">queriesPaths</span> <span class="o">=</span> <span class="n">YamlPath</span><span class="o">.</span><span class="n">getPaths</span><span class="p">(</span>
        <span class="s2">&quot;queries.yaml&quot;</span><span class="p">,</span> <span class="n">queriesPath</span><span class="p">,</span> <span class="n">with_default</span><span class="o">=</span><span class="n">with_default</span>
    <span class="p">)</span>
    <span class="n">queries</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">queriesPath</span> <span class="ow">in</span> <span class="n">queriesPaths</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">queriesPath</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">queriesPath</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">stream</span><span class="p">:</span>
                <span class="n">lqueries</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">lqueries</span><span class="p">:</span>
                    <span class="n">queries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">lqueries</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">queries</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.query.QueryResultDocumentation" class="doc doc-heading">
            <code>QueryResultDocumentation</code>


</h3>


    <div class="doc doc-contents ">


        <p>documentation of a query result</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/query.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">QueryResultDocumentation</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    documentation of a query result</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">query</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">tryItMarkup</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">sourceCodeHeader</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">sourceCode</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">resultHeader</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">result</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor</span>

<span class="sd">        Args:</span>
<span class="sd">            query(Query): the query to be documented</span>
<span class="sd">            title(str): the title markup</span>
<span class="sd">            tablefmt(str): the tableformat that has been used</span>
<span class="sd">            tryItMarkup: the &quot;try it!&quot; markup to show</span>
<span class="sd">            sourceCodeHeader(str): the header title to use for the sourceCode</span>
<span class="sd">            sourceCode(str): the sourceCode</span>
<span class="sd">            resultCodeHeader(str): the header title to use for the result</span>
<span class="sd">            result(str): the result header</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tablefmt</span> <span class="o">=</span> <span class="n">tablefmt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tryItMarkup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">tryItMarkup</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="n">sourceCodeHeader</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sourceCode</span> <span class="o">=</span> <span class="n">sourceCode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resultHeader</span> <span class="o">=</span> <span class="n">resultHeader</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">uniCode2Latex</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">withConvert</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        converts unicode text to latex and</span>
<span class="sd">        fixes UTF-8 chars for latex in a certain range:</span>
<span class="sd">            :$_0$ ... :$_9$</span>

<span class="sd">        see https://github.com/phfaist/pylatexenc/issues/72</span>

<span class="sd">        Args:</span>
<span class="sd">            text(str): the string to fix</span>
<span class="sd">            withConvert(bool): if unicode to latex libary conversion should be used</span>

<span class="sd">        Return:</span>
<span class="sd">            str: latex presentation of UTF-8 char</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8320</span><span class="p">,</span> <span class="mi">8330</span><span class="p">):</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">code</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;$_</span><span class="si">{</span><span class="n">code</span><span class="o">-</span><span class="mi">8320</span><span class="si">}</span><span class="s2">$&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">withConvert</span><span class="p">:</span>
            <span class="c1"># workaround - hidden dependency!</span>
            <span class="kn">from</span> <span class="nn">pylatexenc.latexencode</span> <span class="kn">import</span> <span class="n">unicode_to_latex</span>

            <span class="n">latex</span> <span class="o">=</span> <span class="n">unicode_to_latex</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="c1"># workaround {\textbackslash} being returned</span>
            <span class="c1"># latex=latex.replace(&quot;{\\textbackslash}&quot;,&#39;\\&#39;)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">latex</span>
        <span class="k">return</span> <span class="n">text</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        simple string representation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">asText</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">asText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return my text representation</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: description, sourceCodeHeader, sourceCode, tryIt link and result table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sourceCodeHeader</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sourceCode</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">tryItMarkup</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resultHeader</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">fixedStr</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uniCode2Latex</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tablefmt</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span> <span class="k">else</span> <span class="n">text</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">fixedStr</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.QueryResultDocumentation.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">,</span> <span class="n">tryItMarkup</span><span class="p">,</span> <span class="n">sourceCodeHeader</span><span class="p">,</span> <span class="n">sourceCode</span><span class="p">,</span> <span class="n">resultHeader</span><span class="p">,</span> <span class="n">result</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>constructor</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query(Query)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the query to be documented</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the title markup</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tablefmt(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the tableformat that has been used</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tryItMarkup</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the "try it!" markup to show</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sourceCodeHeader(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the header title to use for the sourceCode</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sourceCode(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the sourceCode</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resultCodeHeader(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the header title to use for the result</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>result(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the result header</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">query</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">tryItMarkup</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">sourceCodeHeader</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">sourceCode</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">resultHeader</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">result</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor</span>

<span class="sd">    Args:</span>
<span class="sd">        query(Query): the query to be documented</span>
<span class="sd">        title(str): the title markup</span>
<span class="sd">        tablefmt(str): the tableformat that has been used</span>
<span class="sd">        tryItMarkup: the &quot;try it!&quot; markup to show</span>
<span class="sd">        sourceCodeHeader(str): the header title to use for the sourceCode</span>
<span class="sd">        sourceCode(str): the sourceCode</span>
<span class="sd">        resultCodeHeader(str): the header title to use for the result</span>
<span class="sd">        result(str): the result header</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tablefmt</span> <span class="o">=</span> <span class="n">tablefmt</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tryItMarkup</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="si">{</span><span class="n">tryItMarkup</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sourceCodeHeader</span> <span class="o">=</span> <span class="n">sourceCodeHeader</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sourceCode</span> <span class="o">=</span> <span class="n">sourceCode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resultHeader</span> <span class="o">=</span> <span class="n">resultHeader</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.QueryResultDocumentation.__str__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__str__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>simple string representation</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    simple string representation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">asText</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.QueryResultDocumentation.asText" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">asText</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>return my text representation</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>description, sourceCodeHeader, sourceCode, tryIt link and result table</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">asText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    return my text representation</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: description, sourceCodeHeader, sourceCode, tryIt link and result table</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">description</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sourceCodeHeader</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">sourceCode</span><span class="si">}{</span><span class="bp">self</span><span class="o">.</span><span class="n">tryItMarkup</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">resultHeader</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">result</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="n">fixedStr</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">uniCode2Latex</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tablefmt</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span> <span class="k">else</span> <span class="n">text</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">fixedStr</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.QueryResultDocumentation.uniCode2Latex" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">uniCode2Latex</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">withConvert</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>converts unicode text to latex and
fixes UTF-8 chars for latex in a certain range:
    :$_0$ ... :$_9$</p>
<p>see https://github.com/phfaist/pylatexenc/issues/72</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>text(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the string to fix</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withConvert(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if unicode to latex libary conversion should be used</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="return" open>
  <summary>Return</summary>
  <p>str: latex presentation of UTF-8 char</p>
</details>

            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">uniCode2Latex</span><span class="p">(</span><span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">withConvert</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    converts unicode text to latex and</span>
<span class="sd">    fixes UTF-8 chars for latex in a certain range:</span>
<span class="sd">        :$_0$ ... :$_9$</span>

<span class="sd">    see https://github.com/phfaist/pylatexenc/issues/72</span>

<span class="sd">    Args:</span>
<span class="sd">        text(str): the string to fix</span>
<span class="sd">        withConvert(bool): if unicode to latex libary conversion should be used</span>

<span class="sd">    Return:</span>
<span class="sd">        str: latex presentation of UTF-8 char</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">code</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">8320</span><span class="p">,</span> <span class="mi">8330</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">code</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;$_</span><span class="si">{</span><span class="n">code</span><span class="o">-</span><span class="mi">8320</span><span class="si">}</span><span class="s2">$&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">withConvert</span><span class="p">:</span>
        <span class="c1"># workaround - hidden dependency!</span>
        <span class="kn">from</span> <span class="nn">pylatexenc.latexencode</span> <span class="kn">import</span> <span class="n">unicode_to_latex</span>

        <span class="n">latex</span> <span class="o">=</span> <span class="n">unicode_to_latex</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="c1"># workaround {\textbackslash} being returned</span>
        <span class="c1"># latex=latex.replace(&quot;{\\textbackslash}&quot;,&#39;\\&#39;)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">latex</span>
    <span class="k">return</span> <span class="n">text</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.query.QuerySyntaxHighlight" class="doc doc-heading">
            <code>QuerySyntaxHighlight</code>


</h3>


    <div class="doc doc-contents ">


        <p>Syntax highlighting for queries with pygments</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/query.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">QuerySyntaxHighlight</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Syntax highlighting for queries with pygments</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">highlightFormat</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;html&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        construct me for the given query and highlightFormat</span>

<span class="sd">        Args:</span>
<span class="sd">            query(Query): the query to do the syntax highlighting for</span>
<span class="sd">            highlightFormat(str): the highlight format to be used</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">highlightFormat</span> <span class="o">=</span> <span class="n">highlightFormat</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lexer</span> <span class="o">=</span> <span class="n">get_lexer_by_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">lang</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">highlightFormat</span> <span class="o">==</span> <span class="s2">&quot;html&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">formatter</span> <span class="o">=</span> <span class="n">HtmlFormatter</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">highlightFormat</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">formatter</span> <span class="o">=</span> <span class="n">LatexFormatter</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">highlight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns:</span>
<span class="sd">            str: the result of the syntax highlighting with pygments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">syntaxResult</span> <span class="o">=</span> <span class="n">highlight</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lexer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatter</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">syntaxResult</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.QuerySyntaxHighlight.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">highlightFormat</span><span class="o">=</span><span class="s1">&#39;html&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>construct me for the given query and highlightFormat</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query(Query)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the query to do the syntax highlighting for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>highlightFormat(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the highlight format to be used</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">highlightFormat</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;html&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    construct me for the given query and highlightFormat</span>

<span class="sd">    Args:</span>
<span class="sd">        query(Query): the query to do the syntax highlighting for</span>
<span class="sd">        highlightFormat(str): the highlight format to be used</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">highlightFormat</span> <span class="o">=</span> <span class="n">highlightFormat</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lexer</span> <span class="o">=</span> <span class="n">get_lexer_by_name</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">lang</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">highlightFormat</span> <span class="o">==</span> <span class="s2">&quot;html&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formatter</span> <span class="o">=</span> <span class="n">HtmlFormatter</span><span class="p">()</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">highlightFormat</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formatter</span> <span class="o">=</span> <span class="n">LatexFormatter</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.QuerySyntaxHighlight.highlight" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">highlight</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">



    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the result of the syntax highlighting with pygments</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">highlight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns:</span>
<span class="sd">        str: the result of the syntax highlighting with pygments</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">syntaxResult</span> <span class="o">=</span> <span class="n">highlight</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lexer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">formatter</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">syntaxResult</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.query.ValueFormatter" class="doc doc-heading">
            <code>ValueFormatter</code>


</h3>


    <div class="doc doc-contents ">


        <p>a value Formatter</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/query.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">ValueFormatter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a value Formatter</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">format</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">regexps</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">apply_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">resultFormat</span><span class="p">:</span> <span class="n">Format</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        apply the given format to the given record</span>

<span class="sd">        Args:</span>
<span class="sd">            record(dict): the record to handle</span>
<span class="sd">            key(str): the property key</span>
<span class="sd">            resultFormat(str): the resultFormat Style to apply</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="c1"># if there are no regular expressions specified always format</span>
                <span class="n">doformat</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">regexps</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
                <span class="k">for</span> <span class="n">regexp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">regexps</span><span class="p">:</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="n">vmatch</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">regexp</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">vmatch</span><span class="p">:</span>
                            <span class="c1"># we found a match and will format it if the value is not none</span>
                            <span class="n">doformat</span> <span class="o">=</span> <span class="kc">True</span>
                            <span class="n">value</span> <span class="o">=</span> <span class="n">vmatch</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span>
                            <span class="sa">f</span><span class="s2">&quot;ValueFormatter: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">Invalid regular expression:</span><span class="si">{</span><span class="n">regexp</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                            <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span>
                        <span class="p">)</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">doformat</span><span class="p">:</span>
                    <span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
                    <span class="n">newValue</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">if</span> <span class="n">resultFormat</span> <span class="o">==</span> <span class="s2">&quot;github&quot;</span><span class="p">:</span>
                        <span class="n">newValue</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">](</span><span class="si">{</span><span class="n">link</span><span class="si">}</span><span class="s2">)&quot;</span>
                    <span class="k">elif</span> <span class="n">resultFormat</span> <span class="o">==</span> <span class="s2">&quot;mediawiki&quot;</span><span class="p">:</span>
                        <span class="n">newValue</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">link</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">]&quot;</span>
                    <span class="k">elif</span> <span class="n">resultFormat</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
                        <span class="n">newValue</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\href</span><span class="se">{{</span><span class="si">{</span><span class="n">link</span><span class="si">}</span><span class="se">}}{{</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">}}</span><span class="s2">&quot;</span>
                    <span class="k">if</span> <span class="n">newValue</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span>

    <span class="k">def</span> <span class="nf">applyFormat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">resultFormat</span><span class="p">:</span> <span class="n">Format</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        legacy delegate</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">apply_format</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">resultFormat</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.ValueFormatter.applyFormat" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">applyFormat</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">resultFormat</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>legacy delegate</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">applyFormat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">resultFormat</span><span class="p">:</span> <span class="n">Format</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    legacy delegate</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">apply_format</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">resultFormat</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.ValueFormatter.apply_format" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">apply_format</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">resultFormat</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>apply the given format to the given record</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>record(dict)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the record to handle</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the property key</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resultFormat(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the resultFormat Style to apply</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">apply_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">resultFormat</span><span class="p">:</span> <span class="n">Format</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    apply the given format to the given record</span>

<span class="sd">    Args:</span>
<span class="sd">        record(dict): the record to handle</span>
<span class="sd">        key(str): the property key</span>
<span class="sd">        resultFormat(str): the resultFormat Style to apply</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="c1"># if there are no regular expressions specified always format</span>
            <span class="n">doformat</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">regexps</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
            <span class="k">for</span> <span class="n">regexp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">regexps</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">vmatch</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">regexp</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">vmatch</span><span class="p">:</span>
                        <span class="c1"># we found a match and will format it if the value is not none</span>
                        <span class="n">doformat</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">value</span> <span class="o">=</span> <span class="n">vmatch</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;ValueFormatter: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="se">\n</span><span class="s2">Invalid regular expression:</span><span class="si">{</span><span class="n">regexp</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">doformat</span><span class="p">:</span>
                <span class="n">link</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
                <span class="n">newValue</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">resultFormat</span> <span class="o">==</span> <span class="s2">&quot;github&quot;</span><span class="p">:</span>
                    <span class="n">newValue</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">](</span><span class="si">{</span><span class="n">link</span><span class="si">}</span><span class="s2">)&quot;</span>
                <span class="k">elif</span> <span class="n">resultFormat</span> <span class="o">==</span> <span class="s2">&quot;mediawiki&quot;</span><span class="p">:</span>
                    <span class="n">newValue</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">link</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">]&quot;</span>
                <span class="k">elif</span> <span class="n">resultFormat</span> <span class="o">==</span> <span class="s2">&quot;latex&quot;</span><span class="p">:</span>
                    <span class="n">newValue</span> <span class="o">=</span> <span class="sa">rf</span><span class="s2">&quot;\href</span><span class="se">{{</span><span class="si">{</span><span class="n">link</span><span class="si">}</span><span class="se">}}{{</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="se">}}</span><span class="s2">&quot;</span>
                <span class="k">if</span> <span class="n">newValue</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">newValue</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.query.ValueFormatters" class="doc doc-heading">
            <code>ValueFormatters</code>


</h3>


    <div class="doc doc-contents ">


        <p>manages a set of ValueFormatters</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/query.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">ValueFormatters</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    manages a set of ValueFormatters</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">formatters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">ValueFormatter</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">dict</span><span class="p">)</span>

    <span class="n">_instance</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="s2">&quot;ValueFormatters&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">_formats_path</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueFormatters&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the singleton instance.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">of_yaml</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">preload</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">formats_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueFormatters&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Preload singleton with specific formats path.&quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">of_yaml</span><span class="p">(</span><span class="n">formats_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">of_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">yaml_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueFormatters&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load ValueFormatters from YAML file.&quot;&quot;&quot;</span>
        <span class="n">vf</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">yaml_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">paths</span> <span class="o">=</span> <span class="n">YamlPath</span><span class="o">.</span><span class="n">getPaths</span><span class="p">(</span><span class="s2">&quot;formats.yaml&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">yaml_path</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">yaml_path</span><span class="p">:</span>
            <span class="n">vf</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">load_from_yaml_file</span><span class="p">(</span><span class="n">yaml_path</span><span class="p">)</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_formats_path</span> <span class="o">=</span> <span class="n">yaml_path</span>
        <span class="k">return</span> <span class="n">vf</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.ValueFormatters.get_instance" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_instance</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the singleton instance.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueFormatters&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the singleton instance.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">of_yaml</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.ValueFormatters.of_yaml" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">of_yaml</span><span class="p">(</span><span class="n">yaml_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Load ValueFormatters from YAML file.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">of_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">yaml_path</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueFormatters&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load ValueFormatters from YAML file.&quot;&quot;&quot;</span>
    <span class="n">vf</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">yaml_path</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="n">YamlPath</span><span class="o">.</span><span class="n">getPaths</span><span class="p">(</span><span class="s2">&quot;formats.yaml&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">paths</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">yaml_path</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">yaml_path</span><span class="p">:</span>
        <span class="n">vf</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">load_from_yaml_file</span><span class="p">(</span><span class="n">yaml_path</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_formats_path</span> <span class="o">=</span> <span class="n">yaml_path</span>
    <span class="k">return</span> <span class="n">vf</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query.ValueFormatters.preload" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">preload</span><span class="p">(</span><span class="n">formats_path</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Preload singleton with specific formats path.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">preload</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">formats_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;ValueFormatters&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Preload singleton with specific formats path.&quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">of_yaml</span><span class="p">(</span><span class="n">formats_path</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.query_cmd" class="doc doc-heading">
            <code>query_cmd</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2024-08-21</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.query_cmd.QueryCmd" class="doc doc-heading">
            <code>QueryCmd</code>


</h3>


    <div class="doc doc-contents ">


        <p>command line support queries</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/query_cmd.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">QueryCmd</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    command line support queries</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">Namespace</span><span class="p">,</span> <span class="n">with_default_queries</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        command line args</span>

<span class="sd">        Args:</span>
<span class="sd">            args (Namespace): the command line arguments</span>
<span class="sd">            with_default_queries (bool): should default queries be made available/listed?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">with_default_queries</span> <span class="o">=</span> <span class="n">with_default_queries</span>

    <span class="k">def</span> <span class="nf">init_managers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endpoints</span> <span class="o">=</span> <span class="n">EndpointManager</span><span class="o">.</span><span class="n">getEndpoints</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">endpointPath</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qm</span> <span class="o">=</span> <span class="n">QueryManager</span><span class="p">(</span>
            <span class="n">lang</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">language</span><span class="p">,</span>
            <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">,</span>
            <span class="n">queriesPath</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">queriesPath</span><span class="p">,</span>
            <span class="n">with_default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">with_default_queries</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_args</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        handle the command line arguments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">handled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">debug</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span>
        <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">init_managers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">query</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># preload ValueFormatters</span>
        <span class="n">ValueFormatters</span><span class="o">.</span><span class="n">preload</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">formatsPath</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">list</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">query</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="o">.</span><span class="n">queriesByName</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">handled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">listEndpoints</span><span class="p">:</span>
            <span class="c1"># list endpoints</span>
            <span class="k">for</span> <span class="n">endpoint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">endpoints</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="s2">&quot;lang&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">lang</span> <span class="o">==</span> <span class="n">args</span><span class="o">.</span><span class="n">language</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span>
            <span class="n">handled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">queryName</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">debug</span> <span class="ow">or</span> <span class="n">args</span><span class="o">.</span><span class="n">showQuery</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;named query </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">queryName</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">queryName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="o">.</span><span class="n">queriesByName</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;named query </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">queryName</span><span class="si">}</span><span class="s2"> not available&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="o">.</span><span class="n">queriesByName</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">queryName</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">limit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">args</span><span class="o">.</span><span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">limit</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">formats</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span>
            <span class="k">if</span> <span class="n">debug</span> <span class="ow">or</span> <span class="n">args</span><span class="o">.</span><span class="n">showQuery</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;?&quot;</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">args</span><span class="o">.</span><span class="n">queryFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">queryFilePath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">queryFile</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="o">=</span> <span class="n">queryFilePath</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">queryFilePath</span><span class="o">.</span><span class="n">stem</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;?&quot;</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span><span class="p">:</span>
            <span class="n">params</span> <span class="o">=</span> <span class="n">Params</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">apply_parameters_with_check</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span>
            <span class="k">if</span> <span class="n">debug</span> <span class="ow">or</span> <span class="n">args</span><span class="o">.</span><span class="n">showQuery</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">language</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">handled</span>

    <span class="k">def</span> <span class="nf">format_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlod</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Format and print the query results.</span>

<span class="sd">        This method formats the query results based on the specified output format</span>
<span class="sd">        (e.g., CSV, JSON, XML) and prints them to the console.</span>

<span class="sd">        Args:</span>
<span class="sd">            qlod (List[Dict[str, Any]]): A list of dictionaries containing the query results.</span>
<span class="sd">                Each dictionary represents a row of the query result, with column names as keys</span>
<span class="sd">                and the corresponding values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">format</span> <span class="ow">is</span> <span class="n">Format</span><span class="o">.</span><span class="n">csv</span><span class="p">:</span>
            <span class="n">csv_converter</span> <span class="o">=</span> <span class="n">CSV</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
            <span class="n">csv</span> <span class="o">=</span> <span class="n">csv_converter</span><span class="o">.</span><span class="n">toCSV</span><span class="p">(</span><span class="n">qlod</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">csv</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">format</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Format</span><span class="o">.</span><span class="n">latex</span><span class="p">,</span> <span class="n">Format</span><span class="o">.</span><span class="n">github</span><span class="p">,</span> <span class="n">Format</span><span class="o">.</span><span class="n">mediawiki</span><span class="p">]:</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">documentQueryResult</span><span class="p">(</span>
                <span class="n">qlod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">format</span><span class="p">),</span> <span class="n">floatfmt</span><span class="o">=</span><span class="s2">&quot;.0f&quot;</span>
            <span class="p">)</span>
            <span class="n">docstr</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">asText</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">docstr</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">format</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Format</span><span class="o">.</span><span class="n">json</span><span class="p">]</span> <span class="ow">or</span> <span class="n">args</span><span class="o">.</span><span class="n">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># set as default</span>
            <span class="c1"># https://stackoverflow.com/a/36142844/1497139</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">qlod</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">format</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Format</span><span class="o">.</span><span class="n">xml</span><span class="p">]:</span>
            <span class="n">lod2xml</span> <span class="o">=</span> <span class="n">Lod2Xml</span><span class="p">(</span><span class="n">qlod</span><span class="p">)</span>
            <span class="n">xml</span> <span class="o">=</span> <span class="n">lod2xml</span><span class="o">.</span><span class="n">asXml</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;format </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">format</span><span class="si">}</span><span class="s2"> not supported yet&quot;</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">argument_exists</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parser</span><span class="p">,</span> <span class="n">arg_name</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">any</span><span class="p">(</span><span class="n">arg_name</span> <span class="ow">in</span> <span class="n">action</span><span class="o">.</span><span class="n">option_strings</span> <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">parser</span><span class="o">.</span><span class="n">_actions</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">add_args</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">parser</span><span class="p">:</span> <span class="n">ArgumentParser</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">argument_exists</span><span class="p">(</span><span class="n">parser</span><span class="p">,</span> <span class="s2">&quot;--debug&quot;</span><span class="p">):</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-d&quot;</span><span class="p">,</span>
                <span class="s2">&quot;--debug&quot;</span><span class="p">,</span>
                <span class="n">dest</span><span class="o">=</span><span class="s2">&quot;debug&quot;</span><span class="p">,</span>
                <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
                <span class="n">help</span><span class="o">=</span><span class="s2">&quot;set debug [default: </span><span class="si">%(default)s</span><span class="s2">]&quot;</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-ep&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--endpointPath&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;path to yaml file to configure endpoints to use for queries&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">ValueFormatters</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-fp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--formatsPath&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="n">ValueFormatters</span><span class="o">.</span><span class="n">_formats_path</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;path to yaml file to configure formats to use for query result documentation&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-li&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--list&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;show the list of available queries&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;--limit&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;set limit parameter of query&quot;</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;--params&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="n">StoreDictKeyPair</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;query parameters as Key-value pairs in the format key1=value1,key2=value2&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-le&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--listEndpoints&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;show the list of available endpoints&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-sq&quot;</span><span class="p">,</span> <span class="s2">&quot;--showQuery&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;show the query&quot;</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-qp&quot;</span><span class="p">,</span> <span class="s2">&quot;--queriesPath&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;path to YAML file with query definitions&quot;</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-q&quot;</span><span class="p">,</span> <span class="s2">&quot;--query&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the query to run&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-qf&quot;</span><span class="p">,</span> <span class="s2">&quot;--queryFile&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the query file to run&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-qn&quot;</span><span class="p">,</span> <span class="s2">&quot;--queryName&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;run a named query&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.query_cmd.QueryCmd.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">with_default_queries</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>command line args</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>args</code>
            </td>
            <td>
                  <code><span title="argparse.Namespace">Namespace</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the command line arguments</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>with_default_queries</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>should default queries be made available/listed?</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query_cmd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">:</span> <span class="n">Namespace</span><span class="p">,</span> <span class="n">with_default_queries</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    command line args</span>

<span class="sd">    Args:</span>
<span class="sd">        args (Namespace): the command line arguments</span>
<span class="sd">        with_default_queries (bool): should default queries be made available/listed?</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">with_default_queries</span> <span class="o">=</span> <span class="n">with_default_queries</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query_cmd.QueryCmd.format_output" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">format_output</span><span class="p">(</span><span class="n">qlod</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Format and print the query results.</p>
<p>This method formats the query results based on the specified output format
(e.g., CSV, JSON, XML) and prints them to the console.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>qlod</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of dictionaries containing the query results.
Each dictionary represents a row of the query result, with column names as keys
and the corresponding values.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query_cmd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">format_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qlod</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Format and print the query results.</span>

<span class="sd">    This method formats the query results based on the specified output format</span>
<span class="sd">    (e.g., CSV, JSON, XML) and prints them to the console.</span>

<span class="sd">    Args:</span>
<span class="sd">        qlod (List[Dict[str, Any]]): A list of dictionaries containing the query results.</span>
<span class="sd">            Each dictionary represents a row of the query result, with column names as keys</span>
<span class="sd">            and the corresponding values.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">format</span> <span class="ow">is</span> <span class="n">Format</span><span class="o">.</span><span class="n">csv</span><span class="p">:</span>
        <span class="n">csv_converter</span> <span class="o">=</span> <span class="n">CSV</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
        <span class="n">csv</span> <span class="o">=</span> <span class="n">csv_converter</span><span class="o">.</span><span class="n">toCSV</span><span class="p">(</span><span class="n">qlod</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">csv</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">format</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Format</span><span class="o">.</span><span class="n">latex</span><span class="p">,</span> <span class="n">Format</span><span class="o">.</span><span class="n">github</span><span class="p">,</span> <span class="n">Format</span><span class="o">.</span><span class="n">mediawiki</span><span class="p">]:</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">documentQueryResult</span><span class="p">(</span>
            <span class="n">qlod</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">format</span><span class="p">),</span> <span class="n">floatfmt</span><span class="o">=</span><span class="s2">&quot;.0f&quot;</span>
        <span class="p">)</span>
        <span class="n">docstr</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">asText</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">docstr</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">format</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Format</span><span class="o">.</span><span class="n">json</span><span class="p">]</span> <span class="ow">or</span> <span class="n">args</span><span class="o">.</span><span class="n">format</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># set as default</span>
        <span class="c1"># https://stackoverflow.com/a/36142844/1497139</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">qlod</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">str</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">format</span> <span class="ow">in</span> <span class="p">[</span><span class="n">Format</span><span class="o">.</span><span class="n">xml</span><span class="p">]:</span>
        <span class="n">lod2xml</span> <span class="o">=</span> <span class="n">Lod2Xml</span><span class="p">(</span><span class="n">qlod</span><span class="p">)</span>
        <span class="n">xml</span> <span class="o">=</span> <span class="n">lod2xml</span><span class="o">.</span><span class="n">asXml</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">xml</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;format </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">format</span><span class="si">}</span><span class="s2"> not supported yet&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.query_cmd.QueryCmd.handle_args" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">handle_args</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>handle the command line arguments</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/query_cmd.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">handle_args</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    handle the command line arguments</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">handled</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">debug</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span>
    <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">init_managers</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">query</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># preload ValueFormatters</span>
    <span class="n">ValueFormatters</span><span class="o">.</span><span class="n">preload</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">formatsPath</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">list</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">query</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="o">.</span><span class="n">queriesByName</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">query</span><span class="o">.</span><span class="n">title</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">handled</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">listEndpoints</span><span class="p">:</span>
        <span class="c1"># list endpoints</span>
        <span class="k">for</span> <span class="n">endpoint</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">endpoints</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="s2">&quot;lang&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">endpoint</span><span class="o">.</span><span class="n">lang</span> <span class="o">==</span> <span class="n">args</span><span class="o">.</span><span class="n">language</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span>
        <span class="n">handled</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">queryName</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">debug</span> <span class="ow">or</span> <span class="n">args</span><span class="o">.</span><span class="n">showQuery</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;named query </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">queryName</span><span class="si">}</span><span class="s2">:&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">queryName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="o">.</span><span class="n">queriesByName</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;named query </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">queryName</span><span class="si">}</span><span class="s2"> not available&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">qm</span><span class="o">.</span><span class="n">queriesByName</span><span class="p">[</span><span class="n">args</span><span class="o">.</span><span class="n">queryName</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">limit</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">args</span><span class="o">.</span><span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">limit</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">formats</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span>
        <span class="k">if</span> <span class="n">debug</span> <span class="ow">or</span> <span class="n">args</span><span class="o">.</span><span class="n">showQuery</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span>
                <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">)</span>
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">description</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
            <span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;?&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">args</span><span class="o">.</span><span class="n">queryFile</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">queryFilePath</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">queryFile</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="o">=</span> <span class="n">queryFilePath</span><span class="o">.</span><span class="n">read_text</span><span class="p">()</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">queryFilePath</span><span class="o">.</span><span class="n">stem</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;?&quot;</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">language</span><span class="p">)</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span><span class="p">:</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">Params</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">apply_parameters_with_check</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span>
        <span class="k">if</span> <span class="n">debug</span> <span class="ow">or</span> <span class="n">args</span><span class="o">.</span><span class="n">showQuery</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">language</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">handled</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.querymain" class="doc doc-heading">
            <code>querymain</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2022-02-13</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.querymain.QueryMain" class="doc doc-heading">
            <code>QueryMain</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="QueryCmd (lodstorage.query_cmd.QueryCmd)" href="#lodstorage.query_cmd.QueryCmd">QueryCmd</a></code></p>


        <p>Commandline handler</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/querymain.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">QueryMain</span><span class="p">(</span><span class="n">QueryCmd</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Commandline handler</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        command line args</span>

<span class="sd">        Args:</span>
<span class="sd">            args(list): the command line arguments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rate_limiter</span> <span class="o">=</span> <span class="n">RateLimiter</span><span class="p">(</span>
            <span class="n">calls_per_minute</span><span class="o">=</span><span class="p">(</span>
                <span class="n">args</span><span class="o">.</span><span class="n">calls_per_minute</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s2">&quot;calls_per_minute&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_args</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>
        <span class="n">handled</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">handle_args</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span><span class="p">:</span>
            <span class="n">endpointConf</span> <span class="o">=</span> <span class="n">Endpoint</span><span class="p">()</span>
            <span class="n">endpointConf</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;POST&quot;</span>
            <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">endpointName</span><span class="p">:</span>
                <span class="n">endpointConf</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">endpoints</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">endpointName</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">endpointConf</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">endpoint</span>
            <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">method</span><span class="p">:</span>
                <span class="n">endpointConf</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">method</span>
            <span class="k">if</span> <span class="n">endpointConf</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">tryItUrl</span> <span class="o">=</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">website</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">database</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">limit</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;limit&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="ow">or</span> <span class="s2">&quot;LIMIT&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
                        <span class="sa">r</span><span class="s2">&quot;(limit|LIMIT)\s+(\d+)&quot;</span><span class="p">,</span>
                        <span class="sa">f</span><span class="s2">&quot;LIMIT </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">limit</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">LIMIT </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">limit</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">language</span> <span class="o">==</span> <span class="s2">&quot;sparql&quot;</span><span class="p">:</span>
                <span class="n">sparql</span> <span class="o">=</span> <span class="n">SPARQL</span><span class="o">.</span><span class="n">fromEndpointConf</span><span class="p">(</span><span class="n">endpointConf</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">prefixes</span> <span class="ow">and</span> <span class="n">endpointConf</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">add_endpoint_prefixes</span><span class="p">(</span>
                        <span class="n">endpointConf</span><span class="p">,</span> <span class="n">PrefixConfigs</span><span class="o">.</span><span class="n">get_instance</span><span class="p">()</span>
                    <span class="p">)</span>
                <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">raw</span><span class="p">:</span>
                    <span class="n">qres</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawQuery</span><span class="p">(</span>
                        <span class="n">endpointConf</span><span class="p">,</span>
                        <span class="n">query</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">query</span><span class="p">,</span>
                        <span class="n">resultFormat</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">format</span><span class="p">,</span>
                        <span class="n">mimeType</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">mimeType</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">qres</span><span class="p">)</span>
                    <span class="k">return</span>
                <span class="k">if</span> <span class="s2">&quot;wikidata&quot;</span> <span class="ow">in</span> <span class="n">args</span><span class="o">.</span><span class="n">endpointName</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;*:wikidata&quot;</span><span class="p">]</span>
                <span class="n">qlod</span> <span class="o">=</span> <span class="n">sparql</span><span class="o">.</span><span class="n">queryAsListOfDicts</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">args</span><span class="o">.</span><span class="n">language</span> <span class="o">==</span> <span class="s2">&quot;sql&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">endpoint</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;jdbc:mysql&quot;</span><span class="p">):</span>
                    <span class="n">query_tool</span> <span class="o">=</span> <span class="n">MySqlQuery</span><span class="p">(</span><span class="n">endpointConf</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">args</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
                    <span class="n">qlod</span> <span class="o">=</span> <span class="n">query_tool</span><span class="o">.</span><span class="n">execute_sql_query</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Use existing SQLDB for other SQL endpoints</span>
                    <span class="n">sqlDB</span> <span class="o">=</span> <span class="n">SQLDB</span><span class="p">(</span><span class="n">endpointConf</span><span class="o">.</span><span class="n">endpoint</span><span class="p">)</span>
                    <span class="n">qlod</span> <span class="o">=</span> <span class="n">sqlDB</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">queryCode</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;language </span><span class="si">{</span><span class="n">args</span><span class="o">.</span><span class="n">language</span><span class="si">}</span><span class="s2"> not known/supported&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">format_output</span><span class="p">(</span><span class="n">qlod</span><span class="p">)</span>
            <span class="n">handled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">handled</span>

    <span class="k">def</span> <span class="nf">rawQuery</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">endpointConf</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">resultFormat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">mimeType</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">content_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;application/sparql-query&quot;</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">,</span>
        <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns raw result of the endpoint.</span>

<span class="sd">        Args:</span>
<span class="sd">            endpointConf: EndPoint</span>
<span class="sd">            query (str): query</span>
<span class="sd">            resultFormat (str): format of the result</span>
<span class="sd">            mimeType (str): mimeType</span>
<span class="sd">            content_type (str): content type of the request</span>
<span class="sd">            timeout (float): timeout in seconds</span>
<span class="sd">            lenient (bool): if True do not raise errors but just log</span>

<span class="sd">        Returns:</span>
<span class="sd">            raw result of the query</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">Version</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">Version</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">mimeType</span><span class="p">:</span>
            <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Accept&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mimeType</span>

        <span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">endpoint</span>
        <span class="n">method</span> <span class="o">=</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span><span class="p">:</span>
            <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;application/x-www-form-urlencoded&quot;</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlencode</span><span class="p">({</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="n">resultFormat</span><span class="p">})</span>
            <span class="n">params</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">content_type</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="n">resultFormat</span><span class="p">}</span>
            <span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
                <span class="n">method</span><span class="p">,</span>
                <span class="n">endpoint</span><span class="p">,</span>
                <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="c1"># Check for HTTP errors</span>
            <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

            <span class="c1"># Handle different response content types</span>
            <span class="k">if</span> <span class="s2">&quot;application/json&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>  <span class="c1"># Return JSON if applicable</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>  <span class="c1"># Fallback to plain text</span>

        <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Log or handle the error as needed</span>
            <span class="n">err_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;An error occurred while querying the endpoint: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="c1"># Attempt to retrieve response content if available</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;response&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">error_content</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
                <span class="n">err_msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Response content: </span><span class="si">{</span><span class="n">error_content</span><span class="si">}</span><span class="s2">&quot;</span>

            <span class="k">if</span> <span class="n">lenient</span><span class="p">:</span>
                <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.querymain.QueryMain.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">args</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>command line args</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>args(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the command line arguments</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/querymain.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    command line args</span>

<span class="sd">    Args:</span>
<span class="sd">        args(list): the command line arguments</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="n">args</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rate_limiter</span> <span class="o">=</span> <span class="n">RateLimiter</span><span class="p">(</span>
        <span class="n">calls_per_minute</span><span class="o">=</span><span class="p">(</span>
            <span class="n">args</span><span class="o">.</span><span class="n">calls_per_minute</span> <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="s2">&quot;calls_per_minute&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.querymain.QueryMain.rawQuery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rawQuery</span><span class="p">(</span><span class="n">endpointConf</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">resultFormat</span><span class="p">,</span> <span class="n">mimeType</span><span class="p">,</span> <span class="n">content_type</span><span class="o">=</span><span class="s1">&#39;application/sparql-query&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">lenient</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Returns raw result of the endpoint.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>endpointConf</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>EndPoint</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>query</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>resultFormat</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>format of the result</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mimeType</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>mimeType</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>content_type</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>content type of the request</p>
              </div>
            </td>
            <td>
                  <code>&#39;application/sparql-query&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>timeout in seconds</p>
              </div>
            </td>
            <td>
                  <code>10.0</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lenient</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True do not raise errors but just log</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>raw result of the query</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/querymain.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">rawQuery</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">endpointConf</span><span class="p">,</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">resultFormat</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">mimeType</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">content_type</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;application/sparql-query&quot;</span><span class="p">,</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">,</span>
    <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns raw result of the endpoint.</span>

<span class="sd">    Args:</span>
<span class="sd">        endpointConf: EndPoint</span>
<span class="sd">        query (str): query</span>
<span class="sd">        resultFormat (str): format of the result</span>
<span class="sd">        mimeType (str): mimeType</span>
<span class="sd">        content_type (str): content type of the request</span>
<span class="sd">        timeout (float): timeout in seconds</span>
<span class="sd">        lenient (bool): if True do not raise errors but just log</span>

<span class="sd">    Returns:</span>
<span class="sd">        raw result of the query</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;User-Agent&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">Version</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">Version</span><span class="o">.</span><span class="n">version</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">mimeType</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Accept&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mimeType</span>

    <span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">endpoint</span>
    <span class="n">method</span> <span class="o">=</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">method</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">method</span> <span class="o">==</span> <span class="s2">&quot;POST&quot;</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;application/x-www-form-urlencoded&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">urlencode</span><span class="p">({</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="n">resultFormat</span><span class="p">})</span>
        <span class="n">params</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">content_type</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> <span class="s2">&quot;format&quot;</span><span class="p">:</span> <span class="n">resultFormat</span><span class="p">}</span>
        <span class="n">data</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">request</span><span class="p">(</span>
            <span class="n">method</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="c1"># Check for HTTP errors</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>

        <span class="c1"># Handle different response content types</span>
        <span class="k">if</span> <span class="s2">&quot;application/json&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;Content-Type&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>  <span class="c1"># Return JSON if applicable</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span>  <span class="c1"># Fallback to plain text</span>

    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">exceptions</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="c1"># Log or handle the error as needed</span>
        <span class="n">err_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;An error occurred while querying the endpoint: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="c1"># Attempt to retrieve response content if available</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="s2">&quot;response&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">error_content</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s2">&quot;replace&quot;</span><span class="p">)</span>
            <span class="n">err_msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Response content: </span><span class="si">{</span><span class="n">error_content</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">lenient</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="n">err_msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h3 id="lodstorage.querymain.main" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>main program.</p>
<p>commandline access to List of Dicts / Linked Open Data Queries</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/querymain.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>  <span class="c1"># IGNORE:C0111</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    main program.</span>

<span class="sd">    commandline access to List of Dicts / Linked Open Data Queries</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">argv</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">argv</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

    <span class="n">program_name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
    <span class="n">program_version</span> <span class="o">=</span> <span class="s2">&quot;v</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">__version__</span>
    <span class="n">program_build_date</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">__updated__</span><span class="p">)</span>
    <span class="n">program_version_message</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%%</span><span class="s2">(prog)s </span><span class="si">%s</span><span class="s2"> (</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">program_version</span><span class="p">,</span>
        <span class="n">program_build_date</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">program_shortdesc</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s2">&quot;commandline query of endpoints in diverse languages such as SPARQL/SQL&quot;</span>
    <span class="p">)</span>
    <span class="n">user_name</span> <span class="o">=</span> <span class="s2">&quot;Wolfgang Fahl&quot;</span>
    <span class="n">program_license</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="si">%s</span>

<span class="s2">  Created by </span><span class="si">%s</span><span class="s2"> on </span><span class="si">%s</span><span class="s2">.</span>
<span class="s2">  Copyright 2020-2025 Wolfgang Fahl. All rights reserved.</span>

<span class="s2">  Licensed under the Apache License 2.0</span>
<span class="s2">  http://www.apache.org/licenses/LICENSE-2.0</span>

<span class="s2">  Distributed on an &quot;AS IS&quot; basis without warranties</span>
<span class="s2">  or conditions of any kind, either express or implied.</span>

<span class="s2">USAGE</span>
<span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
        <span class="n">program_shortdesc</span><span class="p">,</span>
        <span class="n">user_name</span><span class="p">,</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">__date__</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Setup argument parser</span>
        <span class="n">parser</span> <span class="o">=</span> <span class="n">ArgumentParser</span><span class="p">(</span>
            <span class="n">description</span><span class="o">=</span><span class="n">program_license</span><span class="p">,</span> <span class="n">formatter_class</span><span class="o">=</span><span class="n">RawDescriptionHelpFormatter</span>
        <span class="p">)</span>
        <span class="n">QueryCmd</span><span class="o">.</span><span class="n">add_args</span><span class="p">(</span><span class="n">parser</span><span class="p">)</span>

        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-en&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--endpointName&quot;</span><span class="p">,</span>
            <span class="n">default</span><span class="o">=</span><span class="s2">&quot;wikidata&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Name of the endpoint to use for queries. Available by default: </span><span class="si">{</span><span class="n">EndpointManager</span><span class="o">.</span><span class="n">getEndpointNames</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;--method&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;method to be used for SPARQL queries&quot;</span><span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;--format&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">Format</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">Format</span><span class="p">))</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="s2">&quot;--mimeType&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;MIME-type to use for the raw query&quot;</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-p&quot;</span><span class="p">,</span>
            <span class="s2">&quot;--prefixes&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;add predefined prefixes for endpoint&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-raw&quot;</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;store_true&quot;</span><span class="p">,</span>
            <span class="n">help</span><span class="o">=</span><span class="s2">&quot;return the raw query result from the endpoint. (MIME type defined over -f or -m)&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
            <span class="s2">&quot;-V&quot;</span><span class="p">,</span> <span class="s2">&quot;--version&quot;</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">program_version_message</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">lang</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
                <span class="s2">&quot;-l&quot;</span><span class="p">,</span> <span class="s2">&quot;--language&quot;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s2">&quot;the query language to use&quot;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lang</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">language</span> <span class="o">=</span> <span class="n">lang</span>
        <span class="n">query_main</span> <span class="o">=</span> <span class="n">QueryMain</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
        <span class="n">query_main</span><span class="o">.</span><span class="n">handle_args</span><span class="p">()</span>

    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
        <span class="c1">### handle keyboard interrupt ###</span>
        <span class="k">return</span> <span class="mi">1</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">DEBUG</span><span class="p">:</span>
            <span class="k">raise</span> <span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="n">indent</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">program_name</span><span class="p">)</span> <span class="o">*</span> <span class="s2">&quot; &quot;</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">program_name</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nb">repr</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">indent</span> <span class="o">+</span> <span class="s2">&quot;  for help use --help&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">())</span>
        <span class="k">return</span> <span class="mi">2</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="lodstorage.querymain.mainSPARQL" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mainSPARQL</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>commandline for SPARQL queries</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/querymain.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mainSPARQL</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    commandline for SPARQL queries</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">main</span><span class="p">(</span><span class="n">argv</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;sparql&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="lodstorage.querymain.mainSQL" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mainSQL</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>commandline for SQL queries</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/querymain.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mainSQL</span><span class="p">(</span><span class="n">argv</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    commandline for SQL queries</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">main</span><span class="p">(</span><span class="n">argv</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;sql&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.rate_limiter" class="doc doc-heading">
            <code>rate_limiter</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2024-08-24</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.rate_limiter.RateLimiter" class="doc doc-heading">
            <code>RateLimiter</code>


</h3>


    <div class="doc doc-contents ">


        <p>Wrap the @limits decorator in a new decorator</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/rate_limiter.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RateLimiter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Wrap the @limits decorator in a new decorator</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">calls_per_minute</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">calls_per_minute</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">calls_per_minute</span> <span class="o">=</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">1000</span>  <span class="c1"># use an irrationally high value</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">calls_per_minute</span> <span class="o">=</span> <span class="n">calls_per_minute</span>

    <span class="k">def</span> <span class="nf">rate_limited</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">:</span> <span class="nb">callable</span><span class="p">):</span>
        <span class="nd">@wraps</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">wrapper</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="nd">@sleep_and_retry</span>
            <span class="nd">@limits</span><span class="p">(</span><span class="n">calls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">calls_per_minute</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">rate_limited_function</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="k">return</span> <span class="n">rate_limited_function</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">wrapper</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.rdf" class="doc doc-heading">
            <code>rdf</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2024-01-27</p>
<p>@author: wf, using ChatGPT-4 prompting</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.rdf.RDFDumper" class="doc doc-heading">
            <code>RDFDumper</code>


</h3>


    <div class="doc doc-contents ">


        <p>A class to convert instances of data models (based on a LinkML schema) into an RDF graph.</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/rdf.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RDFDumper</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to convert instances of data models (based on a LinkML schema) into an RDF graph.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="nb">object</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the RDFDumper.</span>

<span class="sd">        Args:</span>
<span class="sd">            schema (Schema): The LinkML schema defining the structure of the data models.</span>
<span class="sd">            instance (object): The instance of the data model to be converted into RDF.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="n">instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">prefix</span><span class="p">:</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span> <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">uri</span> <span class="ow">in</span> <span class="n">schema</span><span class="o">.</span><span class="n">prefixes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">convert_to_rdf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the provided instance into RDF triples based on the LinkML schema.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Process the instance data according to its class in the schema</span>
        <span class="n">instance_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
        <span class="k">if</span> <span class="n">instance_class</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">classes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">process_class</span><span class="p">(</span><span class="n">instance_class</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rdf_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;turtle&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serializes the RDF graph into a string representation in the specified format.</span>

<span class="sd">        Args:</span>
<span class="sd">            format (str): The serialization format (e.g., &#39;turtle&#39;, &#39;xml&#39;, &#39;json-ld&#39;).</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The serialized RDF graph.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">rdf_format</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">value_iterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Iterates over values in a mapping or iterable.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The value to iterate over. It can be a mapping, iterable, or a single value.</span>

<span class="sd">        Yields:</span>
<span class="sd">            Tuples of (key, value) from the input value. For single values, key is None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
            <span class="k">yield from</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
            <span class="k">yield from</span> <span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">yield</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process_class</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">class_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">instance_data</span><span class="p">:</span> <span class="nb">object</span><span class="p">):</span>
        <span class="c1"># Get the base namespace URI</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_uri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">default_prefix</span><span class="p">]</span>
        <span class="c1"># get the class object</span>
        <span class="c1"># class_obj = self.schema.classes[class_name]</span>
        <span class="c1"># Construct class_uri using the namespace and class_name with a separator</span>
        <span class="n">class_uri</span> <span class="o">=</span> <span class="n">URIRef</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_uri</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">class_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Create a unique URI or a Blank Node for the instance</span>
        <span class="n">instance_uri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_instance_uri</span><span class="p">(</span><span class="n">instance_data</span><span class="p">)</span>

        <span class="c1"># Type the instance with its class</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">instance_uri</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="n">class_uri</span><span class="p">))</span>

        <span class="c1"># loop over all fieds of the instance data</span>
        <span class="k">for</span> <span class="n">field_info</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">(</span><span class="n">instance_data</span><span class="p">):</span>
            <span class="n">slot_name</span> <span class="o">=</span> <span class="n">field_info</span><span class="o">.</span><span class="n">name</span>
            <span class="c1"># assure we only work on fields defined</span>
            <span class="c1"># in our schema</span>
            <span class="n">slot_obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">slots</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">slot_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">slot_obj</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Combine the namespace with the slot name to form the field URI</span>
            <span class="n">field_uri</span> <span class="o">=</span> <span class="n">URIRef</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_uri</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">slot_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">field_value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance_data</span><span class="p">,</span> <span class="n">slot_name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

            <span class="c1"># Use value_iterator to handle different types of values</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">value_iterator</span><span class="p">(</span><span class="n">field_value</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="c1"># Handle as a mapping</span>
                    <span class="n">key_uri</span> <span class="o">=</span> <span class="n">URIRef</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">default_prefix</span><span class="p">][</span><span class="n">key</span><span class="p">])</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">instance_uri</span><span class="p">,</span> <span class="n">field_uri</span><span class="p">,</span> <span class="n">key_uri</span><span class="p">))</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">key_uri</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_to_literal</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">slot_obj</span><span class="p">))</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Handle as a single value or an item from an iterable</span>
                    <span class="c1"># Check if item has an &#39;identifier&#39; property</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span><span class="p">):</span>
                        <span class="n">item_uri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_instance_uri</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">instance_uri</span><span class="p">,</span> <span class="n">field_uri</span><span class="p">,</span> <span class="n">item_uri</span><span class="p">))</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">process_class</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
                            <span class="p">(</span>
                                <span class="n">instance_uri</span><span class="p">,</span>
                                <span class="n">field_uri</span><span class="p">,</span>
                                <span class="bp">self</span><span class="o">.</span><span class="n">convert_to_literal</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="n">slot_obj</span><span class="p">),</span>
                            <span class="p">)</span>
                        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_instance_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance_data</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a URI for an instance. If the instance has an &#39;identifier&#39; property, it uses that as part of the URI.</span>
<span class="sd">        Otherwise, it generates or retrieves a unique URI.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance_data</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span>
            <span class="n">instance_data</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span>
        <span class="p">):</span>
            <span class="n">identifier</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance_data</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">URIRef</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_uri</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">identifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># Fallback to a blank node if no identifier is found</span>
            <span class="k">return</span> <span class="n">BNode</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">convert_to_literal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">slot_obj</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts a value to an RDFLib Literal with appropriate datatype.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: The value to be converted.</span>
<span class="sd">            slot_obj: The slot object containing information about the field.</span>

<span class="sd">        Returns:</span>
<span class="sd">            An RDFLib Literal with the value and appropriate datatype.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Determine the datatype based on the Python type of the value</span>
        <span class="n">datatype</span> <span class="o">=</span> <span class="n">PythonTypes</span><span class="o">.</span><span class="n">get_rdf_datatype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

        <span class="c1"># Create and return the literal</span>
        <span class="k">return</span> <span class="n">Literal</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">datatype</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.rdf.RDFDumper.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">schema</span><span class="p">,</span> <span class="n">instance</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize the RDFDumper.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schema</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="Schema (lodstorage.linkml_gen.Schema)" href="#lodstorage.linkml.Schema">Schema</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The LinkML schema defining the structure of the data models.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>instance</code>
            </td>
            <td>
                  <code><span title="object">object</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The instance of the data model to be converted into RDF.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/rdf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schema</span><span class="p">:</span> <span class="n">Schema</span><span class="p">,</span> <span class="n">instance</span><span class="p">:</span> <span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the RDFDumper.</span>

<span class="sd">    Args:</span>
<span class="sd">        schema (Schema): The LinkML schema defining the structure of the data models.</span>
<span class="sd">        instance (object): The instance of the data model to be converted into RDF.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">schema</span> <span class="o">=</span> <span class="n">schema</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">instance</span> <span class="o">=</span> <span class="n">instance</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">graph</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">namespaces</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">prefix</span><span class="p">:</span> <span class="n">Namespace</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span> <span class="k">for</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">uri</span> <span class="ow">in</span> <span class="n">schema</span><span class="o">.</span><span class="n">prefixes</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.rdf.RDFDumper.convert_to_literal" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_to_literal</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">slot_obj</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Converts a value to an RDFLib Literal with appropriate datatype.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to be converted.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>slot_obj</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The slot object containing information about the field.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>An RDFLib Literal with the value and appropriate datatype.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/rdf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">convert_to_literal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">slot_obj</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts a value to an RDFLib Literal with appropriate datatype.</span>

<span class="sd">    Args:</span>
<span class="sd">        value: The value to be converted.</span>
<span class="sd">        slot_obj: The slot object containing information about the field.</span>

<span class="sd">    Returns:</span>
<span class="sd">        An RDFLib Literal with the value and appropriate datatype.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Determine the datatype based on the Python type of the value</span>
    <span class="n">datatype</span> <span class="o">=</span> <span class="n">PythonTypes</span><span class="o">.</span><span class="n">get_rdf_datatype</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

    <span class="c1"># Create and return the literal</span>
    <span class="k">return</span> <span class="n">Literal</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">datatype</span><span class="o">=</span><span class="n">datatype</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.rdf.RDFDumper.convert_to_rdf" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_to_rdf</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Converts the provided instance into RDF triples based on the LinkML schema.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/rdf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">convert_to_rdf</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts the provided instance into RDF triples based on the LinkML schema.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Process the instance data according to its class in the schema</span>
    <span class="n">instance_class</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span>
    <span class="k">if</span> <span class="n">instance_class</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">schema</span><span class="o">.</span><span class="n">classes</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">process_class</span><span class="p">(</span><span class="n">instance_class</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">instance</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.rdf.RDFDumper.get_instance_uri" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_instance_uri</span><span class="p">(</span><span class="n">instance_data</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Generates a URI for an instance. If the instance has an 'identifier' property, it uses that as part of the URI.
Otherwise, it generates or retrieves a unique URI.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/rdf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_instance_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance_data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generates a URI for an instance. If the instance has an &#39;identifier&#39; property, it uses that as part of the URI.</span>
<span class="sd">    Otherwise, it generates or retrieves a unique URI.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">instance_data</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">getattr</span><span class="p">(</span>
        <span class="n">instance_data</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span>
    <span class="p">):</span>
        <span class="n">identifier</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">instance_data</span><span class="p">,</span> <span class="s2">&quot;identifier&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">URIRef</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">base_uri</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">identifier</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Fallback to a blank node if no identifier is found</span>
        <span class="k">return</span> <span class="n">BNode</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.rdf.RDFDumper.serialize" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">serialize</span><span class="p">(</span><span class="n">rdf_format</span><span class="o">=</span><span class="s1">&#39;turtle&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Serializes the RDF graph into a string representation in the specified format.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The serialization format (e.g., 'turtle', 'xml', 'json-ld').</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The serialized RDF graph.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/rdf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">rdf_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;turtle&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Serializes the RDF graph into a string representation in the specified format.</span>

<span class="sd">    Args:</span>
<span class="sd">        format (str): The serialization format (e.g., &#39;turtle&#39;, &#39;xml&#39;, &#39;json-ld&#39;).</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The serialized RDF graph.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">graph</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">rdf_format</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.rdf.RDFDumper.value_iterator" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">value_iterator</span><span class="p">(</span><span class="n">value</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Iterates over values in a mapping or iterable.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>value</code>
            </td>
            <td>
                  <code><span title="typing.Any">Any</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The value to iterate over. It can be a mapping, iterable, or a single value.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Yields:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuples of (key, value) from the input value. For single values, key is None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/rdf.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">value_iterator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Iterates over values in a mapping or iterable.</span>

<span class="sd">    Args:</span>
<span class="sd">        value: The value to iterate over. It can be a mapping, iterable, or a single value.</span>

<span class="sd">    Yields:</span>
<span class="sd">        Tuples of (key, value) from the input value. For single values, key is None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">):</span>
        <span class="k">yield from</span> <span class="n">value</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)):</span>
        <span class="k">yield from</span> <span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">yield</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.rdf_format" class="doc doc-heading">
            <code>rdf_format</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2025-06-01</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.rdf_format.RdfFormat" class="doc doc-heading">
            <code>RdfFormat</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>RDF serialization formats with MIME types, file extensions, and SPARQLWrapper constants.</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/rdf_format.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">RdfFormat</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    RDF serialization formats with MIME types, file extensions, and SPARQLWrapper constants.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">TURTLE</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;turtle&quot;</span><span class="p">,</span> <span class="s2">&quot;text/turtle&quot;</span><span class="p">,</span> <span class="s2">&quot;.ttl&quot;</span><span class="p">,</span> <span class="n">TURTLE</span><span class="p">)</span>
    <span class="n">RDF_XML</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;rdf-xml&quot;</span><span class="p">,</span> <span class="s2">&quot;application/rdf+xml&quot;</span><span class="p">,</span> <span class="s2">&quot;.rdf&quot;</span><span class="p">,</span> <span class="n">RDF</span><span class="p">)</span>
    <span class="n">N3</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;n3&quot;</span><span class="p">,</span> <span class="s2">&quot;text/n3&quot;</span><span class="p">,</span> <span class="s2">&quot;.n3&quot;</span><span class="p">,</span> <span class="n">N3</span><span class="p">)</span>
    <span class="n">JSON_LD</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;json-ld&quot;</span><span class="p">,</span> <span class="s2">&quot;application/ld+json&quot;</span><span class="p">,</span> <span class="s2">&quot;.jsonld&quot;</span><span class="p">,</span> <span class="n">JSON</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">mime_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">extension</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">sparql_format</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">label</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mime_type</span> <span class="o">=</span> <span class="n">mime_type</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">extension</span> <span class="o">=</span> <span class="n">extension</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sparql_format</span> <span class="o">=</span> <span class="n">sparql_format</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">by_label</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get format by label&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">rdf_format</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rdf_format</span><span class="o">.</span><span class="n">label</span> <span class="o">==</span> <span class="n">label</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">rdf_format</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown format: </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.rdf_format.RdfFormat.by_label" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">by_label</span><span class="p">(</span><span class="n">label</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get format by label</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/rdf_format.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">by_label</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">label</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get format by label&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">rdf_format</span> <span class="ow">in</span> <span class="bp">cls</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">rdf_format</span><span class="o">.</span><span class="n">label</span> <span class="o">==</span> <span class="n">label</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">rdf_format</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Unknown format: </span><span class="si">{</span><span class="n">label</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.sample2" class="doc doc-heading">
            <code>sample2</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2024-01-21</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.sample2.Countries" class="doc doc-heading">
            <code>Countries</code>


</h3>


    <div class="doc doc-contents ">


        <p>Represents a collection of country instances.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Countries.countries">countries</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Country (lodstorage.sample2.Country)" href="#lodstorage.sample2.Country">Country</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of Country instances.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sample2.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">Countries</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a collection of country instances.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        countries (List[Country]): A list of Country instances.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">countries</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Country</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_countries_erdem</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Countries&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get Erdem Ozkol&#39;s country list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">countries_json_url</span> <span class="o">=</span> <span class="s2">&quot;https://gist.githubusercontent.com/erdem/8c7d26765831d0f9a8c62f02782ae00d/raw/248037cd701af0a4957cce340dabb0fd04e38f4c/countries.json&quot;</span>
        <span class="n">json_str</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">read_from_url</span><span class="p">(</span><span class="n">countries_json_url</span><span class="p">)</span>
        <span class="n">countries_list</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
        <span class="n">countries_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;countries&quot;</span><span class="p">:</span> <span class="n">countries_list</span><span class="p">}</span>
        <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">countries_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">instance</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_samples</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Countries&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dictionary of named samples</span>
<span class="sd">        for &#39;specification by example&#39; style</span>
<span class="sd">        requirements management.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary with keys as sample names</span>
<span class="sd">            and values as `Countries` instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;country list provided by Erdem Ozkol&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_countries_erdem</span><span class="p">()}</span>
        <span class="k">return</span> <span class="n">samples</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.sample2.Countries.get_countries_erdem" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_countries_erdem</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>get Erdem Ozkol's country list</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sample2.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_countries_erdem</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Countries&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get Erdem Ozkol&#39;s country list</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">countries_json_url</span> <span class="o">=</span> <span class="s2">&quot;https://gist.githubusercontent.com/erdem/8c7d26765831d0f9a8c62f02782ae00d/raw/248037cd701af0a4957cce340dabb0fd04e38f4c/countries.json&quot;</span>
    <span class="n">json_str</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">read_from_url</span><span class="p">(</span><span class="n">countries_json_url</span><span class="p">)</span>
    <span class="n">countries_list</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">json_str</span><span class="p">)</span>
    <span class="n">countries_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;countries&quot;</span><span class="p">:</span> <span class="n">countries_list</span><span class="p">}</span>
    <span class="n">instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">countries_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sample2.Countries.get_samples" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_samples</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Returns a dictionary of named samples
for 'specification by example' style
requirements management.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="Countries (lodstorage.sample2.Countries)" href="#lodstorage.sample2.Countries">Countries</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary with keys as sample names</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td></td>            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="Countries (lodstorage.sample2.Countries)" href="#lodstorage.sample2.Countries">Countries</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>and values as <code>Countries</code> instances.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sample2.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_samples</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Countries&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of named samples</span>
<span class="sd">    for &#39;specification by example&#39; style</span>
<span class="sd">    requirements management.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary with keys as sample names</span>
<span class="sd">        and values as `Countries` instances.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">samples</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;country list provided by Erdem Ozkol&quot;</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_countries_erdem</span><span class="p">()}</span>
    <span class="k">return</span> <span class="n">samples</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.sample2.Country" class="doc doc-heading">
            <code>Country</code>


</h3>


    <div class="doc doc-contents ">


        <p>Represents a country with its details.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Country.name">name</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the country.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Country.country_code">country_code</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The country code.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Country.capital">capital</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The capital city of the country.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Country.timezones">timezones</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of timezones in the country.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Country.latlng">latlng</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Latitude and longitude of the country.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sample2.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">Country</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a country with its details.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): The name of the country.</span>
<span class="sd">        country_code (str): The country code.</span>
<span class="sd">        capital (Optional[str]): The capital city of the country.</span>
<span class="sd">        timezones (List[str]): List of timezones in the country.</span>
<span class="sd">        latlng (List[float]): Latitude and longitude of the country.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">country_code</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">capital</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">timezones</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">latlng</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.sample2.Royal" class="doc doc-heading">
            <code>Royal</code>


</h3>


    <div class="doc doc-contents ">


        <p>Represents a member of the royal family, with various personal details.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Royal.name">name</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The full name of the royal member.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Royal.wikidata_id">wikidata_id</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Wikidata identifier associated with the royal member.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Royal.number_in_line">number_in_line</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number in line to succession, if applicable.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Royal.born_iso_date">born_iso_date</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ISO date of birth.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Royal.died_iso_date">died_iso_date</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ISO date of death, if deceased.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Royal.last_modified_iso">last_modified_iso</span></code></td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>ISO timestamp of the last modification.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Royal.age">age</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The age of the royal member.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Royal.of_age">of_age</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Indicates whether the member is of legal age.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Royal.wikidata_url">wikidata_url</span></code></td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>URL to the Wikidata page of the member.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sample2.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">Royal</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a member of the royal family, with various personal details.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        name (str): The full name of the royal member.</span>
<span class="sd">        wikidata_id (str): The Wikidata identifier associated with the royal member.</span>
<span class="sd">        number_in_line (Optional[int]): The number in line to succession, if applicable.</span>
<span class="sd">        born_iso_date (Optional[str]): The ISO date of birth.</span>
<span class="sd">        died_iso_date (Optional[str]): The ISO date of death, if deceased.</span>
<span class="sd">        last_modified_iso (str): ISO timestamp of the last modification.</span>
<span class="sd">        age (Optional[int]): The age of the royal member.</span>
<span class="sd">        of_age (Optional[bool]): Indicates whether the member is of legal age.</span>
<span class="sd">        wikidata_url (Optional[str]): URL to the Wikidata page of the member.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">wikidata_id</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">number_in_line</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">born_iso_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">died_iso_date</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">lastmodified_iso</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">of_age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">wikidata_url</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        init calculated fields</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">end_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">died</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">died</span> <span class="k">else</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">end_date</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">born</span><span class="p">)</span><span class="o">.</span><span class="n">days</span> <span class="o">/</span> <span class="mf">365.2425</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">of_age</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">18</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikidata_id</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wikidata_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://www.wikidata.org/wiki/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">wikidata_id</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">identifier</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generates a unique identifier for the Royal instance.</span>
<span class="sd">        The identifier is a combination of a slugified name and the Wikidata ID (if available).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">slugified_name</span> <span class="o">=</span> <span class="n">slugify</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">lowercase</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">regex_pattern</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;[^\w\-]&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikidata_id</span><span class="p">:</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">slugified_name</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">wikidata_id</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">slugified_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">born</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">date</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the date of birth from the ISO date string.&quot;&quot;&quot;</span>
        <span class="n">born_date</span> <span class="o">=</span> <span class="n">DateConvert</span><span class="o">.</span><span class="n">iso_date_to_datetime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">born_iso_date</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">born_date</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">died</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">date</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the date of death from the ISO date string, if available.&quot;&quot;&quot;</span>
        <span class="n">died_date</span> <span class="o">=</span> <span class="n">DateConvert</span><span class="o">.</span><span class="n">iso_date_to_datetime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">died_iso_date</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">died_date</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h4 id="lodstorage.sample2.Royal.born" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">born</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Return the date of birth from the ISO date string.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="lodstorage.sample2.Royal.died" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">died</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Return the date of death from the ISO date string, if available.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h4 id="lodstorage.sample2.Royal.identifier" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">identifier</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Generates a unique identifier for the Royal instance.
The identifier is a combination of a slugified name and the Wikidata ID (if available).</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h4 id="lodstorage.sample2.Royal.__post_init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">__post_init__</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>init calculated fields</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sample2.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    init calculated fields</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">end_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">died</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">died</span> <span class="k">else</span> <span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">end_date</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">born</span><span class="p">)</span><span class="o">.</span><span class="n">days</span> <span class="o">/</span> <span class="mf">365.2425</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">of_age</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">18</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">wikidata_id</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wikidata_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;https://www.wikidata.org/wiki/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">wikidata_id</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.sample2.Royals" class="doc doc-heading">
            <code>Royals</code>


</h3>


    <div class="doc doc-contents ">


        <p>Represents a collection of Royal family members.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="lodstorage.sample2.Royals.members">members</span></code></td>
            <td>
                  <code><span title="typing.List">List</span>[<a class="autorefs autorefs-internal" title="Royal (lodstorage.sample2.Royal)" href="#lodstorage.sample2.Royal">Royal</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of Royal family members.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sample2.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@lod_storable</span>
<span class="k">class</span> <span class="nc">Royals</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a collection of Royal family members.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        members (List[Royal]): A list of Royal family members.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">members</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Royal</span><span class="p">]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">default_factory</span><span class="o">=</span><span class="nb">list</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_samples</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Royals&quot;</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a dictionary of named samples</span>
<span class="sd">        for &#39;specification by example&#39; style</span>
<span class="sd">        requirements management.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary with keys as sample names and values as `Royals` instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;QE2 heirs up to number in line 5&quot;</span><span class="p">:</span> <span class="n">Royals</span><span class="p">(</span>
                <span class="n">members</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">Royal</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Elizabeth Alexandra Mary Windsor&quot;</span><span class="p">,</span>
                        <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;1926-04-21&quot;</span><span class="p">,</span>
                        <span class="n">died_iso_date</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                        <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q9682&quot;</span><span class="p">,</span>
                        <span class="n">number_in_line</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>  <span class="c1"># for deceased or unranked</span>
                        <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">Royal</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Charles III of the United Kingdom&quot;</span><span class="p">,</span>
                        <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;1948-11-14&quot;</span><span class="p">,</span>
                        <span class="n">number_in_line</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q43274&quot;</span><span class="p">,</span>
                        <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">Royal</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;William, Duke of Cambridge&quot;</span><span class="p">,</span>
                        <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;1982-06-21&quot;</span><span class="p">,</span>
                        <span class="n">number_in_line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                        <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q36812&quot;</span><span class="p">,</span>
                        <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">Royal</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Prince George of Wales&quot;</span><span class="p">,</span>
                        <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;2013-07-22&quot;</span><span class="p">,</span>
                        <span class="n">number_in_line</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                        <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q13590412&quot;</span><span class="p">,</span>
                        <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">Royal</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Princess Charlotte of Wales&quot;</span><span class="p">,</span>
                        <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;2015-05-02&quot;</span><span class="p">,</span>
                        <span class="n">number_in_line</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                        <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q18002970&quot;</span><span class="p">,</span>
                        <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">Royal</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Prince Louis of Wales&quot;</span><span class="p">,</span>
                        <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;2018-04-23&quot;</span><span class="p">,</span>
                        <span class="n">number_in_line</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                        <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q38668629&quot;</span><span class="p">,</span>
                        <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                    <span class="p">),</span>
                    <span class="n">Royal</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Harry Duke of Sussex&quot;</span><span class="p">,</span>
                        <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;1984-09-15&quot;</span><span class="p">,</span>
                        <span class="n">number_in_line</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                        <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q152316&quot;</span><span class="p">,</span>
                        <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                    <span class="p">),</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">samples</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.sample2.Royals.get_samples" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_samples</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Returns a dictionary of named samples
for 'specification by example' style
requirements management.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
                  <code><span title="dict">dict</span>[<span title="str">str</span>, <a class="autorefs autorefs-internal" title="Royals (lodstorage.sample2.Royals)" href="#lodstorage.sample2.Royals">Royals</a>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary with keys as sample names and values as <code>Royals</code> instances.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sample2.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_samples</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;Royals&quot;</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns a dictionary of named samples</span>
<span class="sd">    for &#39;specification by example&#39; style</span>
<span class="sd">    requirements management.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary with keys as sample names and values as `Royals` instances.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">samples</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;QE2 heirs up to number in line 5&quot;</span><span class="p">:</span> <span class="n">Royals</span><span class="p">(</span>
            <span class="n">members</span><span class="o">=</span><span class="p">[</span>
                <span class="n">Royal</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Elizabeth Alexandra Mary Windsor&quot;</span><span class="p">,</span>
                    <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;1926-04-21&quot;</span><span class="p">,</span>
                    <span class="n">died_iso_date</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                    <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q9682&quot;</span><span class="p">,</span>
                    <span class="n">number_in_line</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>  <span class="c1"># for deceased or unranked</span>
                    <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Royal</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Charles III of the United Kingdom&quot;</span><span class="p">,</span>
                    <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;1948-11-14&quot;</span><span class="p">,</span>
                    <span class="n">number_in_line</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q43274&quot;</span><span class="p">,</span>
                    <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Royal</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;William, Duke of Cambridge&quot;</span><span class="p">,</span>
                    <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;1982-06-21&quot;</span><span class="p">,</span>
                    <span class="n">number_in_line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q36812&quot;</span><span class="p">,</span>
                    <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Royal</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Prince George of Wales&quot;</span><span class="p">,</span>
                    <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;2013-07-22&quot;</span><span class="p">,</span>
                    <span class="n">number_in_line</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                    <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q13590412&quot;</span><span class="p">,</span>
                    <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Royal</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Princess Charlotte of Wales&quot;</span><span class="p">,</span>
                    <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;2015-05-02&quot;</span><span class="p">,</span>
                    <span class="n">number_in_line</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                    <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q18002970&quot;</span><span class="p">,</span>
                    <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Royal</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Prince Louis of Wales&quot;</span><span class="p">,</span>
                    <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;2018-04-23&quot;</span><span class="p">,</span>
                    <span class="n">number_in_line</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
                    <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q38668629&quot;</span><span class="p">,</span>
                    <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">Royal</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Harry Duke of Sussex&quot;</span><span class="p">,</span>
                    <span class="n">born_iso_date</span><span class="o">=</span><span class="s2">&quot;1984-09-15&quot;</span><span class="p">,</span>
                    <span class="n">number_in_line</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
                    <span class="n">wikidata_id</span><span class="o">=</span><span class="s2">&quot;Q152316&quot;</span><span class="p">,</span>
                    <span class="n">lastmodified_iso</span><span class="o">=</span><span class="s2">&quot;2022-09-08&quot;</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">]</span>
        <span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">samples</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.sample2.Sample" class="doc doc-heading">
            <code>Sample</code>


</h3>


    <div class="doc doc-contents ">


        <p>Sample dataset provider</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sample2.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Sample</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sample dataset provider</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cityList</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the given sample dataset name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;royals&quot;</span><span class="p">:</span>
            <span class="n">samples</span> <span class="o">=</span> <span class="n">Royals</span><span class="o">.</span><span class="n">get_samples</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;countries&quot;</span><span class="p">:</span>
            <span class="n">samples</span> <span class="o">=</span> <span class="n">Countries</span><span class="o">.</span><span class="n">get_samples</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown dataset name&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">samples</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getRoyalsSample</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Royals</span><span class="p">:</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="n">Royals</span><span class="o">.</span><span class="n">get_samples</span><span class="p">()</span>
        <span class="n">all_members</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">royals</span> <span class="ow">in</span> <span class="n">samples</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">all_members</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">royals</span><span class="o">.</span><span class="n">members</span><span class="p">)</span>
        <span class="n">royals</span> <span class="o">=</span> <span class="n">Royals</span><span class="p">(</span><span class="n">members</span><span class="o">=</span><span class="n">all_members</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">royals</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getSample</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get a generated sample of the given size</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">listOfDicts</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
            <span class="n">listOfDicts</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;pkey&quot;</span><span class="p">:</span> <span class="s2">&quot;index</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">index</span><span class="p">,</span> <span class="s2">&quot;cindex&quot;</span><span class="p">:</span> <span class="n">index</span><span class="p">})</span>
        <span class="k">return</span> <span class="n">listOfDicts</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getRoyals</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        compatibility for old sample module</span>
<span class="sd">        return list of dicts</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">royals_dict</span> <span class="o">=</span> <span class="n">Royals</span><span class="o">.</span><span class="n">get_samples</span><span class="p">()</span>
        <span class="n">royals</span> <span class="o">=</span> <span class="n">royals_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;QE2 heirs up to number in line 5&quot;</span><span class="p">)</span>
        <span class="n">royals_lod</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">royal</span> <span class="ow">in</span> <span class="n">royals</span><span class="o">.</span><span class="n">members</span><span class="p">:</span>
            <span class="n">record</span> <span class="o">=</span> <span class="n">royal</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
            <span class="n">royals_lod</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">royals_lod</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getCities</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get a list of city records</span>
<span class="sd">        compatibility for old sample module</span>
<span class="sd">        return list of dicts</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">Sample</span><span class="o">.</span><span class="n">cityList</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cityJsonUrl</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/lutangar/cities.json/master/cities.json&quot;</span>
            <span class="k">with</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">cityJsonUrl</span><span class="p">)</span> <span class="k">as</span> <span class="n">url</span><span class="p">:</span>
                <span class="n">Sample</span><span class="o">.</span><span class="n">cityList</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
            <span class="k">for</span> <span class="n">city</span> <span class="ow">in</span> <span class="n">Sample</span><span class="o">.</span><span class="n">cityList</span><span class="p">:</span>
                <span class="n">city</span><span class="p">[</span><span class="s2">&quot;cityId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">-</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">city</span><span class="p">[</span><span class="s2">&quot;country&quot;</span><span class="p">],</span> <span class="n">city</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">Sample</span><span class="o">.</span><span class="n">cityList</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.sample2.Sample.get" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the given sample dataset name</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sample2.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">dataset_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the given sample dataset name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">samples</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;royals&quot;</span><span class="p">:</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="n">Royals</span><span class="o">.</span><span class="n">get_samples</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">dataset_name</span> <span class="o">==</span> <span class="s2">&quot;countries&quot;</span><span class="p">:</span>
        <span class="n">samples</span> <span class="o">=</span> <span class="n">Countries</span><span class="o">.</span><span class="n">get_samples</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unknown dataset name&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">samples</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sample2.Sample.getCities" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getCities</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>get a list of city records
compatibility for old sample module
return list of dicts</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sample2.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getCities</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get a list of city records</span>
<span class="sd">    compatibility for old sample module</span>
<span class="sd">    return list of dicts</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">Sample</span><span class="o">.</span><span class="n">cityList</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">cityJsonUrl</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/lutangar/cities.json/master/cities.json&quot;</span>
        <span class="k">with</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">cityJsonUrl</span><span class="p">)</span> <span class="k">as</span> <span class="n">url</span><span class="p">:</span>
            <span class="n">Sample</span><span class="o">.</span><span class="n">cityList</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">())</span>
        <span class="k">for</span> <span class="n">city</span> <span class="ow">in</span> <span class="n">Sample</span><span class="o">.</span><span class="n">cityList</span><span class="p">:</span>
            <span class="n">city</span><span class="p">[</span><span class="s2">&quot;cityId&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">-</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">city</span><span class="p">[</span><span class="s2">&quot;country&quot;</span><span class="p">],</span> <span class="n">city</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">Sample</span><span class="o">.</span><span class="n">cityList</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sample2.Sample.getRoyals" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getRoyals</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>compatibility for old sample module
return list of dicts</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sample2.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getRoyals</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    compatibility for old sample module</span>
<span class="sd">    return list of dicts</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">royals_dict</span> <span class="o">=</span> <span class="n">Royals</span><span class="o">.</span><span class="n">get_samples</span><span class="p">()</span>
    <span class="n">royals</span> <span class="o">=</span> <span class="n">royals_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;QE2 heirs up to number in line 5&quot;</span><span class="p">)</span>
    <span class="n">royals_lod</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">royal</span> <span class="ow">in</span> <span class="n">royals</span><span class="o">.</span><span class="n">members</span><span class="p">:</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">royal</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()</span>
        <span class="n">royals_lod</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">royals_lod</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sample2.Sample.getSample" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getSample</span><span class="p">(</span><span class="n">size</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>get a generated sample of the given size</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sample2.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getSample</span><span class="p">(</span><span class="n">size</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get a generated sample of the given size</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">listOfDicts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">size</span><span class="p">):</span>
        <span class="n">listOfDicts</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s2">&quot;pkey&quot;</span><span class="p">:</span> <span class="s2">&quot;index</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">index</span><span class="p">,</span> <span class="s2">&quot;cindex&quot;</span><span class="p">:</span> <span class="n">index</span><span class="p">})</span>
    <span class="k">return</span> <span class="n">listOfDicts</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.schema" class="doc doc-heading">
            <code>schema</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2021-01-26</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.schema.Schema" class="doc doc-heading">
            <code>Schema</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>a relational Schema</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/schema.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Schema</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a relational Schema</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>

<span class="sd">        Args:</span>
<span class="sd">            name(str): the name of the schema</span>
<span class="sd">            title(str): the title of the schema</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">propsByName</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">generalizeColumn</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">colName</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        remove the column with the given name from all tables in the tablelist and</span>
<span class="sd">        return it</span>

<span class="sd">        Args:</span>
<span class="sd">            tableList(list): a list of Tables</span>
<span class="sd">            colName(string): the name of the column to generalize</span>

<span class="sd">        Returns:</span>
<span class="sd">            string: the column having been generalized and removed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gCol</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">colName</span><span class="p">:</span>
                    <span class="n">gCol</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                    <span class="c1"># no linking yet @FIXME - will need this later</span>
                    <span class="k">if</span> <span class="s2">&quot;link&quot;</span> <span class="ow">in</span> <span class="n">gCol</span><span class="p">:</span>
                        <span class="n">gCol</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">)</span>
                    <span class="c1"># is generalization protected for this column?</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;special&quot;</span> <span class="ow">in</span> <span class="n">col</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;special&quot;</span><span class="p">]:</span>
                        <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">gCol</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getGeneral</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        derive a general table from the given table list</span>
<span class="sd">        Args:</span>
<span class="sd">            tableList(list): a list of tables</span>
<span class="sd">            name(str): name of the general table</span>
<span class="sd">            debug(bool): True if column names should be shown</span>

<span class="sd">        Returns:</span>
<span class="sd">            a table dict for the generalized table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">general</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="n">colCount</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]:</span>
                <span class="n">columnId</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">columnId</span><span class="p">)</span>
                <span class="n">colCount</span><span class="p">[</span><span class="n">columnId</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">for</span> <span class="n">columnId</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">colCount</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">tableList</span><span class="p">):</span>
                <span class="n">colName</span> <span class="o">=</span> <span class="n">columnId</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">generalCol</span> <span class="o">=</span> <span class="n">Schema</span><span class="o">.</span><span class="n">generalizeColumn</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">colName</span><span class="p">)</span>
                <span class="n">general</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">generalCol</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">general</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getGeneralViewDDL</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the DDL statement to create a general view</span>

<span class="sd">        Args:</span>
<span class="sd">            tableList: the list of tables</span>
<span class="sd">            name (str): the name of the view</span>
<span class="sd">            debug (bool): True if debug should be set</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">general</span> <span class="o">=</span> <span class="n">Schema</span><span class="o">.</span><span class="n">getGeneral</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">debug</span><span class="p">)</span>
        <span class="n">cols</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">general</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]:</span>
            <span class="n">col_name</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">cols</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">delim</span><span class="si">}{</span><span class="n">col_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span>
        <span class="n">ddl</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CREATE VIEW </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> AS</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
            <span class="n">table_name</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">ddl</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">delim</span><span class="si">}</span><span class="s2">  SELECT </span><span class="si">{</span><span class="n">cols</span><span class="si">}</span><span class="s2"> FROM </span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">UNION</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">ddl</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.schema.Schema.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Constructor</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name of the schema</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the title of the schema</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/schema.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>

<span class="sd">    Args:</span>
<span class="sd">        name(str): the name of the schema</span>
<span class="sd">        title(str): the title of the schema</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">propsByName</span> <span class="o">=</span> <span class="p">{}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.schema.Schema.generalizeColumn" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">generalizeColumn</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">colName</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>remove the column with the given name from all tables in the tablelist and
return it</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tableList(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of Tables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>colName(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name of the column to generalize</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>string</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the column having been generalized and removed</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/schema.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">generalizeColumn</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">colName</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    remove the column with the given name from all tables in the tablelist and</span>
<span class="sd">    return it</span>

<span class="sd">    Args:</span>
<span class="sd">        tableList(list): a list of Tables</span>
<span class="sd">        colName(string): the name of the column to generalize</span>

<span class="sd">    Returns:</span>
<span class="sd">        string: the column having been generalized and removed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gCol</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">colName</span><span class="p">:</span>
                <span class="n">gCol</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
                <span class="c1"># no linking yet @FIXME - will need this later</span>
                <span class="k">if</span> <span class="s2">&quot;link&quot;</span> <span class="ow">in</span> <span class="n">gCol</span><span class="p">:</span>
                    <span class="n">gCol</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;link&quot;</span><span class="p">)</span>
                <span class="c1"># is generalization protected for this column?</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;special&quot;</span> <span class="ow">in</span> <span class="n">col</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;special&quot;</span><span class="p">]:</span>
                    <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">gCol</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.schema.Schema.getGeneral" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getGeneral</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>derive a general table from the given table list
Args:
    tableList(list): a list of tables
    name(str): name of the general table
    debug(bool): True if column names should be shown</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a table dict for the generalized table</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/schema.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getGeneral</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    derive a general table from the given table list</span>
<span class="sd">    Args:</span>
<span class="sd">        tableList(list): a list of tables</span>
<span class="sd">        name(str): name of the general table</span>
<span class="sd">        debug(bool): True if column names should be shown</span>

<span class="sd">    Returns:</span>
<span class="sd">        a table dict for the generalized table</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">general</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;columns&quot;</span><span class="p">:</span> <span class="p">[]}</span>
    <span class="n">colCount</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]:</span>
            <span class="n">columnId</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">.</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">columnId</span><span class="p">)</span>
            <span class="n">colCount</span><span class="p">[</span><span class="n">columnId</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">columnId</span><span class="p">,</span> <span class="n">count</span> <span class="ow">in</span> <span class="n">colCount</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">tableList</span><span class="p">):</span>
            <span class="n">colName</span> <span class="o">=</span> <span class="n">columnId</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">generalCol</span> <span class="o">=</span> <span class="n">Schema</span><span class="o">.</span><span class="n">generalizeColumn</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">colName</span><span class="p">)</span>
            <span class="n">general</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">generalCol</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">general</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.schema.Schema.getGeneralViewDDL" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getGeneralViewDDL</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>get the DDL statement to create a general view</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tableList</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of tables</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name of the view</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if debug should be set</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/schema.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">getGeneralViewDDL</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the DDL statement to create a general view</span>

<span class="sd">    Args:</span>
<span class="sd">        tableList: the list of tables</span>
<span class="sd">        name (str): the name of the view</span>
<span class="sd">        debug (bool): True if debug should be set</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">general</span> <span class="o">=</span> <span class="n">Schema</span><span class="o">.</span><span class="n">getGeneral</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">debug</span><span class="p">)</span>
    <span class="n">cols</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">general</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]:</span>
        <span class="n">col_name</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">cols</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">delim</span><span class="si">}{</span><span class="n">col_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span>
    <span class="n">ddl</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;CREATE VIEW </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> AS</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
        <span class="n">table_name</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">ddl</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">delim</span><span class="si">}</span><span class="s2">  SELECT </span><span class="si">{</span><span class="n">cols</span><span class="si">}</span><span class="s2"> FROM </span><span class="si">{</span><span class="n">table_name</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">UNION</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">ddl</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.schema.SchemaManager" class="doc doc-heading">
            <code>SchemaManager</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>a manager for schemas</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/schema.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SchemaManager</span><span class="p">(</span>
    <span class="nb">object</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a manager for schemas</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schemaDefs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">baseUrl</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        constructor</span>
<span class="sd">            Args:</span>
<span class="sd">                schemaDefs(dict): a dictionary of schema names</span>
<span class="sd">                baseUrl(str): the base url to use for links</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">baseUrl</span> <span class="o">=</span> <span class="n">baseUrl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schemasByName</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">schemaDefs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">schemaDefs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">schemaDefs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">schemasByName</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">Schema</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.schema.SchemaManager.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">schemaDefs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">baseUrl</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>constructor
    Args:
        schemaDefs(dict): a dictionary of schema names
        baseUrl(str): the base url to use for links</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/schema.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">schemaDefs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">baseUrl</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    constructor</span>
<span class="sd">        Args:</span>
<span class="sd">            schemaDefs(dict): a dictionary of schema names</span>
<span class="sd">            baseUrl(str): the base url to use for links</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">baseUrl</span> <span class="o">=</span> <span class="n">baseUrl</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">schemasByName</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="n">schemaDefs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">schemaDefs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">schemaDefs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">schemasByName</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">Schema</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.sparql" class="doc doc-heading">
            <code>sparql</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2020-08-14</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.sparql.SPARQL" class="doc doc-heading">
            <code>SPARQL</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>wrapper for SPARQL e.g. Apache Jena, Virtuoso, Blazegraph</p>
<p>:ivar url: full endpoint url (including mode)
:ivar mode: 'query' or 'update'
:ivar debug: True if debugging is active
:ivar typedLiterals: True if INSERT should be done with typedLiterals
:ivar profile(boolean): True if profiling / timing information should be displayed
:ivar sparql: the SPARQLWrapper2 instance to be used
:ivar method(str): the HTTP method to be used 'POST' or 'GET'</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sparql.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SPARQL</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    wrapper for SPARQL e.g. Apache Jena, Virtuoso, Blazegraph</span>

<span class="sd">    :ivar url: full endpoint url (including mode)</span>
<span class="sd">    :ivar mode: &#39;query&#39; or &#39;update&#39;</span>
<span class="sd">    :ivar debug: True if debugging is active</span>
<span class="sd">    :ivar typedLiterals: True if INSERT should be done with typedLiterals</span>
<span class="sd">    :ivar profile(boolean): True if profiling / timing information should be displayed</span>
<span class="sd">    :ivar sparql: the SPARQLWrapper2 instance to be used</span>
<span class="sd">    :ivar method(str): the HTTP method to be used &#39;POST&#39; or &#39;GET&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;query&quot;</span><span class="p">,</span>
        <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">isFuseki</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">typedLiterals</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">agent</span><span class="o">=</span><span class="s2">&quot;PyLodStorage&quot;</span><span class="p">,</span>
        <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
        <span class="n">calls_per_minute</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construct a SPARQL wrapper</span>

<span class="sd">        Args:</span>
<span class="sd">            url (string): the base URL of the endpoint - the mode query/update is going to be appended</span>
<span class="sd">            mode (string): &#39;query&#39; or &#39;update&#39;</span>
<span class="sd">            debug (bool): True if debugging is to be activated</span>
<span class="sd">            typedLiterals (bool): True if INSERT should be done with typedLiterals</span>
<span class="sd">            profile (boolean): True if profiling / timing information should be displayed</span>
<span class="sd">            agent (string): the User agent to use</span>
<span class="sd">            method (string): the HTTP method to be used &#39;POST&#39; or &#39;GET&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">isFuseki</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">typedLiterals</span> <span class="o">=</span> <span class="n">typedLiterals</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span> <span class="o">=</span> <span class="n">SPARQLWrapper2</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">method</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">agent</span> <span class="o">=</span> <span class="n">agent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rate_limiter</span> <span class="o">=</span> <span class="n">RateLimiter</span><span class="p">(</span><span class="n">calls_per_minute</span><span class="o">=</span><span class="n">calls_per_minute</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">fromEndpointConf</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">endpointConf</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SPARQL&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create a SPARQL endpoint from the given EndpointConfiguration</span>

<span class="sd">        Args:</span>
<span class="sd">            endpointConf (Endpoint): the endpoint configuration to be used</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">endpointConf</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;endpointConf must be specified&quot;</span><span class="p">)</span>
        <span class="n">sparql</span> <span class="o">=</span> <span class="n">SPARQL</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">endpointConf</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span>
            <span class="n">method</span><span class="o">=</span><span class="n">endpointConf</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
            <span class="n">calls_per_minute</span><span class="o">=</span><span class="n">endpointConf</span><span class="o">.</span><span class="n">calls_per_minute</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">endpointConf</span><span class="p">,</span> <span class="s2">&quot;auth&quot;</span><span class="p">):</span>
            <span class="n">authMethod</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">auth</span> <span class="o">==</span> <span class="s2">&quot;BASIC&quot;</span><span class="p">:</span>
                <span class="n">authMethod</span> <span class="o">=</span> <span class="s2">&quot;BASIC&quot;</span>
            <span class="k">elif</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">auth</span> <span class="o">==</span> <span class="s2">&quot;DIGEST&quot;</span><span class="p">:</span>
                <span class="n">authMethod</span> <span class="o">=</span> <span class="s2">&quot;DIGEST&quot;</span>
            <span class="n">sparql</span><span class="o">.</span><span class="n">addAuthentication</span><span class="p">(</span>
                <span class="n">endpointConf</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">authMethod</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">sparql</span>

    <span class="k">def</span> <span class="nf">addAuthentication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;BASIC&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add Http Authentication credentials to the sparql wrapper</span>
<span class="sd">        Args:</span>
<span class="sd">            username: name of the user</span>
<span class="sd">            password: password of the user</span>
<span class="sd">            method: HTTP Authentication method</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">setHTTPAuth</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">username</span> <span class="ow">and</span> <span class="n">password</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">setCredentials</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">test_query</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">query</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;SELECT * WHERE { ?s ?p ?o } LIMIT 1&quot;</span><span class="p">,</span>
        <span class="n">expected_bindings</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the SPARQL endpoint is available using a standard SPARQL query.</span>

<span class="sd">        Args:</span>
<span class="sd">            query (str): the SPARQL query to use for testing</span>

<span class="sd">        Returns:</span>
<span class="sd">            Exception if the endpoint fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">query_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawQuery</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
            <span class="n">bindings</span> <span class="o">=</span> <span class="n">query_result</span><span class="o">.</span><span class="n">bindings</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">bindings</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_bindings</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;SPARQL query </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2"> returned </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">bindings</span><span class="p">)</span><span class="si">}</span><span class="s2"> bindings instead of </span><span class="si">{</span><span class="n">expected_bindings</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">ex</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">post_query_direct</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">rdf_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;n3&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Fetch raw RDF response via direct HTTP POST.</span>

<span class="sd">        Args:</span>
<span class="sd">            query: SPARQL CONSTRUCT query</span>
<span class="sd">            rdf_format: RDF format label (e.g. &#39;turtle&#39;, &#39;rdf-xml&#39;, &#39;json-ld&#39;, &#39;n3&#39;)</span>
<span class="sd">            timeout: timeout in seconds (default: 60)</span>

<span class="sd">        Returns:</span>
<span class="sd">            Raw RDF content as string</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception if HTTP request fails</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rdf_format</span> <span class="o">=</span> <span class="n">RdfFormat</span><span class="o">.</span><span class="n">by_label</span><span class="p">(</span><span class="n">rdf_format</span><span class="p">)</span>
        <span class="n">mime_type</span> <span class="o">=</span> <span class="n">rdf_format</span><span class="o">.</span><span class="n">mime_type</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="n">mime_type</span><span class="p">}</span>
        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
            <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">},</span>
            <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;HTTP </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">text</span>

    <span class="k">def</span> <span class="nf">rawQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queryString</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">POST</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query with the given query string</span>

<span class="sd">        Args:</span>
<span class="sd">            queryString(str): the SPARQL query to be performed</span>
<span class="sd">            method(str): POST or GET - POST is mandatory for update queries</span>
<span class="sd">        Returns:</span>
<span class="sd">            list: the raw query result as bindings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">queryString</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fix_comments</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">setQuery</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">method</span>
        <span class="n">bindings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">bindings</span>

    <span class="k">def</span> <span class="nf">fix_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        make sure broken SPARQLWrapper will find comments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">query_string</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="s2">&quot;#</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">query_string</span>

    <span class="k">def</span> <span class="nf">getValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sparqlQuery</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the value for the given SPARQL query using the given attr</span>

<span class="sd">        Args:</span>
<span class="sd">            sparql(SPARQL): the SPARQL endpoint to ge the value for</span>
<span class="sd">            sparqlQuery(str): the SPARQL query to run</span>
<span class="sd">            attr(str): the attribute to get</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">sparqlQuery</span><span class="p">)</span>
        <span class="n">qLod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryAsListOfDicts</span><span class="p">(</span><span class="n">sparqlQuery</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFirst</span><span class="p">(</span><span class="n">qLod</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sparqlQuery</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attrList</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get Values for the given sparlQuery and attribute list</span>

<span class="sd">        Args:</span>
<span class="sd">            sparqlQuery(str): the query which did not return any values</span>
<span class="sd">            attrList(list): the list of attributes</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">sparqlQuery</span><span class="p">)</span>
        <span class="n">qLod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryAsListOfDicts</span><span class="p">(</span><span class="n">sparqlQuery</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">qLod</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;getValues for </span><span class="si">{</span><span class="n">attrList</span><span class="si">}</span><span class="s2"> failed for </span><span class="si">{</span><span class="n">qLod</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">record</span> <span class="o">=</span> <span class="n">qLod</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">()</span>
        <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrList</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;getValues failed for attribute </span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2"> which is missing in result record </span><span class="si">{</span><span class="n">record</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="n">recordTuple</span> <span class="o">=</span> <span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="n">attr</span><span class="p">],)</span>
            <span class="n">values</span> <span class="o">+=</span> <span class="n">recordTuple</span>
        <span class="k">return</span> <span class="n">values</span>

    <span class="k">def</span> <span class="nf">getFirst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qLod</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the column attr of the first row of the given qLod list</span>

<span class="sd">        Args:</span>
<span class="sd">            qLod(list): the list of dicts (returned by a query)</span>
<span class="sd">            attr(str): the attribute to retrieve</span>

<span class="sd">        Returns:</span>
<span class="sd">            object: the value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qLod</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">qLod</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">qLod</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">attr</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;getFirst for attribute </span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2"> failed for </span><span class="si">{</span><span class="n">qLod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jsonResult</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the result from the given jsonResult</span>

<span class="sd">        Args:</span>
<span class="sd">            jsonResult: the JSON encoded result</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: the list of bindings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">jsonResult</span><span class="o">.</span><span class="n">bindings</span>

    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">insertCommand</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        run an insert</span>

<span class="sd">        Args:</span>
<span class="sd">            insertCommand(string): the SPARQL INSERT command</span>

<span class="sd">        Returns:</span>
<span class="sd">            a response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">setRequestMethod</span><span class="p">(</span><span class="n">POSTDIRECTLY</span><span class="p">)</span>
        <span class="n">response</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">exception</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawQuery</span><span class="p">(</span><span class="n">insertCommand</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">POST</span><span class="p">)</span>
            <span class="c1"># see https://github.com/RDFLib/sparqlwrapper/issues/159#issuecomment-674523696</span>
            <span class="c1"># dummy read the body</span>
            <span class="n">response</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">exception</span> <span class="o">=</span> <span class="n">ex</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span><span class="p">,</span> <span class="n">exception</span>

    <span class="k">def</span> <span class="nf">getLocalName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        retrieve valid localname from a string based primary key</span>
<span class="sd">        https://www.w3.org/TR/sparql11-query/#prefNames</span>

<span class="sd">        Args:</span>
<span class="sd">            name(string): the name to convert</span>

<span class="sd">        Returns:</span>
<span class="sd">            string: a valid local name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">localName</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ch</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">name</span> <span class="k">if</span> <span class="n">ch</span><span class="o">.</span><span class="n">isalnum</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">localName</span>

    <span class="k">def</span> <span class="nf">insertListOfDicts</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">listOfDicts</span><span class="p">,</span>
        <span class="n">entityType</span><span class="p">,</span>
        <span class="n">primaryKey</span><span class="p">,</span>
        <span class="n">prefixes</span><span class="p">,</span>
        <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">batchSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        insert the given list of dicts mapping datatypes</span>

<span class="sd">        Args:</span>
<span class="sd">            entityType(string): the entityType to use as a</span>
<span class="sd">            primaryKey(string): the name of the primary key attribute to use</span>
<span class="sd">            prefix(string): any PREFIX statements to be used</span>
<span class="sd">            limit(int): maximum number of records to insert</span>
<span class="sd">            batchSize(int): number of records to send per request</span>

<span class="sd">        Return:</span>
<span class="sd">            a list of errors which should be empty on full success</span>

<span class="sd">        datatype maping according to</span>
<span class="sd">        https://www.w3.org/TR/xmlschema-2/#built-in-datatypes</span>

<span class="sd">        mapped from</span>
<span class="sd">        https://docs.python.org/3/library/stdtypes.html</span>

<span class="sd">        compare to</span>
<span class="sd">        https://www.w3.org/2001/sw/rdb2rdf/directGraph/</span>
<span class="sd">        http://www.bobdc.com/blog/json2rdf/</span>
<span class="sd">        https://www.w3.org/TR/json-ld11-api/#data-round-tripping</span>
<span class="sd">        https://stackoverflow.com/questions/29030231/json-to-rdf-xml-file-in-python</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">listOfDicts</span> <span class="o">=</span> <span class="n">listOfDicts</span><span class="p">[:</span><span class="n">limit</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">batchSize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">insertListOfDictsBatch</span><span class="p">(</span>
                <span class="n">listOfDicts</span><span class="p">,</span> <span class="n">entityType</span><span class="p">,</span> <span class="n">primaryKey</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="n">total</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1"># store the list in batches</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="n">batchSize</span><span class="p">):</span>
                <span class="n">recordBatch</span> <span class="o">=</span> <span class="n">listOfDicts</span><span class="p">[</span><span class="n">i</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="n">batchSize</span><span class="p">]</span>
                <span class="n">batchErrors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">insertListOfDictsBatch</span><span class="p">(</span>
                    <span class="n">recordBatch</span><span class="p">,</span>
                    <span class="n">entityType</span><span class="p">,</span>
                    <span class="n">primaryKey</span><span class="p">,</span>
                    <span class="n">prefixes</span><span class="p">,</span>
                    <span class="n">batchIndex</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
                    <span class="n">total</span><span class="o">=</span><span class="n">total</span><span class="p">,</span>
                    <span class="n">startTime</span><span class="o">=</span><span class="n">startTime</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">batchErrors</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;insertListOfDicts for </span><span class="si">%9d</span><span class="s2"> records in </span><span class="si">%6.1f</span><span class="s2"> secs&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">),</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">),</span>
                    <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">errors</span>

    <span class="k">def</span> <span class="nf">insertListOfDictsBatch</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">listOfDicts</span><span class="p">,</span>
        <span class="n">entityType</span><span class="p">,</span>
        <span class="n">primaryKey</span><span class="p">,</span>
        <span class="n">prefixes</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;batch&quot;</span><span class="p">,</span>
        <span class="n">batchIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">total</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">startTime</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        insert a Batch part of listOfDicts</span>

<span class="sd">        Args:</span>
<span class="sd">            entityType(string): the entityType to use as a</span>
<span class="sd">            primaryKey(string): the name of the primary key attribute to use</span>
<span class="sd">            prefix(string): any PREFIX statements to be used</span>
<span class="sd">            title(string): the title to display for the profiling (if any)</span>
<span class="sd">            batchIndex(int): the start index of the current batch</span>
<span class="sd">            total(int): the total number of records for all batches</span>
<span class="sd">            starttime(datetime): the start of the batch processing</span>

<span class="sd">        Return:</span>
<span class="sd">            a list of errors which should be empty on full success</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">batchIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">batchIndex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">batchStartTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">startTime</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">startTime</span> <span class="o">=</span> <span class="n">batchStartTime</span>
        <span class="n">rdfprefix</span> <span class="o">=</span> <span class="s2">&quot;PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">insertCommand</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rdfprefix</span><span class="si">}{</span><span class="n">prefixes</span><span class="si">}</span><span class="se">\n</span><span class="s2">INSERT DATA </span><span class="se">{{\n</span><span class="s2">&quot;</span>
        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">record</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">primaryKey</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;missing primary key </span><span class="si">{</span><span class="n">primaryKey</span><span class="si">}</span><span class="s2"> in record </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">primaryValue</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">primaryKey</span><span class="p">]</span>
                <span class="k">if</span> <span class="n">primaryValue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;primary key </span><span class="si">{</span><span class="n">primaryKey</span><span class="si">}</span><span class="s2"> value is None in record </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">encodedPrimaryValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLocalName</span><span class="p">(</span><span class="n">primaryValue</span><span class="p">)</span>
                    <span class="n">tSubject</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">entityType</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">encodedPrimaryValue</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">insertCommand</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  </span><span class="si">{</span><span class="n">tSubject</span><span class="si">}</span><span class="s1"> rdf:type &quot;</span><span class="si">{</span><span class="n">entityType</span><span class="si">}</span><span class="s1">&quot;.</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">for</span> <span class="n">keyValue</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                        <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">keyValue</span>
                        <span class="c1"># convert key if necessary</span>
                        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLocalName</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                        <span class="n">valueType</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">valueType</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
                        <span class="n">tPredicate</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">entityType</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span>
                        <span class="n">tObject</span> <span class="o">=</span> <span class="n">value</span>
                        <span class="k">if</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                            <span class="n">escapedString</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">controlEscape</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                            <span class="n">tObject</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">escapedString</span>
                        <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">typedLiterals</span><span class="p">:</span>
                                <span class="n">tObject</span> <span class="o">=</span> <span class="p">(</span>
                                    <span class="s1">&#39;&quot;</span><span class="si">%d</span><span class="s1">&quot;^^&lt;http://www.w3.org/2001/XMLSchema#integer&gt;&#39;</span>
                                    <span class="o">%</span> <span class="n">value</span>
                                <span class="p">)</span>
                            <span class="k">pass</span>
                        <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">float</span><span class="p">:</span>
                            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">typedLiterals</span><span class="p">:</span>
                                <span class="n">tObject</span> <span class="o">=</span> <span class="p">(</span>
                                    <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;^^&lt;http://www.w3.org/2001/XMLSchema#decimal&gt;&#39;</span>
                                    <span class="o">%</span> <span class="n">value</span>
                                <span class="p">)</span>
                            <span class="k">pass</span>
                        <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
                            <span class="k">pass</span>
                        <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
                            <span class="c1"># if self.typedLiterals:</span>
                            <span class="n">tObject</span> <span class="o">=</span> <span class="p">(</span>
                                <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;^^&lt;http://www.w3.org/2001/XMLSchema#date&gt;&#39;</span> <span class="o">%</span> <span class="n">value</span>
                            <span class="p">)</span>
                            <span class="k">pass</span>
                        <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
                            <span class="n">tObject</span> <span class="o">=</span> <span class="p">(</span>
                                <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;&#39;</span>
                                <span class="o">%</span> <span class="n">value</span>
                            <span class="p">)</span>
                            <span class="k">pass</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                                <span class="s2">&quot;can&#39;t handle type </span><span class="si">%s</span><span class="s2"> in record </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">valueType</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
                            <span class="p">)</span>
                            <span class="n">tObject</span> <span class="o">=</span> <span class="kc">None</span>
                        <span class="k">if</span> <span class="n">tObject</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">insertRecord</span> <span class="o">=</span> <span class="s2">&quot;  </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">tSubject</span><span class="p">,</span>
                                <span class="n">tPredicate</span><span class="p">,</span>
                                <span class="n">tObject</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="n">insertCommand</span> <span class="o">+=</span> <span class="n">insertRecord</span>
        <span class="n">insertCommand</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">}&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">insertCommand</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">response</span><span class="p">,</span> <span class="n">ex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">insertCommand</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> for record </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">),</span> <span class="n">index</span><span class="p">))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%7s</span><span class="s2"> for </span><span class="si">%9d</span><span class="s2"> - </span><span class="si">%9d</span><span class="s2"> of </span><span class="si">%9d</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%6.1f</span><span class="s2"> s -&gt; </span><span class="si">%6.1f</span><span class="s2"> s&quot;</span>
                <span class="o">%</span> <span class="p">(</span>
                    <span class="n">title</span><span class="p">,</span>
                    <span class="n">batchIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">batchIndex</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span>
                    <span class="n">total</span><span class="p">,</span>
                    <span class="n">entityType</span><span class="p">,</span>
                    <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">batchStartTime</span><span class="p">,</span>
                    <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">errors</span>

    <span class="n">controlChars</span> <span class="o">=</span> <span class="p">[</span><span class="nb">chr</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mh">0x20</span><span class="p">)]</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">controlEscape</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        escape control characters</span>

<span class="sd">        see https://stackoverflow.com/a/9778992/1497139</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">escaped</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="p">(</span>
                    <span class="n">c</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;unicode_escape&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">SPARQL</span><span class="o">.</span><span class="n">controlChars</span>
                    <span class="k">else</span> <span class="n">c</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span>
            <span class="p">]</span>
        <span class="p">)</span>
        <span class="n">escaped</span> <span class="o">=</span> <span class="n">escaped</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">escaped</span>

    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queryString</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">POST</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get a list of results for the given query</span>

<span class="sd">        Args:</span>
<span class="sd">            queryString(string): the SPARQL query to execute</span>
<span class="sd">            method(string): the method eg. POST to use</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: list of bindings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">queryResult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawQuery</span><span class="p">(</span><span class="n">queryString</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">queryResult</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;content-type&quot;</span> <span class="ow">in</span> <span class="n">queryResult</span><span class="o">.</span><span class="n">info</span><span class="p">():</span>
                <span class="n">ct</span> <span class="o">=</span> <span class="n">queryResult</span><span class="o">.</span><span class="n">info</span><span class="p">()[</span><span class="s2">&quot;content-type&quot;</span><span class="p">]</span>
                <span class="k">if</span> <span class="s2">&quot;text/html&quot;</span> <span class="ow">in</span> <span class="n">ct</span><span class="p">:</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">queryResult</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;Success&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> failed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="n">jsonResult</span> <span class="o">=</span> <span class="n">queryResult</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getResults</span><span class="p">(</span><span class="n">jsonResult</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">queryAsListOfDicts</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">queryString</span><span class="p">,</span>
        <span class="n">fixNone</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">sampleCount</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">param_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a list of dicts for the given query (to allow round-trip results for insertListOfDicts)</span>

<span class="sd">        Args:</span>
<span class="sd">            queryString (str): the SPARQL query to execute</span>
<span class="sd">            fixNone (bool): if True add None values for empty columns in Dict</span>
<span class="sd">            sampleCount (int): the number of samples to check</span>
<span class="sd">            param_dict (dict): dictionary of parameter names and values to be applied to the query</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: a list of Dicts</span>

<span class="sd">        Raises:</span>
<span class="sd">            Exception: If the query requires parameters but they are not provided</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="n">Params</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span>
        <span class="n">queryString</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">apply_parameters_with_check</span><span class="p">(</span><span class="n">param_dict</span><span class="p">)</span>

        <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">queryString</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
        <span class="n">listOfDicts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">asListOfDicts</span><span class="p">(</span>
            <span class="n">records</span><span class="p">,</span> <span class="n">fixNone</span><span class="o">=</span><span class="n">fixNone</span><span class="p">,</span> <span class="n">sampleCount</span><span class="o">=</span><span class="n">sampleCount</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">listOfDicts</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">strToDatetime</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert a string to a datetime</span>
<span class="sd">        Args:</span>
<span class="sd">            value(str): the value to convert</span>
<span class="sd">        Returns:</span>
<span class="sd">            datetime: the datetime</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dateFormat</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;T&quot;</span> <span class="ow">in</span> <span class="n">value</span> <span class="ow">and</span> <span class="s2">&quot;Z&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="n">dateFormat</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%SZ&quot;</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dateFormat</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">dt</span>

    <span class="k">def</span> <span class="nf">asListOfDicts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">,</span> <span class="n">fixNone</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">sampleCount</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert SPARQL result back to python native</span>

<span class="sd">        Args:</span>
<span class="sd">            record(list): the list of bindings</span>
<span class="sd">            fixNone(bool): if True add None values for empty columns in Dict</span>
<span class="sd">            sampleCount(int): the number of samples to check</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: a list of Dicts</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resultList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">fixNone</span><span class="p">:</span>
            <span class="n">fields</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">getFields</span><span class="p">(</span><span class="n">records</span><span class="p">,</span> <span class="n">sampleCount</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
            <span class="n">resultDict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">keyValue</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">keyValue</span>
                <span class="n">datatype</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">datatype</span>
                <span class="k">if</span> <span class="n">datatype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#integer&quot;</span><span class="p">:</span>
                        <span class="n">resultValue</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#decimal&quot;</span><span class="p">:</span>
                        <span class="n">resultValue</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#boolean&quot;</span><span class="p">:</span>
                        <span class="n">resultValue</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;TRUE&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">]</span>
                    <span class="k">elif</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#date&quot;</span><span class="p">:</span>
                        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
                        <span class="n">resultValue</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
                    <span class="k">elif</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#dateTime&quot;</span><span class="p">:</span>
                        <span class="n">dt</span> <span class="o">=</span> <span class="n">SPARQL</span><span class="o">.</span><span class="n">strToDatetime</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
                        <span class="n">resultValue</span> <span class="o">=</span> <span class="n">dt</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># unsupported datatype</span>
                        <span class="n">resultValue</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">resultValue</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
                <span class="n">resultDict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">resultValue</span>
            <span class="k">if</span> <span class="n">fixNone</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">resultDict</span><span class="p">:</span>
                        <span class="n">resultDict</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">resultList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resultDict</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resultList</span>

    <span class="k">def</span> <span class="nf">printErrors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        print the given list of errors</span>

<span class="sd">        Args:</span>
<span class="sd">            errors(list): a list of error strings</span>

<span class="sd">        Returns:</span>
<span class="sd">            boolean: True if the list is empty else false</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ERRORS:&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">errors</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">stderr</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;query&#39;</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">isFuseki</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">typedLiterals</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">agent</span><span class="o">=</span><span class="s1">&#39;PyLodStorage&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;POST&#39;</span><span class="p">,</span> <span class="n">calls_per_minute</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Construct a SPARQL wrapper</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>url</code>
            </td>
            <td>
                  <code><span title="string">string</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the base URL of the endpoint - the mode query/update is going to be appended</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>mode</code>
            </td>
            <td>
                  <code><span title="string">string</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>'query' or 'update'</p>
              </div>
            </td>
            <td>
                  <code>&#39;query&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if debugging is to be activated</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>typedLiterals</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if INSERT should be done with typedLiterals</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>profile</code>
            </td>
            <td>
                  <code><span title="boolean">boolean</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if profiling / timing information should be displayed</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>agent</code>
            </td>
            <td>
                  <code><span title="string">string</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the User agent to use</p>
              </div>
            </td>
            <td>
                  <code>&#39;PyLodStorage&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>method</code>
            </td>
            <td>
                  <code><span title="string">string</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the HTTP method to be used 'POST' or 'GET'</p>
              </div>
            </td>
            <td>
                  <code>&#39;POST&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;query&quot;</span><span class="p">,</span>
    <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">isFuseki</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">typedLiterals</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">agent</span><span class="o">=</span><span class="s2">&quot;PyLodStorage&quot;</span><span class="p">,</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
    <span class="n">calls_per_minute</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct a SPARQL wrapper</span>

<span class="sd">    Args:</span>
<span class="sd">        url (string): the base URL of the endpoint - the mode query/update is going to be appended</span>
<span class="sd">        mode (string): &#39;query&#39; or &#39;update&#39;</span>
<span class="sd">        debug (bool): True if debugging is to be activated</span>
<span class="sd">        typedLiterals (bool): True if INSERT should be done with typedLiterals</span>
<span class="sd">        profile (boolean): True if profiling / timing information should be displayed</span>
<span class="sd">        agent (string): the User agent to use</span>
<span class="sd">        method (string): the HTTP method to be used &#39;POST&#39; or &#39;GET&#39;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">isFuseki</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">mode</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">typedLiterals</span> <span class="o">=</span> <span class="n">typedLiterals</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span> <span class="o">=</span> <span class="n">SPARQLWrapper2</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">method</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">agent</span> <span class="o">=</span> <span class="n">agent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">rate_limiter</span> <span class="o">=</span> <span class="n">RateLimiter</span><span class="p">(</span><span class="n">calls_per_minute</span><span class="o">=</span><span class="n">calls_per_minute</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.addAuthentication" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">addAuthentication</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;BASIC&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Add Http Authentication credentials to the sparql wrapper
Args:
    username: name of the user
    password: password of the user
    method: HTTP Authentication method</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">addAuthentication</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;BASIC&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Add Http Authentication credentials to the sparql wrapper</span>
<span class="sd">    Args:</span>
<span class="sd">        username: name of the user</span>
<span class="sd">        password: password of the user</span>
<span class="sd">        method: HTTP Authentication method</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">method</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">setHTTPAuth</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">username</span> <span class="ow">and</span> <span class="n">password</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">setCredentials</span><span class="p">(</span><span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.asListOfDicts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">asListOfDicts</span><span class="p">(</span><span class="n">records</span><span class="p">,</span> <span class="n">fixNone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sampleCount</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>convert SPARQL result back to python native</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>record(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of bindings</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fixNone(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True add None values for empty columns in Dict</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sampleCount(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the number of samples to check</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of Dicts</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">asListOfDicts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">records</span><span class="p">,</span> <span class="n">fixNone</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">sampleCount</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert SPARQL result back to python native</span>

<span class="sd">    Args:</span>
<span class="sd">        record(list): the list of bindings</span>
<span class="sd">        fixNone(bool): if True add None values for empty columns in Dict</span>
<span class="sd">        sampleCount(int): the number of samples to check</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: a list of Dicts</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resultList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">fields</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">fixNone</span><span class="p">:</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="n">LOD</span><span class="o">.</span><span class="n">getFields</span><span class="p">(</span><span class="n">records</span><span class="p">,</span> <span class="n">sampleCount</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
        <span class="n">resultDict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">keyValue</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">keyValue</span>
            <span class="n">datatype</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">datatype</span>
            <span class="k">if</span> <span class="n">datatype</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#integer&quot;</span><span class="p">:</span>
                    <span class="n">resultValue</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#decimal&quot;</span><span class="p">:</span>
                    <span class="n">resultValue</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#boolean&quot;</span><span class="p">:</span>
                    <span class="n">resultValue</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;TRUE&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">]</span>
                <span class="k">elif</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#date&quot;</span><span class="p">:</span>
                    <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">resultValue</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">datatype</span> <span class="o">==</span> <span class="s2">&quot;http://www.w3.org/2001/XMLSchema#dateTime&quot;</span><span class="p">:</span>
                    <span class="n">dt</span> <span class="o">=</span> <span class="n">SPARQL</span><span class="o">.</span><span class="n">strToDatetime</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>
                    <span class="n">resultValue</span> <span class="o">=</span> <span class="n">dt</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># unsupported datatype</span>
                    <span class="n">resultValue</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">resultValue</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
            <span class="n">resultDict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">resultValue</span>
        <span class="k">if</span> <span class="n">fixNone</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">resultDict</span><span class="p">:</span>
                    <span class="n">resultDict</span><span class="p">[</span><span class="n">field</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">resultList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">resultDict</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resultList</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.controlEscape" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">controlEscape</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>escape control characters</p>
<p>see https://stackoverflow.com/a/9778992/1497139</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">controlEscape</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    escape control characters</span>

<span class="sd">    see https://stackoverflow.com/a/9778992/1497139</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">escaped</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="p">(</span>
                <span class="n">c</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;unicode_escape&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">SPARQL</span><span class="o">.</span><span class="n">controlChars</span>
                <span class="k">else</span> <span class="n">c</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">s</span>
        <span class="p">]</span>
    <span class="p">)</span>
    <span class="n">escaped</span> <span class="o">=</span> <span class="n">escaped</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&quot;&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">escaped</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.fix_comments" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fix_comments</span><span class="p">(</span><span class="n">query_string</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>make sure broken SPARQLWrapper will find comments</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fix_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query_string</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    make sure broken SPARQLWrapper will find comments</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">query_string</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="s2">&quot;#</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">query_string</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.fromEndpointConf" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fromEndpointConf</span><span class="p">(</span><span class="n">endpointConf</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>create a SPARQL endpoint from the given EndpointConfiguration</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>endpointConf</code>
            </td>
            <td>
                  <code><span title="Endpoint">Endpoint</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the endpoint configuration to be used</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">fromEndpointConf</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">endpointConf</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;SPARQL&quot;</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    create a SPARQL endpoint from the given EndpointConfiguration</span>

<span class="sd">    Args:</span>
<span class="sd">        endpointConf (Endpoint): the endpoint configuration to be used</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">endpointConf</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;endpointConf must be specified&quot;</span><span class="p">)</span>
    <span class="n">sparql</span> <span class="o">=</span> <span class="n">SPARQL</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="n">endpointConf</span><span class="o">.</span><span class="n">endpoint</span><span class="p">,</span>
        <span class="n">method</span><span class="o">=</span><span class="n">endpointConf</span><span class="o">.</span><span class="n">method</span><span class="p">,</span>
        <span class="n">calls_per_minute</span><span class="o">=</span><span class="n">endpointConf</span><span class="o">.</span><span class="n">calls_per_minute</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">endpointConf</span><span class="p">,</span> <span class="s2">&quot;auth&quot;</span><span class="p">):</span>
        <span class="n">authMethod</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">auth</span> <span class="o">==</span> <span class="s2">&quot;BASIC&quot;</span><span class="p">:</span>
            <span class="n">authMethod</span> <span class="o">=</span> <span class="s2">&quot;BASIC&quot;</span>
        <span class="k">elif</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">auth</span> <span class="o">==</span> <span class="s2">&quot;DIGEST&quot;</span><span class="p">:</span>
            <span class="n">authMethod</span> <span class="o">=</span> <span class="s2">&quot;DIGEST&quot;</span>
        <span class="n">sparql</span><span class="o">.</span><span class="n">addAuthentication</span><span class="p">(</span>
            <span class="n">endpointConf</span><span class="o">.</span><span class="n">user</span><span class="p">,</span> <span class="n">endpointConf</span><span class="o">.</span><span class="n">password</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">authMethod</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">sparql</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.getFirst" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getFirst</span><span class="p">(</span><span class="n">qLod</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get the column attr of the first row of the given qLod list</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>qLod(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of dicts (returned by a query)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attr(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the attribute to retrieve</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>object</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the value</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getFirst</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qLod</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the column attr of the first row of the given qLod list</span>

<span class="sd">    Args:</span>
<span class="sd">        qLod(list): the list of dicts (returned by a query)</span>
<span class="sd">        attr(str): the attribute to retrieve</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: the value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">qLod</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">qLod</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">qLod</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">attr</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">value</span>
    <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;getFirst for attribute </span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2"> failed for </span><span class="si">{</span><span class="n">qLod</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.getLocalName" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getLocalName</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>retrieve valid localname from a string based primary key
https://www.w3.org/TR/sparql11-query/#prefNames</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name to convert</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>string</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a valid local name</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getLocalName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    retrieve valid localname from a string based primary key</span>
<span class="sd">    https://www.w3.org/TR/sparql11-query/#prefNames</span>

<span class="sd">    Args:</span>
<span class="sd">        name(string): the name to convert</span>

<span class="sd">    Returns:</span>
<span class="sd">        string: a valid local name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">localName</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ch</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">name</span> <span class="k">if</span> <span class="n">ch</span><span class="o">.</span><span class="n">isalnum</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">localName</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.getResults" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getResults</span><span class="p">(</span><span class="n">jsonResult</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get the result from the given jsonResult</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>jsonResult</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the JSON encoded result</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of bindings</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getResults</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jsonResult</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the result from the given jsonResult</span>

<span class="sd">    Args:</span>
<span class="sd">        jsonResult: the JSON encoded result</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: the list of bindings</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">jsonResult</span><span class="o">.</span><span class="n">bindings</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.getValue" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getValue</span><span class="p">(</span><span class="n">sparqlQuery</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get the value for the given SPARQL query using the given attr</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sparql(SPARQL)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SPARQL endpoint to ge the value for</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sparqlQuery(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SPARQL query to run</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attr(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the attribute to get</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sparqlQuery</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attr</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the value for the given SPARQL query using the given attr</span>

<span class="sd">    Args:</span>
<span class="sd">        sparql(SPARQL): the SPARQL endpoint to ge the value for</span>
<span class="sd">        sparqlQuery(str): the SPARQL query to run</span>
<span class="sd">        attr(str): the attribute to get</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">sparqlQuery</span><span class="p">)</span>
    <span class="n">qLod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryAsListOfDicts</span><span class="p">(</span><span class="n">sparqlQuery</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFirst</span><span class="p">(</span><span class="n">qLod</span><span class="p">,</span> <span class="n">attr</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.getValues" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getValues</span><span class="p">(</span><span class="n">sparqlQuery</span><span class="p">,</span> <span class="n">attrList</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get Values for the given sparlQuery and attribute list</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sparqlQuery(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the query which did not return any values</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>attrList(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of attributes</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sparqlQuery</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">attrList</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get Values for the given sparlQuery and attribute list</span>

<span class="sd">    Args:</span>
<span class="sd">        sparqlQuery(str): the query which did not return any values</span>
<span class="sd">        attrList(list): the list of attributes</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">sparqlQuery</span><span class="p">)</span>
    <span class="n">qLod</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryAsListOfDicts</span><span class="p">(</span><span class="n">sparqlQuery</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">qLod</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;getValues for </span><span class="si">{</span><span class="n">attrList</span><span class="si">}</span><span class="s2"> failed for </span><span class="si">{</span><span class="n">qLod</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">record</span> <span class="o">=</span> <span class="n">qLod</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">values</span> <span class="o">=</span> <span class="p">()</span>
    <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">attrList</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;getValues failed for attribute </span><span class="si">{</span><span class="n">attr</span><span class="si">}</span><span class="s2"> which is missing in result record </span><span class="si">{</span><span class="n">record</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">recordTuple</span> <span class="o">=</span> <span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="n">attr</span><span class="p">],)</span>
        <span class="n">values</span> <span class="o">+=</span> <span class="n">recordTuple</span>
    <span class="k">return</span> <span class="n">values</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.insert" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">insert</span><span class="p">(</span><span class="n">insertCommand</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>run an insert</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>insertCommand(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SPARQL INSERT command</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a response</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">insertCommand</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    run an insert</span>

<span class="sd">    Args:</span>
<span class="sd">        insertCommand(string): the SPARQL INSERT command</span>

<span class="sd">    Returns:</span>
<span class="sd">        a response</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">setRequestMethod</span><span class="p">(</span><span class="n">POSTDIRECTLY</span><span class="p">)</span>
    <span class="n">response</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">exception</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawQuery</span><span class="p">(</span><span class="n">insertCommand</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">POST</span><span class="p">)</span>
        <span class="c1"># see https://github.com/RDFLib/sparqlwrapper/issues/159#issuecomment-674523696</span>
        <span class="c1"># dummy read the body</span>
        <span class="n">response</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="n">exception</span> <span class="o">=</span> <span class="n">ex</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span><span class="p">,</span> <span class="n">exception</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.insertListOfDicts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">insertListOfDicts</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">,</span> <span class="n">entityType</span><span class="p">,</span> <span class="n">primaryKey</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">batchSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>insert the given list of dicts mapping datatypes</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>entityType(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the entityType to use as a</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>primaryKey(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name of the primary key attribute to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prefix(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>any PREFIX statements to be used</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>limit(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>maximum number of records to insert</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>batchSize(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>number of records to send per request</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="return" open>
  <summary>Return</summary>
  <p>a list of errors which should be empty on full success</p>
</details>        <p>datatype maping according to
https://www.w3.org/TR/xmlschema-2/#built-in-datatypes</p>
<p>mapped from
https://docs.python.org/3/library/stdtypes.html</p>
<p>compare to
https://www.w3.org/2001/sw/rdb2rdf/directGraph/
http://www.bobdc.com/blog/json2rdf/
https://www.w3.org/TR/json-ld11-api/#data-round-tripping
https://stackoverflow.com/questions/29030231/json-to-rdf-xml-file-in-python</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">insertListOfDicts</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">listOfDicts</span><span class="p">,</span>
    <span class="n">entityType</span><span class="p">,</span>
    <span class="n">primaryKey</span><span class="p">,</span>
    <span class="n">prefixes</span><span class="p">,</span>
    <span class="n">limit</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">batchSize</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    insert the given list of dicts mapping datatypes</span>

<span class="sd">    Args:</span>
<span class="sd">        entityType(string): the entityType to use as a</span>
<span class="sd">        primaryKey(string): the name of the primary key attribute to use</span>
<span class="sd">        prefix(string): any PREFIX statements to be used</span>
<span class="sd">        limit(int): maximum number of records to insert</span>
<span class="sd">        batchSize(int): number of records to send per request</span>

<span class="sd">    Return:</span>
<span class="sd">        a list of errors which should be empty on full success</span>

<span class="sd">    datatype maping according to</span>
<span class="sd">    https://www.w3.org/TR/xmlschema-2/#built-in-datatypes</span>

<span class="sd">    mapped from</span>
<span class="sd">    https://docs.python.org/3/library/stdtypes.html</span>

<span class="sd">    compare to</span>
<span class="sd">    https://www.w3.org/2001/sw/rdb2rdf/directGraph/</span>
<span class="sd">    http://www.bobdc.com/blog/json2rdf/</span>
<span class="sd">    https://www.w3.org/TR/json-ld11-api/#data-round-tripping</span>
<span class="sd">    https://stackoverflow.com/questions/29030231/json-to-rdf-xml-file-in-python</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">limit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">listOfDicts</span> <span class="o">=</span> <span class="n">listOfDicts</span><span class="p">[:</span><span class="n">limit</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">batchSize</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">insertListOfDictsBatch</span><span class="p">(</span>
            <span class="n">listOfDicts</span><span class="p">,</span> <span class="n">entityType</span><span class="p">,</span> <span class="n">primaryKey</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="n">total</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># store the list in batches</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">total</span><span class="p">,</span> <span class="n">batchSize</span><span class="p">):</span>
            <span class="n">recordBatch</span> <span class="o">=</span> <span class="n">listOfDicts</span><span class="p">[</span><span class="n">i</span> <span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="n">batchSize</span><span class="p">]</span>
            <span class="n">batchErrors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">insertListOfDictsBatch</span><span class="p">(</span>
                <span class="n">recordBatch</span><span class="p">,</span>
                <span class="n">entityType</span><span class="p">,</span>
                <span class="n">primaryKey</span><span class="p">,</span>
                <span class="n">prefixes</span><span class="p">,</span>
                <span class="n">batchIndex</span><span class="o">=</span><span class="n">i</span><span class="p">,</span>
                <span class="n">total</span><span class="o">=</span><span class="n">total</span><span class="p">,</span>
                <span class="n">startTime</span><span class="o">=</span><span class="n">startTime</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">batchErrors</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;insertListOfDicts for </span><span class="si">%9d</span><span class="s2"> records in </span><span class="si">%6.1f</span><span class="s2"> secs&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">),</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">),</span>
                <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">errors</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.insertListOfDictsBatch" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">insertListOfDictsBatch</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">,</span> <span class="n">entityType</span><span class="p">,</span> <span class="n">primaryKey</span><span class="p">,</span> <span class="n">prefixes</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;batch&#39;</span><span class="p">,</span> <span class="n">batchIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">startTime</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>insert a Batch part of listOfDicts</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>entityType(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the entityType to use as a</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>primaryKey(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name of the primary key attribute to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>prefix(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>any PREFIX statements to be used</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the title to display for the profiling (if any)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>batchIndex(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the start index of the current batch</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>total(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the total number of records for all batches</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>starttime(datetime)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the start of the batch processing</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="return" open>
  <summary>Return</summary>
  <p>a list of errors which should be empty on full success</p>
</details>

            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">insertListOfDictsBatch</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">listOfDicts</span><span class="p">,</span>
    <span class="n">entityType</span><span class="p">,</span>
    <span class="n">primaryKey</span><span class="p">,</span>
    <span class="n">prefixes</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;batch&quot;</span><span class="p">,</span>
    <span class="n">batchIndex</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">total</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">startTime</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    insert a Batch part of listOfDicts</span>

<span class="sd">    Args:</span>
<span class="sd">        entityType(string): the entityType to use as a</span>
<span class="sd">        primaryKey(string): the name of the primary key attribute to use</span>
<span class="sd">        prefix(string): any PREFIX statements to be used</span>
<span class="sd">        title(string): the title to display for the profiling (if any)</span>
<span class="sd">        batchIndex(int): the start index of the current batch</span>
<span class="sd">        total(int): the total number of records for all batches</span>
<span class="sd">        starttime(datetime): the start of the batch processing</span>

<span class="sd">    Return:</span>
<span class="sd">        a list of errors which should be empty on full success</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">batchIndex</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">batchIndex</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">batchStartTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">startTime</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">startTime</span> <span class="o">=</span> <span class="n">batchStartTime</span>
    <span class="n">rdfprefix</span> <span class="o">=</span> <span class="s2">&quot;PREFIX rdf: &lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&gt;</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="n">insertCommand</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">rdfprefix</span><span class="si">}{</span><span class="n">prefixes</span><span class="si">}</span><span class="se">\n</span><span class="s2">INSERT DATA </span><span class="se">{{\n</span><span class="s2">&quot;</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">record</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">listOfDicts</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">primaryKey</span> <span class="ow">in</span> <span class="n">record</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;missing primary key </span><span class="si">{</span><span class="n">primaryKey</span><span class="si">}</span><span class="s2"> in record </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">primaryValue</span> <span class="o">=</span> <span class="n">record</span><span class="p">[</span><span class="n">primaryKey</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">primaryValue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;primary key </span><span class="si">{</span><span class="n">primaryKey</span><span class="si">}</span><span class="s2"> value is None in record </span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">encodedPrimaryValue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLocalName</span><span class="p">(</span><span class="n">primaryValue</span><span class="p">)</span>
                <span class="n">tSubject</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">entityType</span><span class="si">}</span><span class="s2">__</span><span class="si">{</span><span class="n">encodedPrimaryValue</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="n">insertCommand</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;  </span><span class="si">{</span><span class="n">tSubject</span><span class="si">}</span><span class="s1"> rdf:type &quot;</span><span class="si">{</span><span class="n">entityType</span><span class="si">}</span><span class="s1">&quot;.</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="k">for</span> <span class="n">keyValue</span> <span class="ow">in</span> <span class="n">record</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">=</span> <span class="n">keyValue</span>
                    <span class="c1"># convert key if necessary</span>
                    <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getLocalName</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
                    <span class="n">valueType</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(</span><span class="si">%s</span><span class="s2">)=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">valueType</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
                    <span class="n">tPredicate</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">entityType</span><span class="si">}</span><span class="s2">_</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="n">tObject</span> <span class="o">=</span> <span class="n">value</span>
                    <span class="k">if</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                        <span class="n">escapedString</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">controlEscape</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                        <span class="n">tObject</span> <span class="o">=</span> <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">escapedString</span>
                    <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">typedLiterals</span><span class="p">:</span>
                            <span class="n">tObject</span> <span class="o">=</span> <span class="p">(</span>
                                <span class="s1">&#39;&quot;</span><span class="si">%d</span><span class="s1">&quot;^^&lt;http://www.w3.org/2001/XMLSchema#integer&gt;&#39;</span>
                                <span class="o">%</span> <span class="n">value</span>
                            <span class="p">)</span>
                        <span class="k">pass</span>
                    <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">float</span><span class="p">:</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">typedLiterals</span><span class="p">:</span>
                            <span class="n">tObject</span> <span class="o">=</span> <span class="p">(</span>
                                <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;^^&lt;http://www.w3.org/2001/XMLSchema#decimal&gt;&#39;</span>
                                <span class="o">%</span> <span class="n">value</span>
                            <span class="p">)</span>
                        <span class="k">pass</span>
                    <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
                        <span class="k">pass</span>
                    <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
                        <span class="c1"># if self.typedLiterals:</span>
                        <span class="n">tObject</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;^^&lt;http://www.w3.org/2001/XMLSchema#date&gt;&#39;</span> <span class="o">%</span> <span class="n">value</span>
                        <span class="p">)</span>
                        <span class="k">pass</span>
                    <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
                        <span class="n">tObject</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot;^^&lt;http://www.w3.org/2001/XMLSchema#dateTime&gt;&#39;</span>
                            <span class="o">%</span> <span class="n">value</span>
                        <span class="p">)</span>
                        <span class="k">pass</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                            <span class="s2">&quot;can&#39;t handle type </span><span class="si">%s</span><span class="s2"> in record </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">valueType</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="n">tObject</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">if</span> <span class="n">tObject</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">insertRecord</span> <span class="o">=</span> <span class="s2">&quot;  </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">.</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span>
                            <span class="n">tSubject</span><span class="p">,</span>
                            <span class="n">tPredicate</span><span class="p">,</span>
                            <span class="n">tObject</span><span class="p">,</span>
                        <span class="p">)</span>
                        <span class="n">insertCommand</span> <span class="o">+=</span> <span class="n">insertRecord</span>
    <span class="n">insertCommand</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">}&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">insertCommand</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">response</span><span class="p">,</span> <span class="n">ex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">insertCommand</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">ex</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> for record </span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">),</span> <span class="n">index</span><span class="p">))</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%7s</span><span class="s2"> for </span><span class="si">%9d</span><span class="s2"> - </span><span class="si">%9d</span><span class="s2"> of </span><span class="si">%9d</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%6.1f</span><span class="s2"> s -&gt; </span><span class="si">%6.1f</span><span class="s2"> s&quot;</span>
            <span class="o">%</span> <span class="p">(</span>
                <span class="n">title</span><span class="p">,</span>
                <span class="n">batchIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">batchIndex</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span>
                <span class="n">total</span><span class="p">,</span>
                <span class="n">entityType</span><span class="p">,</span>
                <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">batchStartTime</span><span class="p">,</span>
                <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">errors</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.post_query_direct" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">post_query_direct</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">rdf_format</span><span class="o">=</span><span class="s1">&#39;n3&#39;</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Fetch raw RDF response via direct HTTP POST.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SPARQL CONSTRUCT query</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>rdf_format</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>RDF format label (e.g. 'turtle', 'rdf-xml', 'json-ld', 'n3')</p>
              </div>
            </td>
            <td>
                  <code>&#39;n3&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>timeout</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>timeout in seconds (default: 60)</p>
              </div>
            </td>
            <td>
                  <code>60</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raw RDF content as string</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">post_query_direct</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">rdf_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;n3&quot;</span><span class="p">,</span> <span class="n">timeout</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">60</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Fetch raw RDF response via direct HTTP POST.</span>

<span class="sd">    Args:</span>
<span class="sd">        query: SPARQL CONSTRUCT query</span>
<span class="sd">        rdf_format: RDF format label (e.g. &#39;turtle&#39;, &#39;rdf-xml&#39;, &#39;json-ld&#39;, &#39;n3&#39;)</span>
<span class="sd">        timeout: timeout in seconds (default: 60)</span>

<span class="sd">    Returns:</span>
<span class="sd">        Raw RDF content as string</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception if HTTP request fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">rdf_format</span> <span class="o">=</span> <span class="n">RdfFormat</span><span class="o">.</span><span class="n">by_label</span><span class="p">(</span><span class="n">rdf_format</span><span class="p">)</span>
    <span class="n">mime_type</span> <span class="o">=</span> <span class="n">rdf_format</span><span class="o">.</span><span class="n">mime_type</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="n">mime_type</span><span class="p">}</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">,</span>
        <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">},</span>
        <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;HTTP </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">text</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.printErrors" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">printErrors</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>print the given list of errors</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>errors(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of error strings</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>boolean</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the list is empty else false</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">printErrors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">errors</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    print the given list of errors</span>

<span class="sd">    Args:</span>
<span class="sd">        errors(list): a list of error strings</span>

<span class="sd">    Returns:</span>
<span class="sd">        boolean: True if the list is empty else false</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ERRORS:&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">errors</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">stderr</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.query" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">query</span><span class="p">(</span><span class="n">queryString</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">POST</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get a list of results for the given query</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>queryString(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SPARQL query to execute</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>method(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the method eg. POST to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>list of bindings</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queryString</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">POST</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get a list of results for the given query</span>

<span class="sd">    Args:</span>
<span class="sd">        queryString(string): the SPARQL query to execute</span>
<span class="sd">        method(string): the method eg. POST to use</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: list of bindings</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">queryResult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawQuery</span><span class="p">(</span><span class="n">queryString</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">method</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">queryResult</span><span class="p">,</span> <span class="s2">&quot;info&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="s2">&quot;content-type&quot;</span> <span class="ow">in</span> <span class="n">queryResult</span><span class="o">.</span><span class="n">info</span><span class="p">():</span>
            <span class="n">ct</span> <span class="o">=</span> <span class="n">queryResult</span><span class="o">.</span><span class="n">info</span><span class="p">()[</span><span class="s2">&quot;content-type&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;text/html&quot;</span> <span class="ow">in</span> <span class="n">ct</span><span class="p">:</span>
                <span class="n">response</span> <span class="o">=</span> <span class="n">queryResult</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="s2">&quot;Success&quot;</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> failed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">response</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
    <span class="n">jsonResult</span> <span class="o">=</span> <span class="n">queryResult</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getResults</span><span class="p">(</span><span class="n">jsonResult</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.queryAsListOfDicts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">queryAsListOfDicts</span><span class="p">(</span><span class="n">queryString</span><span class="p">,</span> <span class="n">fixNone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sampleCount</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get a list of dicts for the given query (to allow round-trip results for insertListOfDicts)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>queryString</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SPARQL query to execute</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fixNone</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True add None values for empty columns in Dict</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sampleCount</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the number of samples to check</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>param_dict</code>
            </td>
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dictionary of parameter names and values to be applied to the query</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of Dicts</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the query requires parameters but they are not provided</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">queryAsListOfDicts</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">queryString</span><span class="p">,</span>
    <span class="n">fixNone</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">sampleCount</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">param_dict</span><span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of dicts for the given query (to allow round-trip results for insertListOfDicts)</span>

<span class="sd">    Args:</span>
<span class="sd">        queryString (str): the SPARQL query to execute</span>
<span class="sd">        fixNone (bool): if True add None values for empty columns in Dict</span>
<span class="sd">        sampleCount (int): the number of samples to check</span>
<span class="sd">        param_dict (dict): dictionary of parameter names and values to be applied to the query</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: a list of Dicts</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: If the query requires parameters but they are not provided</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">Params</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span>
    <span class="n">queryString</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">apply_parameters_with_check</span><span class="p">(</span><span class="n">param_dict</span><span class="p">)</span>

    <span class="n">records</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">queryString</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
    <span class="n">listOfDicts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">asListOfDicts</span><span class="p">(</span>
        <span class="n">records</span><span class="p">,</span> <span class="n">fixNone</span><span class="o">=</span><span class="n">fixNone</span><span class="p">,</span> <span class="n">sampleCount</span><span class="o">=</span><span class="n">sampleCount</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">listOfDicts</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.rawQuery" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rawQuery</span><span class="p">(</span><span class="n">queryString</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">POST</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>query with the given query string</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>queryString(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SPARQL query to be performed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>method(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>POST or GET - POST is mandatory for update queries</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns:
    list: the raw query result as bindings</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">rawQuery</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">queryString</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="n">POST</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    query with the given query string</span>

<span class="sd">    Args:</span>
<span class="sd">        queryString(str): the SPARQL query to be performed</span>
<span class="sd">        method(str): POST or GET - POST is mandatory for update queries</span>
<span class="sd">    Returns:</span>
<span class="sd">        list: the raw query result as bindings</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">queryString</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fix_comments</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">setQuery</span><span class="p">(</span><span class="n">queryString</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="n">method</span>
    <span class="n">bindings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sparql</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">bindings</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.strToDatetime" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">strToDatetime</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>convert a string to a datetime
Args:
    value(str): the value to convert
Returns:
    datetime: the datetime</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">strToDatetime</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert a string to a datetime</span>
<span class="sd">    Args:</span>
<span class="sd">        value(str): the value to convert</span>
<span class="sd">    Returns:</span>
<span class="sd">        datetime: the datetime</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">dateFormat</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S.</span><span class="si">%f</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;T&quot;</span> <span class="ow">in</span> <span class="n">value</span> <span class="ow">and</span> <span class="s2">&quot;Z&quot;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
        <span class="n">dateFormat</span> <span class="o">=</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%SZ&quot;</span>
    <span class="n">dt</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dateFormat</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">ve</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">ve</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">dt</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sparql.SPARQL.test_query" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">test_query</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="s1">&#39;SELECT * WHERE { ?s ?p ?o } LIMIT 1&#39;</span><span class="p">,</span> <span class="n">expected_bindings</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Check if the SPARQL endpoint is available using a standard SPARQL query.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>query</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SPARQL query to use for testing</p>
              </div>
            </td>
            <td>
                  <code>&#39;SELECT * WHERE { ?s ?p ?o } LIMIT 1&#39;</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="Exception">Exception</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Exception if the endpoint fails</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sparql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">test_query</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">query</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;SELECT * WHERE { ?s ?p ?o } LIMIT 1&quot;</span><span class="p">,</span>
    <span class="n">expected_bindings</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="ne">Exception</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Check if the SPARQL endpoint is available using a standard SPARQL query.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str): the SPARQL query to use for testing</span>

<span class="sd">    Returns:</span>
<span class="sd">        Exception if the endpoint fails</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">query_result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rawQuery</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">method</span><span class="p">)</span>
        <span class="n">bindings</span> <span class="o">=</span> <span class="n">query_result</span><span class="o">.</span><span class="n">bindings</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">bindings</span><span class="p">)</span> <span class="o">==</span> <span class="n">expected_bindings</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;SPARQL query </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="s2"> returned </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">bindings</span><span class="p">)</span><span class="si">}</span><span class="s2"> bindings instead of </span><span class="si">{</span><span class="n">expected_bindings</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">ex</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.sql" class="doc doc-heading">
            <code>sql</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2020-08-24</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.sql.EntityInfo" class="doc doc-heading">
            <code>EntityInfo</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>holds entity meta Info</p>
<p>:ivar name(string): entity name = table name</p>
<p>:ivar primaryKey(string): the name of the primary key column</p>
<p>:ivar typeMap(dict): maps column names to python types</p>
<p>:ivar debug(boolean): True if debug information should be shown</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sql.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">EntityInfo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    holds entity meta Info</span>

<span class="sd">    :ivar name(string): entity name = table name</span>

<span class="sd">    :ivar primaryKey(string): the name of the primary key column</span>

<span class="sd">    :ivar typeMap(dict): maps column names to python types</span>

<span class="sd">    :ivar debug(boolean): True if debug information should be shown</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampleRecords</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">primaryKey</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        construct me from the given name and primary key</span>

<span class="sd">        Args:</span>
<span class="sd">           sampleRecords:a list of sample record dicts</span>
<span class="sd">           name(string): the name of the entity</span>
<span class="sd">           primaryKey(string): the name of the primary key column</span>
<span class="sd">           quite(boolean): if True suppress all print messages</span>
<span class="sd">           debug(boolean): True if debug information should be shown</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sampleRecords</span> <span class="o">=</span> <span class="n">sampleRecords</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">primaryKey</span> <span class="o">=</span> <span class="n">primaryKey</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span> <span class="o">=</span> <span class="n">quiet</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sqlTypeMap</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">createTableCmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCreateTableCmd</span><span class="p">(</span><span class="n">sampleRecords</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dropTableCmd</span> <span class="o">=</span> <span class="s2">&quot;DROP TABLE IF EXISTS </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">insertCmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getInsertCmd</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">getCreateTableCmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampleRecords</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the CREATE TABLE DDL command for the given sample records</span>

<span class="sd">        Args:</span>
<span class="sd">            sampleRecords(list): a list of Dicts of sample Records</span>

<span class="sd">        Returns:</span>
<span class="sd">            string: CREATE TABLE DDL command for this entity info</span>

<span class="sd">        Example:</span>

<span class="sd">        .. code-block:: sql</span>

<span class="sd">            CREATE TABLE Person(name TEXT PRIMARY KEY,born DATE,numberInLine INTEGER,wikidataurl TEXT,age FLOAT,ofAge BOOLEAN)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ddlCmd</span> <span class="o">=</span> <span class="s2">&quot;CREATE TABLE </span><span class="si">%s</span><span class="s2">(&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">sampleRecord</span> <span class="ow">in</span> <span class="n">sampleRecords</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">sampleRecord</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">sqlType</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="n">valueType</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sampleRecords</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Warning sampleRecord column </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> is None - using TEXT as type&quot;</span>
                        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                        <span class="n">valueType</span> <span class="o">=</span> <span class="nb">str</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">valueType</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                    <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;TEXT&quot;</span>
                <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
                    <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;INTEGER&quot;</span>
                <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">float</span><span class="p">:</span>
                    <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;FLOAT&quot;</span>
                <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
                    <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;BOOLEAN&quot;</span>
                <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
                    <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;DATE&quot;</span>
                <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
                    <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;TIMESTAMP&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;warning: unsupported type </span><span class="si">{</span><span class="n">valueType</span><span class="si">}</span><span class="s2"> for column </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">sqlType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">valueType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">addType</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">valueType</span><span class="p">,</span> <span class="n">sqlType</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">sqlType</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sqlTypeMap</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">is_primary</span> <span class="o">=</span> <span class="s2">&quot; PRIMARY KEY&quot;</span> <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryKey</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="n">ddl_col</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">delim</span><span class="si">}{</span><span class="n">key</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">sqlType</span><span class="si">}{</span><span class="n">is_primary</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="n">ddlCmd</span> <span class="o">+=</span> <span class="n">ddl_col</span>
            <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span>
        <span class="n">ddlCmd</span> <span class="o">+=</span> <span class="s2">&quot;)&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">ddlCmd</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ddlCmd</span>

    <span class="k">def</span> <span class="nf">getInsertCmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">replace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the INSERT command for this entityInfo</span>

<span class="sd">        Args:</span>
<span class="sd">             replace(bool): if True allow replace for insert</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: the INSERT INTO SQL command for his entityInfo e.g.</span>

<span class="sd">        Example:</span>

<span class="sd">        .. code-block:: sql</span>

<span class="sd">            INSERT INTO Person (name,born,numberInLine,wikidataurl,age,ofAge) values (?,?,?,?,?,?).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">placeholders</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="s2">&quot;,:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">replaceClause</span> <span class="o">=</span> <span class="s2">&quot; OR REPLACE&quot;</span> <span class="k">if</span> <span class="n">replace</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="n">insertCmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;INSERT</span><span class="si">{</span><span class="n">replaceClause</span><span class="si">}</span><span class="s2"> INTO </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">columns</span><span class="si">}</span><span class="s2">) values (</span><span class="si">{</span><span class="n">placeholders</span><span class="si">}</span><span class="s2">)&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">insertCmd</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">insertCmd</span>

    <span class="k">def</span> <span class="nf">addType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">valueType</span><span class="p">,</span> <span class="n">sqlType</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        add the python type for the given column to the typeMap</span>

<span class="sd">        Args:</span>
<span class="sd">           column(string): the name of the column</span>

<span class="sd">           valueType(type): the python type of the column</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">column</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">valueType</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sqlTypeMap</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">sqlType</span>

    <span class="k">def</span> <span class="nf">fixDates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resultList</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        fix date entries in the given resultList by parsing the date content e.g.</span>
<span class="sd">        converting &#39;1926-04-21&#39; back to datetime.date(1926, 4, 21)</span>

<span class="sd">        Args:</span>
<span class="sd">            resultList(list): the list of records to be fixed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">resultList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">valueType</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">valueType</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
                    <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="n">dateValue</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
                    <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">dateValue</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.EntityInfo.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">sampleRecords</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">primaryKey</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>construct me from the given name and primary key</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sampleRecords</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of sample record dicts</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>name(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name of the entity</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>primaryKey(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name of the primary key column</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>quite(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True suppress all print messages</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if debug information should be shown</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampleRecords</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">primaryKey</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">quiet</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    construct me from the given name and primary key</span>

<span class="sd">    Args:</span>
<span class="sd">       sampleRecords:a list of sample record dicts</span>
<span class="sd">       name(string): the name of the entity</span>
<span class="sd">       primaryKey(string): the name of the primary key column</span>
<span class="sd">       quite(boolean): if True suppress all print messages</span>
<span class="sd">       debug(boolean): True if debug information should be shown</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sampleRecords</span> <span class="o">=</span> <span class="n">sampleRecords</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">primaryKey</span> <span class="o">=</span> <span class="n">primaryKey</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span> <span class="o">=</span> <span class="n">quiet</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sqlTypeMap</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">createTableCmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCreateTableCmd</span><span class="p">(</span><span class="n">sampleRecords</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dropTableCmd</span> <span class="o">=</span> <span class="s2">&quot;DROP TABLE IF EXISTS </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">insertCmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getInsertCmd</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.EntityInfo.addType" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">addType</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">valueType</span><span class="p">,</span> <span class="n">sqlType</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>add the python type for the given column to the typeMap</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>column(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name of the column</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>valueType(type)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the python type of the column</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">addType</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">valueType</span><span class="p">,</span> <span class="n">sqlType</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    add the python type for the given column to the typeMap</span>

<span class="sd">    Args:</span>
<span class="sd">       column(string): the name of the column</span>

<span class="sd">       valueType(type): the python type of the column</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">column</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">valueType</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sqlTypeMap</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">sqlType</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.EntityInfo.fixDates" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fixDates</span><span class="p">(</span><span class="n">resultList</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>fix date entries in the given resultList by parsing the date content e.g.
converting '1926-04-21' back to datetime.date(1926, 4, 21)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>resultList(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the list of records to be fixed</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">fixDates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">resultList</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    fix date entries in the given resultList by parsing the date content e.g.</span>
<span class="sd">    converting &#39;1926-04-21&#39; back to datetime.date(1926, 4, 21)</span>

<span class="sd">    Args:</span>
<span class="sd">        resultList(list): the list of records to be fixed</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">resultList</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">valueType</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">valueType</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
                <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">],</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">dateValue</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">()</span>
                <span class="n">record</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">dateValue</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.EntityInfo.getCreateTableCmd" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getCreateTableCmd</span><span class="p">(</span><span class="n">sampleRecords</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get the CREATE TABLE DDL command for the given sample records</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>sampleRecords(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of Dicts of sample Records</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>string</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>CREATE TABLE DDL command for this entity info</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Example:</p>
<p>.. code-block:: sql</p>
<pre><code>CREATE TABLE Person(name TEXT PRIMARY KEY,born DATE,numberInLine INTEGER,wikidataurl TEXT,age FLOAT,ofAge BOOLEAN)
</code></pre>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getCreateTableCmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sampleRecords</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the CREATE TABLE DDL command for the given sample records</span>

<span class="sd">    Args:</span>
<span class="sd">        sampleRecords(list): a list of Dicts of sample Records</span>

<span class="sd">    Returns:</span>
<span class="sd">        string: CREATE TABLE DDL command for this entity info</span>

<span class="sd">    Example:</span>

<span class="sd">    .. code-block:: sql</span>

<span class="sd">        CREATE TABLE Person(name TEXT PRIMARY KEY,born DATE,numberInLine INTEGER,wikidataurl TEXT,age FLOAT,ofAge BOOLEAN)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ddlCmd</span> <span class="o">=</span> <span class="s2">&quot;CREATE TABLE </span><span class="si">%s</span><span class="s2">(&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
    <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">sampleRecord</span> <span class="ow">in</span> <span class="n">sampleRecords</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">sampleRecord</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">sqlType</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">valueType</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sampleRecords</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Warning sampleRecord column </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> is None - using TEXT as type&quot;</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                    <span class="n">valueType</span> <span class="o">=</span> <span class="nb">str</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">valueType</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;TEXT&quot;</span>
            <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">int</span><span class="p">:</span>
                <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;INTEGER&quot;</span>
            <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">float</span><span class="p">:</span>
                <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;FLOAT&quot;</span>
            <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>
                <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;BOOLEAN&quot;</span>
            <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
                <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;DATE&quot;</span>
            <span class="k">elif</span> <span class="n">valueType</span> <span class="o">==</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
                <span class="n">sqlType</span> <span class="o">=</span> <span class="s2">&quot;TIMESTAMP&quot;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;warning: unsupported type </span><span class="si">{</span><span class="n">valueType</span><span class="si">}</span><span class="s2"> for column </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">sqlType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">valueType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">addType</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">valueType</span><span class="p">,</span> <span class="n">sqlType</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">sqlType</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sqlTypeMap</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">is_primary</span> <span class="o">=</span> <span class="s2">&quot; PRIMARY KEY&quot;</span> <span class="k">if</span> <span class="n">key</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">primaryKey</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
        <span class="n">ddl_col</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">delim</span><span class="si">}{</span><span class="n">key</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">sqlType</span><span class="si">}{</span><span class="n">is_primary</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="n">ddlCmd</span> <span class="o">+=</span> <span class="n">ddl_col</span>
        <span class="n">delim</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span>
    <span class="n">ddlCmd</span> <span class="o">+=</span> <span class="s2">&quot;)&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">ddlCmd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ddlCmd</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.EntityInfo.getInsertCmd" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getInsertCmd</span><span class="p">(</span><span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get the INSERT command for this entityInfo</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>replace(bool)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True allow replace for insert</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the INSERT INTO SQL command for his entityInfo e.g.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Example:</p>
<p>.. code-block:: sql</p>
<pre><code>INSERT INTO Person (name,born,numberInLine,wikidataurl,age,ofAge) values (?,?,?,?,?,?).
</code></pre>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getInsertCmd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">replace</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the INSERT command for this entityInfo</span>

<span class="sd">    Args:</span>
<span class="sd">         replace(bool): if True allow replace for insert</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: the INSERT INTO SQL command for his entityInfo e.g.</span>

<span class="sd">    Example:</span>

<span class="sd">    .. code-block:: sql</span>

<span class="sd">        INSERT INTO Person (name,born,numberInLine,wikidataurl,age,ofAge) values (?,?,?,?,?,?).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">columns</span> <span class="o">=</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">placeholders</span> <span class="o">=</span> <span class="s2">&quot;:&quot;</span> <span class="o">+</span> <span class="s2">&quot;,:&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">replaceClause</span> <span class="o">=</span> <span class="s2">&quot; OR REPLACE&quot;</span> <span class="k">if</span> <span class="n">replace</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
    <span class="n">insertCmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;INSERT</span><span class="si">{</span><span class="n">replaceClause</span><span class="si">}</span><span class="s2"> INTO </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">columns</span><span class="si">}</span><span class="s2">) values (</span><span class="si">{</span><span class="n">placeholders</span><span class="si">}</span><span class="s2">)&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">quiet</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">insertCmd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">insertCmd</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.sql.SQLDB" class="doc doc-heading">
            <code>SQLDB</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>Structured Query Language Database wrapper</p>
<p>:ivar dbname(string): name of the database
:ivar debug(boolean): True if debug info should be provided
:ivar errorDebug(boolean): True if debug info should be provided on errors (should not be used for production since it might reveal data)</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sql.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SQLDB</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Structured Query Language Database wrapper</span>

<span class="sd">    :ivar dbname(string): name of the database</span>
<span class="sd">    :ivar debug(boolean): True if debug info should be provided</span>
<span class="sd">    :ivar errorDebug(boolean): True if debug info should be provided on errors (should not be used for production since it might reveal data)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">RAM</span> <span class="o">=</span> <span class="s2">&quot;:memory:&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">dbname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;:memory:&quot;</span><span class="p">,</span>
        <span class="n">connection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">check_same_thread</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">errorDebug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construct me for the given dbname and debug</span>

<span class="sd">        Args:</span>

<span class="sd">           dbname(string): name of the database - default is a RAM based database</span>
<span class="sd">           connection(Connection): an optional connection to be reused</span>
<span class="sd">           check_same_thread(boolean): True if object handling needs to be on the same thread see https://stackoverflow.com/a/48234567/1497139</span>
<span class="sd">           timeout(float): number of seconds for connection timeout</span>
<span class="sd">           debug(boolean): if True switch on debug</span>
<span class="sd">           errorDebug(boolean): True if debug info should be provided on errors (should not be used for production since it might reveal data)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dbname</span> <span class="o">=</span> <span class="n">dbname</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errorDebug</span> <span class="o">=</span> <span class="n">errorDebug</span>
        <span class="n">SQLiteApiFixer</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="n">lenient</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">connection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="n">dbname</span><span class="p">,</span>
                <span class="n">detect_types</span><span class="o">=</span><span class="n">sqlite3</span><span class="o">.</span><span class="n">PARSE_DECLTYPES</span><span class="p">,</span>
                <span class="n">check_same_thread</span><span class="o">=</span><span class="n">check_same_thread</span><span class="p">,</span>
                <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">connection</span>

    <span class="k">def</span> <span class="nf">logError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        log the given error message to stderr</span>

<span class="sd">        Args:</span>
<span class="sd">            msg(str): the error messsage to display</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;close my connection&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ddlCmd</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        execute the given Data Definition Command</span>

<span class="sd">        Args:</span>
<span class="sd">            ddlCmd(string): e.g. a CREATE TABLE or CREATE View command</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">ddlCmd</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">createTable4EntityInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entityInfo</span><span class="p">,</span> <span class="n">withDrop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">withCreate</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a table based on the provided EntityInfo.</span>

<span class="sd">        Args:</span>
<span class="sd">            entityInfo (EntityInfo): The EntityInfo object containing table metadata.</span>
<span class="sd">            withDrop (bool): If True, drop the existing table before creation.</span>
<span class="sd">            withCreate (bool): If True, execute the CREATE TABLE command.</span>

<span class="sd">        Returns:</span>
<span class="sd">            EntityInfo: The provided EntityInfo object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">withDrop</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">entityInfo</span><span class="o">.</span><span class="n">dropTableCmd</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">withCreate</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">entityInfo</span><span class="o">.</span><span class="n">createTableCmd</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">OperationalError</span> <span class="k">as</span> <span class="n">oe</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;createTable failed with error </span><span class="si">{</span><span class="n">oe</span><span class="si">}</span><span class="s2"> for </span><span class="si">{</span><span class="n">entityInfo</span><span class="o">.</span><span class="n">createTableCmd</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="n">entityInfo</span>

    <span class="k">def</span> <span class="nf">createTable</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">listOfRecords</span><span class="p">,</span>
        <span class="n">entityName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">primaryKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">withCreate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">withDrop</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">sampleRecordCount</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">failIfTooFew</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Derive Data Definition Language CREATE TABLE command from list of Records by examining first record</span>
<span class="sd">        as defining sample record and execute DDL command.</span>

<span class="sd">        Args:</span>
<span class="sd">            listOfRecords (list): A list of Dicts.</span>
<span class="sd">            entityName (str): The entity / table name to use.</span>
<span class="sd">            primaryKey (str): The key/column to use as a primary key.</span>
<span class="sd">            withDrop (bool): True if the existing Table should be dropped.</span>
<span class="sd">            withCreate (bool): True if the create Table command should be executed.</span>
<span class="sd">            sampleRecordCount (int): Number of sample records expected and to be inspected.</span>
<span class="sd">            failIfTooFew (bool): Raise an Exception if too few sample records, else warn only.</span>

<span class="sd">        Returns:</span>
<span class="sd">            EntityInfo: Meta data information for the created table.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">l</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listOfRecords</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sampleRecordCount</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">sampleRecordCount</span> <span class="o">=</span> <span class="n">l</span>
        <span class="k">if</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="n">sampleRecordCount</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;only </span><span class="si">{</span><span class="n">l</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">sampleRecordCount</span><span class="si">}</span><span class="s2"> of needed sample records to createTable available&quot;</span>
            <span class="k">if</span> <span class="n">failIfTooFew</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">logError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

        <span class="n">sampleRecords</span> <span class="o">=</span> <span class="n">listOfRecords</span><span class="p">[:</span><span class="n">sampleRecordCount</span><span class="p">]</span>
        <span class="n">entityInfo</span> <span class="o">=</span> <span class="n">EntityInfo</span><span class="p">(</span><span class="n">sampleRecords</span><span class="p">,</span> <span class="n">entityName</span><span class="p">,</span> <span class="n">primaryKey</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">createTable4EntityInfo</span><span class="p">(</span><span class="n">entityInfo</span><span class="p">,</span> <span class="n">withDrop</span><span class="p">,</span> <span class="n">withCreate</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getDebugInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">executeMany</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the debug info for the given record at the given index depending on the state of executeMany</span>

<span class="sd">        Args:</span>
<span class="sd">            record(dict): the record to show</span>
<span class="sd">            index(int): the index of the record</span>
<span class="sd">            executeMany(boolean): if True the record may be valid else not</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">debugInfo</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">executeMany</span><span class="p">:</span>
            <span class="c1"># shall we shoe the details of the record (which might be a security risk)</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errorDebug</span><span class="p">:</span>
                <span class="c1"># show details of record</span>
                <span class="n">debugInfo</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">record  #</span><span class="si">%d</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">record</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># show only index</span>
                <span class="n">debugInfo</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">record #</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">index</span>
        <span class="k">return</span> <span class="n">debugInfo</span>

    <span class="k">def</span> <span class="nf">store</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">listOfRecords</span><span class="p">,</span> <span class="n">entityInfo</span><span class="p">,</span> <span class="n">executeMany</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixNone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        store the given list of records based on the given entityInfo</span>

<span class="sd">        Args:</span>

<span class="sd">           listOfRecords(list): the list of Dicts to be stored</span>
<span class="sd">           entityInfo(EntityInfo): the meta data to be used for storing</span>
<span class="sd">           executeMany(bool): if True the insert command is done with many/all records at once</span>
<span class="sd">           fixNone(bool): if True make sure empty columns in the listOfDict are filled with &quot;None&quot; values</span>
<span class="sd">           replace(bool): if True allow replace for insert</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">insertCmd</span> <span class="o">=</span> <span class="n">entityInfo</span><span class="o">.</span><span class="n">getInsertCmd</span><span class="p">(</span><span class="n">replace</span><span class="o">=</span><span class="n">replace</span><span class="p">)</span>
        <span class="n">record</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">executeMany</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">fixNone</span><span class="p">:</span>
                    <span class="n">LOD</span><span class="o">.</span><span class="n">setNone4List</span><span class="p">(</span><span class="n">listOfRecords</span><span class="p">,</span> <span class="n">entityInfo</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="n">insertCmd</span><span class="p">,</span> <span class="n">listOfRecords</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">listOfRecords</span><span class="p">:</span>
                    <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">fixNone</span><span class="p">:</span>
                        <span class="n">LOD</span><span class="o">.</span><span class="n">setNone</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">entityInfo</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">insertCmd</span><span class="p">,</span> <span class="n">record</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">ProgrammingError</span> <span class="k">as</span> <span class="n">pe</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">pe</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;You did not supply a value for binding&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;:&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
                    <span class="c1"># sqlite now returns the parameter name not the number</span>
                    <span class="c1"># You did not supply a value for binding parameter :type.</span>
                    <span class="n">columnName</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;:([a-zA-Z][a-zA-Z0-9_]*)&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">columnName</span> <span class="o">=</span> <span class="n">columnName</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># pre python 3.10</span>
                    <span class="c1"># You did not supply a value for binding 2.</span>
                    <span class="n">columnIndex</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d+&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">columnName</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">entityInfo</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="n">columnIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
                <span class="n">debugInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDebugInfo</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">executeMany</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s2">failed: no value supplied for column &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="si">%s</span><span class="s2">&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="n">insertCmd</span><span class="p">,</span> <span class="n">columnName</span><span class="p">,</span> <span class="n">debugInfo</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">pe</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">InterfaceError</span> <span class="k">as</span> <span class="n">ie</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">ie</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;Error binding parameter&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
                <span class="n">columnName</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;:[_a-zA-Z]\w*&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">debugInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDebugInfo</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">executeMany</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s2">failed: error binding column &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="si">%s</span><span class="s2">&quot;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="n">insertCmd</span><span class="p">,</span> <span class="n">columnName</span><span class="p">,</span> <span class="n">debugInfo</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ie</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">debugInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDebugInfo</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">executeMany</span><span class="p">)</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s2">failed:</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insertCmd</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">),</span> <span class="n">debugInfo</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">queryGen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sqlQuery</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        run the given sqlQuery a a generator for dicts</span>

<span class="sd">        Args:</span>

<span class="sd">            sqlQuery(string): the SQL query to be executed</span>
<span class="sd">            params(tuple): the query params, if any</span>

<span class="sd">        Returns:</span>
<span class="sd">            a generator of dicts</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="c1"># https://stackoverflow.com/a/13735506/1497139</span>
        <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">)</span>
        <span class="n">colname</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">query</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># loop over all rows</span>
            <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">query</span><span class="p">:</span>
                <span class="n">record</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">colname</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span>
                <span class="k">yield</span> <span class="n">record</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">pass</span>
        <span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sqlQuery</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        run the given sqlQuery and return a list of Dicts</span>

<span class="sd">        Args:</span>

<span class="sd">            sqlQuery(string): the SQL query to be executed</span>
<span class="sd">            params(tuple): the query params, if any</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: a list of Dicts</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">resultList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryGen</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
            <span class="n">resultList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resultList</span>

    <span class="k">def</span> <span class="nf">queryAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entityInfo</span><span class="p">,</span> <span class="n">fixDates</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        query all records for the given entityName/tableName</span>

<span class="sd">        Args:</span>
<span class="sd">           entityName(string): name of the entity/table to qury</span>
<span class="sd">           fixDates(boolean): True if date entries should be returned as such and not as strings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sqlQuery</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">entityInfo</span><span class="o">.</span><span class="n">name</span>
        <span class="n">resultList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">fixDates</span><span class="p">:</span>
            <span class="n">entityInfo</span><span class="o">.</span><span class="n">fixDates</span><span class="p">(</span><span class="n">resultList</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resultList</span>

    <span class="k">def</span> <span class="nf">getTableList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableType</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the schema information from this database</span>

<span class="sd">        Args:</span>
<span class="sd">            tableType(str): table or view</span>

<span class="sd">        Return:</span>
<span class="sd">            list: a list as derived from PRAGMA table_info</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tableQuery</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT name FROM sqlite_master WHERE type=&#39;</span><span class="si">{</span><span class="n">tableType</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
        <span class="n">tableList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">tableQuery</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
            <span class="n">tableName</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
            <span class="n">columnQuery</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;PRAGMA table_info(&#39;</span><span class="si">{</span><span class="n">tableName</span><span class="si">}</span><span class="s2">&#39;)&quot;</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">columnQuery</span><span class="p">)</span>
            <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">columns</span>
        <span class="k">return</span> <span class="n">tableList</span>

    <span class="k">def</span> <span class="nf">getTableDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableType</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the schema information from this database as a dict</span>

<span class="sd">        Args:</span>
<span class="sd">            tableType(str): table or view</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: Lookup map of tables with columns also being converted to dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tableDict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTableList</span><span class="p">(</span><span class="n">tableType</span><span class="o">=</span><span class="n">tableType</span><span class="p">):</span>
            <span class="n">colDict</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]:</span>
                <span class="n">colDict</span><span class="p">[</span><span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">col</span>
            <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colDict</span>
            <span class="n">tableDict</span><span class="p">[</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">table</span>
        <span class="k">return</span> <span class="n">tableDict</span>

    <span class="k">def</span> <span class="nf">restoreProgress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">remaining</span><span class="p">,</span> <span class="n">total</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="s2">&quot;Restore&quot;</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">remaining</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">backupProgress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">remaining</span><span class="p">,</span> <span class="n">total</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="s2">&quot;Backup&quot;</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">remaining</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">progress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">remaining</span><span class="p">,</span> <span class="n">total</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        show progress</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> at </span><span class="si">%5.0f%%</span><span class="s2">&quot;</span>
            <span class="o">%</span> <span class="p">(</span>
                <span class="n">action</span><span class="p">,</span>
                <span class="s2">&quot;... &quot;</span> <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;done&quot;</span><span class="p">,</span>
                <span class="p">(</span><span class="n">total</span> <span class="o">-</span> <span class="n">remaining</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">backup</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">backupDB</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;Backup&quot;</span><span class="p">,</span>
        <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">showProgress</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span>
        <span class="n">doClose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        create backup of this SQLDB to the given backup db</span>

<span class="sd">        see https://stackoverflow.com/a/59042442/1497139</span>

<span class="sd">        Args:</span>
<span class="sd">            backupDB(string): the path to the backupdb or SQLDB.RAM for in memory</span>
<span class="sd">            action(string): the action to display</span>
<span class="sd">            profile(boolean): True if timing information shall be shown</span>
<span class="sd">            showProgress(int): show progress at each showProgress page (0=show no progress)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;backup via stdlibrary not available in python &lt;=3.6 use copyToDB instead&quot;</span>
            <span class="p">)</span>
        <span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">bck</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">backupDB</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">showProgress</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;Restore&quot;</span><span class="p">:</span>
                <span class="n">progress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restoreProgress</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">progress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">backupProgress</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">progress</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">with</span> <span class="n">bck</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">backup</span><span class="p">(</span><span class="n">bck</span><span class="p">,</span> <span class="n">pages</span><span class="o">=</span><span class="n">showProgress</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">)</span>
        <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">startTime</span>
        <span class="k">if</span> <span class="n">profile</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2"> took </span><span class="si">%5.1f</span><span class="s2"> s&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">backupDB</span><span class="p">,</span> <span class="n">elapsed</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">doClose</span><span class="p">:</span>
            <span class="n">bck</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">bck</span>

    <span class="k">def</span> <span class="nf">showDump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dump</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        show the given dump up to the given limit</span>

<span class="sd">        Args:</span>
<span class="sd">            dump(string): the SQL dump to show</span>
<span class="sd">            limit(int): the maximum number of lines to display</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">dump</span><span class="p">)</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="n">limit</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">break</span>

    <span class="k">def</span> <span class="nf">executeDump</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">dump</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">maxErrors</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">errorDisplayLimit</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        execute the given dump for the given connection</span>

<span class="sd">        Args:</span>
<span class="sd">            connection(Connection): the sqlite3 connection to use</span>
<span class="sd">            dump(string): the SQL commands for the dump</span>
<span class="sd">            title(string): the title of the dump</span>
<span class="sd">            maxErrors(int): maximum number of errors to be tolerated before stopping and doing a rollback</span>
<span class="sd">            profile(boolean): True if profiling information should be shown</span>
<span class="sd">        Returns:</span>
<span class="sd">            a list of errors</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showDump</span><span class="p">(</span><span class="n">dump</span><span class="p">)</span>
        <span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">profile</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;dump of </span><span class="si">%s</span><span class="s2"> has size </span><span class="si">%4.1f</span><span class="s2"> MB&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">dump</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">))</span>
        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># fixes https://github.com/WolfgangFahl/ProceedingsTitleParser/issues/37</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">dump</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">OperationalError</span> <span class="k">as</span> <span class="n">soe</span><span class="p">:</span>
                <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;SQL error </span><span class="si">%s</span><span class="s2"> in line </span><span class="si">%d</span><span class="s2">:</span><span class="se">\n\t</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">soe</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
                <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">errorDisplayLimit</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">maxErrors</span><span class="p">:</span>
                    <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;ROLLBACK;&quot;</span><span class="p">)</span>
                    <span class="k">break</span>

            <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">profile</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;finished executing dump </span><span class="si">%s</span><span class="s2"> with </span><span class="si">%d</span><span class="s2"> lines and </span><span class="si">%d</span><span class="s2"> errors in </span><span class="si">%5.1f</span><span class="s2"> s&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">),</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">errors</span>

    <span class="k">def</span> <span class="nf">copyTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">copyDB</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        copy my content to another database</span>

<span class="sd">        Args:</span>

<span class="sd">           copyDB(Connection): the target database</span>
<span class="sd">           profile(boolean): if True show profile information</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="n">dump</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">iterdump</span><span class="p">())</span>
        <span class="c1"># cursor.executescript(dump)</span>
        <span class="k">if</span> <span class="n">profile</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;finished getting dump of </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%5.1f</span><span class="s2"> s&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dbname</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">dumpErrors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">executeDump</span><span class="p">(</span><span class="n">copyDB</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="n">dump</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dbname</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="n">profile</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dumpErrors</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">restore</span><span class="p">(</span><span class="n">backupDB</span><span class="p">,</span> <span class="n">restoreDB</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        restore the restoreDB from the given backup DB</span>

<span class="sd">        Args:</span>
<span class="sd">            backupDB(string): path to the backupDB e.g. backup.db</span>
<span class="sd">            restoreDB(string): path to the restoreDB or in Memory SQLDB.RAM</span>
<span class="sd">            profile(boolean): True if timing information should be shown</span>
<span class="sd">            showProgress(int): show progress at each showProgress page (0=show no progress)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">backupSQLDB</span> <span class="o">=</span> <span class="n">SQLDB</span><span class="p">(</span><span class="n">backupDB</span><span class="p">)</span>
        <span class="n">connection</span> <span class="o">=</span> <span class="n">backupSQLDB</span><span class="o">.</span><span class="n">backup</span><span class="p">(</span>
            <span class="n">restoreDB</span><span class="p">,</span>
            <span class="n">action</span><span class="o">=</span><span class="s2">&quot;Restore&quot;</span><span class="p">,</span>
            <span class="n">profile</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span>
            <span class="n">showProgress</span><span class="o">=</span><span class="n">showProgress</span><span class="p">,</span>
            <span class="n">doClose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">restoreSQLDB</span> <span class="o">=</span> <span class="n">SQLDB</span><span class="p">(</span><span class="n">restoreDB</span><span class="p">,</span> <span class="n">connection</span><span class="o">=</span><span class="n">connection</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">restoreSQLDB</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">dbname</span><span class="o">=</span><span class="s1">&#39;:memory:&#39;</span><span class="p">,</span> <span class="n">connection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">check_same_thread</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">errorDebug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Construct me for the given dbname and debug</p>
<p>Args:</p>
<p>dbname(string): name of the database - default is a RAM based database
   connection(Connection): an optional connection to be reused
   check_same_thread(boolean): True if object handling needs to be on the same thread see https://stackoverflow.com/a/48234567/1497139
   timeout(float): number of seconds for connection timeout
   debug(boolean): if True switch on debug
   errorDebug(boolean): True if debug info should be provided on errors (should not be used for production since it might reveal data)</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">dbname</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;:memory:&quot;</span><span class="p">,</span>
    <span class="n">connection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">check_same_thread</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">errorDebug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct me for the given dbname and debug</span>

<span class="sd">    Args:</span>

<span class="sd">       dbname(string): name of the database - default is a RAM based database</span>
<span class="sd">       connection(Connection): an optional connection to be reused</span>
<span class="sd">       check_same_thread(boolean): True if object handling needs to be on the same thread see https://stackoverflow.com/a/48234567/1497139</span>
<span class="sd">       timeout(float): number of seconds for connection timeout</span>
<span class="sd">       debug(boolean): if True switch on debug</span>
<span class="sd">       errorDebug(boolean): True if debug info should be provided on errors (should not be used for production since it might reveal data)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">dbname</span> <span class="o">=</span> <span class="n">dbname</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">errorDebug</span> <span class="o">=</span> <span class="n">errorDebug</span>
    <span class="n">SQLiteApiFixer</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="n">lenient</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">connection</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">dbname</span><span class="p">,</span>
            <span class="n">detect_types</span><span class="o">=</span><span class="n">sqlite3</span><span class="o">.</span><span class="n">PARSE_DECLTYPES</span><span class="p">,</span>
            <span class="n">check_same_thread</span><span class="o">=</span><span class="n">check_same_thread</span><span class="p">,</span>
            <span class="n">timeout</span><span class="o">=</span><span class="n">timeout</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span> <span class="o">=</span> <span class="n">connection</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.backup" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">backup</span><span class="p">(</span><span class="n">backupDB</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s1">&#39;Backup&#39;</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">doClose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>create backup of this SQLDB to the given backup db</p>
<p>see https://stackoverflow.com/a/59042442/1497139</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>backupDB(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the path to the backupdb or SQLDB.RAM for in memory</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>action(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the action to display</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>profile(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if timing information shall be shown</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>showProgress(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>show progress at each showProgress page (0=show no progress)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">backup</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">backupDB</span><span class="p">,</span>
    <span class="n">action</span><span class="o">=</span><span class="s2">&quot;Backup&quot;</span><span class="p">,</span>
    <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">showProgress</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span>
    <span class="n">doClose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    create backup of this SQLDB to the given backup db</span>

<span class="sd">    see https://stackoverflow.com/a/59042442/1497139</span>

<span class="sd">    Args:</span>
<span class="sd">        backupDB(string): the path to the backupdb or SQLDB.RAM for in memory</span>
<span class="sd">        action(string): the action to display</span>
<span class="sd">        profile(boolean): True if timing information shall be shown</span>
<span class="sd">        showProgress(int): show progress at each showProgress page (0=show no progress)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&lt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
            <span class="s2">&quot;backup via stdlibrary not available in python &lt;=3.6 use copyToDB instead&quot;</span>
        <span class="p">)</span>
    <span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">bck</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">backupDB</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">showProgress</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="s2">&quot;Restore&quot;</span><span class="p">:</span>
            <span class="n">progress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">restoreProgress</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">progress</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">backupProgress</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">progress</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">with</span> <span class="n">bck</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">backup</span><span class="p">(</span><span class="n">bck</span><span class="p">,</span> <span class="n">pages</span><span class="o">=</span><span class="n">showProgress</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="n">progress</span><span class="p">)</span>
    <span class="n">elapsed</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">startTime</span>
    <span class="k">if</span> <span class="n">profile</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> to </span><span class="si">%s</span><span class="s2"> took </span><span class="si">%5.1f</span><span class="s2"> s&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">backupDB</span><span class="p">,</span> <span class="n">elapsed</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">doClose</span><span class="p">:</span>
        <span class="n">bck</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">bck</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.close" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">close</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>close my connection</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;close my connection&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.copyTo" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">copyTo</span><span class="p">(</span><span class="n">copyDB</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>copy my content to another database</p>
<p>Args:</p>
<p>copyDB(Connection): the target database
   profile(boolean): if True show profile information</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">copyTo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">copyDB</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    copy my content to another database</span>

<span class="sd">    Args:</span>

<span class="sd">       copyDB(Connection): the target database</span>
<span class="sd">       profile(boolean): if True show profile information</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="n">dump</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">iterdump</span><span class="p">())</span>
    <span class="c1"># cursor.executescript(dump)</span>
    <span class="k">if</span> <span class="n">profile</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;finished getting dump of </span><span class="si">%s</span><span class="s2"> in </span><span class="si">%5.1f</span><span class="s2"> s&quot;</span>
            <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dbname</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="n">dumpErrors</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">executeDump</span><span class="p">(</span><span class="n">copyDB</span><span class="o">.</span><span class="n">c</span><span class="p">,</span> <span class="n">dump</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dbname</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="n">profile</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">dumpErrors</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.createTable" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">createTable</span><span class="p">(</span><span class="n">listOfRecords</span><span class="p">,</span> <span class="n">entityName</span><span class="p">,</span> <span class="n">primaryKey</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">withCreate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">withDrop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sampleRecordCount</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">failIfTooFew</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Derive Data Definition Language CREATE TABLE command from list of Records by examining first record
as defining sample record and execute DDL command.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>listOfRecords</code>
            </td>
            <td>
                  <code><span title="list">list</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of Dicts.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>entityName</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The entity / table name to use.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>primaryKey</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The key/column to use as a primary key.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withDrop</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the existing Table should be dropped.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withCreate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if the create Table command should be executed.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sampleRecordCount</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of sample records expected and to be inspected.</p>
              </div>
            </td>
            <td>
                  <code>1</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>failIfTooFew</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Raise an Exception if too few sample records, else warn only.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>EntityInfo</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Meta data information for the created table.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">createTable</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">listOfRecords</span><span class="p">,</span>
    <span class="n">entityName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">primaryKey</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">withCreate</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">withDrop</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">sampleRecordCount</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">failIfTooFew</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Derive Data Definition Language CREATE TABLE command from list of Records by examining first record</span>
<span class="sd">    as defining sample record and execute DDL command.</span>

<span class="sd">    Args:</span>
<span class="sd">        listOfRecords (list): A list of Dicts.</span>
<span class="sd">        entityName (str): The entity / table name to use.</span>
<span class="sd">        primaryKey (str): The key/column to use as a primary key.</span>
<span class="sd">        withDrop (bool): True if the existing Table should be dropped.</span>
<span class="sd">        withCreate (bool): True if the create Table command should be executed.</span>
<span class="sd">        sampleRecordCount (int): Number of sample records expected and to be inspected.</span>
<span class="sd">        failIfTooFew (bool): Raise an Exception if too few sample records, else warn only.</span>

<span class="sd">    Returns:</span>
<span class="sd">        EntityInfo: Meta data information for the created table.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">l</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">listOfRecords</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sampleRecordCount</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">sampleRecordCount</span> <span class="o">=</span> <span class="n">l</span>
    <span class="k">if</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="n">sampleRecordCount</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;only </span><span class="si">{</span><span class="n">l</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">sampleRecordCount</span><span class="si">}</span><span class="s2"> of needed sample records to createTable available&quot;</span>
        <span class="k">if</span> <span class="n">failIfTooFew</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>

    <span class="n">sampleRecords</span> <span class="o">=</span> <span class="n">listOfRecords</span><span class="p">[:</span><span class="n">sampleRecordCount</span><span class="p">]</span>
    <span class="n">entityInfo</span> <span class="o">=</span> <span class="n">EntityInfo</span><span class="p">(</span><span class="n">sampleRecords</span><span class="p">,</span> <span class="n">entityName</span><span class="p">,</span> <span class="n">primaryKey</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">)</span>

    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">createTable4EntityInfo</span><span class="p">(</span><span class="n">entityInfo</span><span class="p">,</span> <span class="n">withDrop</span><span class="p">,</span> <span class="n">withCreate</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.createTable4EntityInfo" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">createTable4EntityInfo</span><span class="p">(</span><span class="n">entityInfo</span><span class="p">,</span> <span class="n">withDrop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">withCreate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Create a table based on the provided EntityInfo.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>entityInfo</code>
            </td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="EntityInfo (lodstorage.sql.EntityInfo)" href="#lodstorage.sql.EntityInfo">EntityInfo</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The EntityInfo object containing table metadata.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withDrop</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, drop the existing table before creation.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withCreate</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If True, execute the CREATE TABLE command.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>EntityInfo</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The provided EntityInfo object.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">createTable4EntityInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entityInfo</span><span class="p">,</span> <span class="n">withDrop</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">withCreate</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a table based on the provided EntityInfo.</span>

<span class="sd">    Args:</span>
<span class="sd">        entityInfo (EntityInfo): The EntityInfo object containing table metadata.</span>
<span class="sd">        withDrop (bool): If True, drop the existing table before creation.</span>
<span class="sd">        withCreate (bool): If True, execute the CREATE TABLE command.</span>

<span class="sd">    Returns:</span>
<span class="sd">        EntityInfo: The provided EntityInfo object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">withDrop</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">entityInfo</span><span class="o">.</span><span class="n">dropTableCmd</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">withCreate</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">entityInfo</span><span class="o">.</span><span class="n">createTableCmd</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">OperationalError</span> <span class="k">as</span> <span class="n">oe</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;createTable failed with error </span><span class="si">{</span><span class="n">oe</span><span class="si">}</span><span class="s2"> for </span><span class="si">{</span><span class="n">entityInfo</span><span class="o">.</span><span class="n">createTableCmd</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">entityInfo</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.execute" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">execute</span><span class="p">(</span><span class="n">ddlCmd</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>execute the given Data Definition Command</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ddlCmd(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>e.g. a CREATE TABLE or CREATE View command</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ddlCmd</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    execute the given Data Definition Command</span>

<span class="sd">    Args:</span>
<span class="sd">        ddlCmd(string): e.g. a CREATE TABLE or CREATE View command</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">ddlCmd</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.executeDump" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">executeDump</span><span class="p">(</span><span class="n">connection</span><span class="p">,</span> <span class="n">dump</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">maxErrors</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">errorDisplayLimit</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>execute the given dump for the given connection</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>connection(Connection)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the sqlite3 connection to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dump(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SQL commands for the dump</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the title of the dump</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>maxErrors(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>maximum number of errors to be tolerated before stopping and doing a rollback</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>profile(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if profiling information should be shown</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>
        <p>Returns:
    a list of errors</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">executeDump</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">connection</span><span class="p">,</span> <span class="n">dump</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">maxErrors</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">errorDisplayLimit</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    execute the given dump for the given connection</span>

<span class="sd">    Args:</span>
<span class="sd">        connection(Connection): the sqlite3 connection to use</span>
<span class="sd">        dump(string): the SQL commands for the dump</span>
<span class="sd">        title(string): the title of the dump</span>
<span class="sd">        maxErrors(int): maximum number of errors to be tolerated before stopping and doing a rollback</span>
<span class="sd">        profile(boolean): True if profiling information should be shown</span>
<span class="sd">    Returns:</span>
<span class="sd">        a list of errors</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showDump</span><span class="p">(</span><span class="n">dump</span><span class="p">)</span>
    <span class="n">startTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">profile</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;dump of </span><span class="si">%s</span><span class="s2"> has size </span><span class="si">%4.1f</span><span class="s2"> MB&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">dump</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1024</span> <span class="o">/</span> <span class="mi">1024</span><span class="p">))</span>
    <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1"># fixes https://github.com/WolfgangFahl/ProceedingsTitleParser/issues/37</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">dump</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">OperationalError</span> <span class="k">as</span> <span class="n">soe</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;SQL error </span><span class="si">%s</span><span class="s2"> in line </span><span class="si">%d</span><span class="s2">:</span><span class="se">\n\t</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">soe</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">errorDisplayLimit</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">maxErrors</span><span class="p">:</span>
                <span class="n">connection</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">&quot;ROLLBACK;&quot;</span><span class="p">)</span>
                <span class="k">break</span>

        <span class="n">index</span> <span class="o">=</span> <span class="n">index</span> <span class="o">+</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">profile</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;finished executing dump </span><span class="si">%s</span><span class="s2"> with </span><span class="si">%d</span><span class="s2"> lines and </span><span class="si">%d</span><span class="s2"> errors in </span><span class="si">%5.1f</span><span class="s2"> s&quot;</span>
            <span class="o">%</span> <span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">),</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">startTime</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">errors</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.getDebugInfo" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getDebugInfo</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">executeMany</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get the debug info for the given record at the given index depending on the state of executeMany</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>record(dict)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the record to show</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>index(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the index of the record</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>executeMany(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True the record may be valid else not</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getDebugInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">executeMany</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the debug info for the given record at the given index depending on the state of executeMany</span>

<span class="sd">    Args:</span>
<span class="sd">        record(dict): the record to show</span>
<span class="sd">        index(int): the index of the record</span>
<span class="sd">        executeMany(boolean): if True the record may be valid else not</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">debugInfo</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">executeMany</span><span class="p">:</span>
        <span class="c1"># shall we shoe the details of the record (which might be a security risk)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">errorDebug</span><span class="p">:</span>
            <span class="c1"># show details of record</span>
            <span class="n">debugInfo</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">record  #</span><span class="si">%d</span><span class="s2">=</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="nb">repr</span><span class="p">(</span><span class="n">record</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># show only index</span>
            <span class="n">debugInfo</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">record #</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">index</span>
    <span class="k">return</span> <span class="n">debugInfo</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.getTableDict" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getTableDict</span><span class="p">(</span><span class="n">tableType</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get the schema information from this database as a dict</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tableType(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>table or view</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Lookup map of tables with columns also being converted to dict</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getTableDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableType</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the schema information from this database as a dict</span>

<span class="sd">    Args:</span>
<span class="sd">        tableType(str): table or view</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: Lookup map of tables with columns also being converted to dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tableDict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTableList</span><span class="p">(</span><span class="n">tableType</span><span class="o">=</span><span class="n">tableType</span><span class="p">):</span>
        <span class="n">colDict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]:</span>
            <span class="n">colDict</span><span class="p">[</span><span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">col</span>
        <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colDict</span>
        <span class="n">tableDict</span><span class="p">[</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">table</span>
    <span class="k">return</span> <span class="n">tableDict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.getTableList" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getTableList</span><span class="p">(</span><span class="n">tableType</span><span class="o">=</span><span class="s1">&#39;table&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get the schema information from this database</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tableType(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>table or view</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="return" open>
  <summary>Return</summary>
  <p>list: a list as derived from PRAGMA table_info</p>
</details>

            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getTableList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tableType</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the schema information from this database</span>

<span class="sd">    Args:</span>
<span class="sd">        tableType(str): table or view</span>

<span class="sd">    Return:</span>
<span class="sd">        list: a list as derived from PRAGMA table_info</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tableQuery</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SELECT name FROM sqlite_master WHERE type=&#39;</span><span class="si">{</span><span class="n">tableType</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
    <span class="n">tableList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">tableQuery</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
        <span class="n">tableName</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="n">columnQuery</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;PRAGMA table_info(&#39;</span><span class="si">{</span><span class="n">tableName</span><span class="si">}</span><span class="s2">&#39;)&quot;</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">columnQuery</span><span class="p">)</span>
        <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">columns</span>
    <span class="k">return</span> <span class="n">tableList</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.logError" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">logError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>log the given error message to stderr</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>msg(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the error messsage to display</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">logError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    log the given error message to stderr</span>

<span class="sd">    Args:</span>
<span class="sd">        msg(str): the error messsage to display</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.progress" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">progress</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">remaining</span><span class="p">,</span> <span class="n">total</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>show progress</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">progress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">action</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">remaining</span><span class="p">,</span> <span class="n">total</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    show progress</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span>
        <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> at </span><span class="si">%5.0f%%</span><span class="s2">&quot;</span>
        <span class="o">%</span> <span class="p">(</span>
            <span class="n">action</span><span class="p">,</span>
            <span class="s2">&quot;... &quot;</span> <span class="k">if</span> <span class="n">status</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;done&quot;</span><span class="p">,</span>
            <span class="p">(</span><span class="n">total</span> <span class="o">-</span> <span class="n">remaining</span><span class="p">)</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.query" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">query</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>run the given sqlQuery and return a list of Dicts</p>
<p>Args:</p>
<pre><code>sqlQuery(string): the SQL query to be executed
params(tuple): the query params, if any
</code></pre>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a list of Dicts</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sqlQuery</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    run the given sqlQuery and return a list of Dicts</span>

<span class="sd">    Args:</span>

<span class="sd">        sqlQuery(string): the SQL query to be executed</span>
<span class="sd">        params(tuple): the query params, if any</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: a list of Dicts</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">resultList</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">queryGen</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
        <span class="n">resultList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resultList</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.queryAll" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">queryAll</span><span class="p">(</span><span class="n">entityInfo</span><span class="p">,</span> <span class="n">fixDates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>query all records for the given entityName/tableName</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>entityName(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>name of the entity/table to qury</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fixDates(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if date entries should be returned as such and not as strings</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">queryAll</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entityInfo</span><span class="p">,</span> <span class="n">fixDates</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    query all records for the given entityName/tableName</span>

<span class="sd">    Args:</span>
<span class="sd">       entityName(string): name of the entity/table to qury</span>
<span class="sd">       fixDates(boolean): True if date entries should be returned as such and not as strings</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sqlQuery</span> <span class="o">=</span> <span class="s2">&quot;SELECT * FROM </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">entityInfo</span><span class="o">.</span><span class="n">name</span>
    <span class="n">resultList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">fixDates</span><span class="p">:</span>
        <span class="n">entityInfo</span><span class="o">.</span><span class="n">fixDates</span><span class="p">(</span><span class="n">resultList</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">resultList</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.queryGen" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">queryGen</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>run the given sqlQuery a a generator for dicts</p>
<p>Args:</p>
<pre><code>sqlQuery(string): the SQL query to be executed
params(tuple): the query params, if any
</code></pre>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a generator of dicts</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">queryGen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sqlQuery</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    run the given sqlQuery a a generator for dicts</span>

<span class="sd">    Args:</span>

<span class="sd">        sqlQuery(string): the SQL query to be executed</span>
<span class="sd">        params(tuple): the query params, if any</span>

<span class="sd">    Returns:</span>
<span class="sd">        a generator of dicts</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debug</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="c1"># https://stackoverflow.com/a/13735506/1497139</span>
    <span class="n">cur</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">params</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="n">cur</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sqlQuery</span><span class="p">)</span>
    <span class="n">colname</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">query</span><span class="o">.</span><span class="n">description</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># loop over all rows</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">query</span><span class="p">:</span>
            <span class="n">record</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">colname</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span>
            <span class="k">yield</span> <span class="n">record</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">pass</span>
    <span class="n">cur</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.restore" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">restore</span><span class="p">(</span><span class="n">backupDB</span><span class="p">,</span> <span class="n">restoreDB</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>restore the restoreDB from the given backup DB</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>backupDB(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>path to the backupDB e.g. backup.db</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>restoreDB(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>path to the restoreDB or in Memory SQLDB.RAM</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>profile(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if timing information should be shown</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>showProgress(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>show progress at each showProgress page (0=show no progress)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">restore</span><span class="p">(</span><span class="n">backupDB</span><span class="p">,</span> <span class="n">restoreDB</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">showProgress</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    restore the restoreDB from the given backup DB</span>

<span class="sd">    Args:</span>
<span class="sd">        backupDB(string): path to the backupDB e.g. backup.db</span>
<span class="sd">        restoreDB(string): path to the restoreDB or in Memory SQLDB.RAM</span>
<span class="sd">        profile(boolean): True if timing information should be shown</span>
<span class="sd">        showProgress(int): show progress at each showProgress page (0=show no progress)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">backupSQLDB</span> <span class="o">=</span> <span class="n">SQLDB</span><span class="p">(</span><span class="n">backupDB</span><span class="p">)</span>
    <span class="n">connection</span> <span class="o">=</span> <span class="n">backupSQLDB</span><span class="o">.</span><span class="n">backup</span><span class="p">(</span>
        <span class="n">restoreDB</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s2">&quot;Restore&quot;</span><span class="p">,</span>
        <span class="n">profile</span><span class="o">=</span><span class="n">profile</span><span class="p">,</span>
        <span class="n">showProgress</span><span class="o">=</span><span class="n">showProgress</span><span class="p">,</span>
        <span class="n">doClose</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">restoreSQLDB</span> <span class="o">=</span> <span class="n">SQLDB</span><span class="p">(</span><span class="n">restoreDB</span><span class="p">,</span> <span class="n">connection</span><span class="o">=</span><span class="n">connection</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">restoreSQLDB</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.showDump" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">showDump</span><span class="p">(</span><span class="n">dump</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>show the given dump up to the given limit</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dump(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the SQL dump to show</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>limit(int)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the maximum number of lines to display</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">showDump</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dump</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    show the given dump up to the given limit</span>

<span class="sd">    Args:</span>
<span class="sd">        dump(string): the SQL dump to show</span>
<span class="sd">        limit(int): the maximum number of lines to display</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="n">dump</span><span class="p">)</span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">&lt;=</span> <span class="n">limit</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">break</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sql.SQLDB.store" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">store</span><span class="p">(</span><span class="n">listOfRecords</span><span class="p">,</span> <span class="n">entityInfo</span><span class="p">,</span> <span class="n">executeMany</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixNone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>store the given list of records based on the given entityInfo</p>
<p>Args:</p>
<p>listOfRecords(list): the list of Dicts to be stored
   entityInfo(EntityInfo): the meta data to be used for storing
   executeMany(bool): if True the insert command is done with many/all records at once
   fixNone(bool): if True make sure empty columns in the listOfDict are filled with "None" values
   replace(bool): if True allow replace for insert</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sql.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">store</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">listOfRecords</span><span class="p">,</span> <span class="n">entityInfo</span><span class="p">,</span> <span class="n">executeMany</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fixNone</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">replace</span><span class="o">=</span><span class="kc">False</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    store the given list of records based on the given entityInfo</span>

<span class="sd">    Args:</span>

<span class="sd">       listOfRecords(list): the list of Dicts to be stored</span>
<span class="sd">       entityInfo(EntityInfo): the meta data to be used for storing</span>
<span class="sd">       executeMany(bool): if True the insert command is done with many/all records at once</span>
<span class="sd">       fixNone(bool): if True make sure empty columns in the listOfDict are filled with &quot;None&quot; values</span>
<span class="sd">       replace(bool): if True allow replace for insert</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">insertCmd</span> <span class="o">=</span> <span class="n">entityInfo</span><span class="o">.</span><span class="n">getInsertCmd</span><span class="p">(</span><span class="n">replace</span><span class="o">=</span><span class="n">replace</span><span class="p">)</span>
    <span class="n">record</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">executeMany</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fixNone</span><span class="p">:</span>
                <span class="n">LOD</span><span class="o">.</span><span class="n">setNone4List</span><span class="p">(</span><span class="n">listOfRecords</span><span class="p">,</span> <span class="n">entityInfo</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">executemany</span><span class="p">(</span><span class="n">insertCmd</span><span class="p">,</span> <span class="n">listOfRecords</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">listOfRecords</span><span class="p">:</span>
                <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">if</span> <span class="n">fixNone</span><span class="p">:</span>
                    <span class="n">LOD</span><span class="o">.</span><span class="n">setNone</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">entityInfo</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">insertCmd</span><span class="p">,</span> <span class="n">record</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
    <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">ProgrammingError</span> <span class="k">as</span> <span class="n">pe</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">pe</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;You did not supply a value for binding&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;:&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
                <span class="c1"># sqlite now returns the parameter name not the number</span>
                <span class="c1"># You did not supply a value for binding parameter :type.</span>
                <span class="n">columnName</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;:([a-zA-Z][a-zA-Z0-9_]*)&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">columnName</span> <span class="o">=</span> <span class="n">columnName</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># pre python 3.10</span>
                <span class="c1"># You did not supply a value for binding 2.</span>
                <span class="n">columnIndex</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\d+&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">columnName</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">entityInfo</span><span class="o">.</span><span class="n">typeMap</span><span class="o">.</span><span class="n">keys</span><span class="p">())[</span><span class="n">columnIndex</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span>
            <span class="n">debugInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDebugInfo</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">executeMany</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s2">failed: no value supplied for column &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="si">%s</span><span class="s2">&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">insertCmd</span><span class="p">,</span> <span class="n">columnName</span><span class="p">,</span> <span class="n">debugInfo</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">pe</span>
    <span class="k">except</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">InterfaceError</span> <span class="k">as</span> <span class="n">ie</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">ie</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;Error binding parameter&quot;</span> <span class="ow">in</span> <span class="n">msg</span><span class="p">:</span>
            <span class="n">columnName</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;:[_a-zA-Z]\w*&quot;</span><span class="p">,</span> <span class="n">msg</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">debugInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDebugInfo</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">executeMany</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s2">failed: error binding column &#39;</span><span class="si">%s</span><span class="s2">&#39;</span><span class="si">%s</span><span class="s2">&quot;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">insertCmd</span><span class="p">,</span> <span class="n">columnName</span><span class="p">,</span> <span class="n">debugInfo</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ie</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
        <span class="n">debugInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getDebugInfo</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">executeMany</span><span class="p">)</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="se">\n</span><span class="s2">failed:</span><span class="si">%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">insertCmd</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">ex</span><span class="p">),</span> <span class="n">debugInfo</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.sqlite_api" class="doc doc-heading">
            <code>sqlite_api</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2024-08-24</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.sqlite_api.DatetimeAdapter" class="doc doc-heading">
            <code>DatetimeAdapter</code>


</h3>


    <div class="doc doc-contents ">


        <p>Class for converting date and time formats with optional lenient error handling.</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">DatetimeAdapter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class for converting date and time formats with optional lenient error handling.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize with optional lenient error handling.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lenient</span> <span class="o">=</span> <span class="n">lenient</span>

    <span class="k">def</span> <span class="nf">_handle_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Validate and decode the input bytes into string.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Input must be a byte string.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">val</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_handle_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">error</span><span class="p">:</span> <span class="ne">Exception</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handle errors based on the lenient mode.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lenient</span><span class="p">:</span>
            <span class="n">logging</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to convert </span><span class="si">{</span><span class="n">val</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">error</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">error</span>

    <span class="k">def</span> <span class="nf">convert_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert ISO 8601 date byte string to a datetime.date object.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">decoded_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_input</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">decoded_date</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">dt</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">convert_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert ISO 8601 datetime byte string to a datetime.datetime object.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">decoded_datetime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_input</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">decoded_datetime</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">convert_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert Unix epoch timestamp byte string to a datetime.datetime object.&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">decoded_string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_input</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
            <span class="n">timestamp_float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">decoded_string</span><span class="p">)</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">timestamp_float</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">dt</span>
        <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">_ve</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">decoded_string</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">dt</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.DatetimeAdapter.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">lenient</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize with optional lenient error handling.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize with optional lenient error handling.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">lenient</span> <span class="o">=</span> <span class="n">lenient</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.DatetimeAdapter.convert_date" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_date</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Convert ISO 8601 date byte string to a datetime.date object.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">convert_date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert ISO 8601 date byte string to a datetime.date object.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">decoded_date</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_input</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">decoded_date</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dt</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.DatetimeAdapter.convert_datetime" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_datetime</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Convert ISO 8601 datetime byte string to a datetime.datetime object.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">convert_datetime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert ISO 8601 datetime byte string to a datetime.datetime object.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">decoded_datetime</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_input</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">decoded_datetime</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.DatetimeAdapter.convert_timestamp" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_timestamp</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Convert Unix epoch timestamp byte string to a datetime.datetime object.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">convert_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert Unix epoch timestamp byte string to a datetime.datetime object.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">decoded_string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_input</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
        <span class="n">timestamp_float</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">decoded_string</span><span class="p">)</span> <span class="o">/</span> <span class="mi">10</span><span class="o">**</span><span class="mi">6</span>
        <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromtimestamp</span><span class="p">(</span><span class="n">timestamp_float</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dt</span>
    <span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">_ve</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">dt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">fromisoformat</span><span class="p">(</span><span class="n">decoded_string</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">dt</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handle_error</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.sqlite_api.SQLiteApiFixer" class="doc doc-heading">
            <code>SQLiteApiFixer</code>


</h3>


    <div class="doc doc-contents ">


        <p>Class to register SQLite adapters
and converters using a DatetimeAdapter instance.</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SQLiteApiFixer</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to register SQLite adapters</span>
<span class="sd">    and converters using a DatetimeAdapter instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_instance</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># Singleton instance</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Private constructor to initialize the singleton instance.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adapter</span> <span class="o">=</span> <span class="n">DatetimeAdapter</span><span class="p">(</span><span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_converters</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">register_adapters</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">install</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Install the singleton instance and register SQLite adapters and converters.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>

    <span class="k">def</span> <span class="nf">register_adapters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register the necessary SQLite adapters.&quot;&quot;&quot;</span>
        <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_adapter</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapt_date_iso</span><span class="p">)</span>
        <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_adapter</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapt_datetime_iso</span><span class="p">)</span>
        <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_adapter</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapt_boolean</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">register_converters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Register the necessary SQLite converters.&quot;&quot;&quot;</span>
        <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_converter</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapter</span><span class="o">.</span><span class="n">convert_date</span><span class="p">)</span>
        <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_converter</span><span class="p">(</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapter</span><span class="o">.</span><span class="n">convert_datetime</span><span class="p">)</span>
        <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_converter</span><span class="p">(</span><span class="s2">&quot;timestamp&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapter</span><span class="o">.</span><span class="n">convert_timestamp</span><span class="p">)</span>
        <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_converter</span><span class="p">(</span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_boolean</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">adapt_date_iso</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adapt datetime.date to ISO 8601 date.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">val</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">adapt_datetime_iso</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adapt datetime.datetime to timezone-naive ISO 8601 date.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">val</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">adapt_boolean</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adapt boolean to int.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">val</span> <span class="k">else</span> <span class="mi">0</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">convert_boolean</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Convert 0 or 1 to boolean.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.SQLiteApiFixer.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">lenient</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Private constructor to initialize the singleton instance.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Private constructor to initialize the singleton instance.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">adapter</span> <span class="o">=</span> <span class="n">DatetimeAdapter</span><span class="p">(</span><span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">register_converters</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">register_adapters</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.SQLiteApiFixer.adapt_boolean" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">adapt_boolean</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Adapt boolean to int.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">adapt_boolean</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adapt boolean to int.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">val</span> <span class="k">else</span> <span class="mi">0</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.SQLiteApiFixer.adapt_date_iso" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">adapt_date_iso</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Adapt datetime.date to ISO 8601 date.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">adapt_date_iso</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adapt datetime.date to ISO 8601 date.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">val</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.SQLiteApiFixer.adapt_datetime_iso" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">adapt_datetime_iso</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Adapt datetime.datetime to timezone-naive ISO 8601 date.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">adapt_datetime_iso</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adapt datetime.datetime to timezone-naive ISO 8601 date.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">val</span><span class="o">.</span><span class="n">isoformat</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.SQLiteApiFixer.convert_boolean" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">convert_boolean</span><span class="p">(</span><span class="n">val</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Convert 0 or 1 to boolean.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">convert_boolean</span><span class="p">(</span><span class="n">val</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert 0 or 1 to boolean.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">bool</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">val</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.SQLiteApiFixer.install" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">install</span><span class="p">(</span><span class="n">lenient</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Install the singleton instance and register SQLite adapters and converters.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">install</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">lenient</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Install the singleton instance and register SQLite adapters and converters.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">lenient</span><span class="o">=</span><span class="n">lenient</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.SQLiteApiFixer.register_adapters" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">register_adapters</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Register the necessary SQLite adapters.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">register_adapters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register the necessary SQLite adapters.&quot;&quot;&quot;</span>
    <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_adapter</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapt_date_iso</span><span class="p">)</span>
    <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_adapter</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapt_datetime_iso</span><span class="p">)</span>
    <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_adapter</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapt_boolean</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sqlite_api.SQLiteApiFixer.register_converters" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">register_converters</span><span class="p">()</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Register the necessary SQLite converters.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sqlite_api.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span>
<span class="normal">98</span>
<span class="normal">99</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">register_converters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Register the necessary SQLite converters.&quot;&quot;&quot;</span>
    <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_converter</span><span class="p">(</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapter</span><span class="o">.</span><span class="n">convert_date</span><span class="p">)</span>
    <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_converter</span><span class="p">(</span><span class="s2">&quot;datetime&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapter</span><span class="o">.</span><span class="n">convert_datetime</span><span class="p">)</span>
    <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_converter</span><span class="p">(</span><span class="s2">&quot;timestamp&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">adapter</span><span class="o">.</span><span class="n">convert_timestamp</span><span class="p">)</span>
    <span class="n">sqlite3</span><span class="o">.</span><span class="n">register_converter</span><span class="p">(</span><span class="s2">&quot;boolean&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">convert_boolean</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.storageconfig" class="doc doc-heading">
            <code>storageconfig</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2020-08-29</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.storageconfig.StorageConfig" class="doc doc-heading">
            <code>StorageConfig</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>a storage configuration</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/storageconfig.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">StorageConfig</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    a storage configuration</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">getCachePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ensureExists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the path to the default cache</span>

<span class="sd">        Args:</span>
<span class="sd">            name(str): the name of the cache to use</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">cachedir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cacheRootDir</span><span class="si">}</span><span class="s2">/.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cacheDirName</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="n">ensureExists</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">cachedir</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">cachedir</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">cachedir</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">mode</span><span class="o">=</span><span class="n">StoreMode</span><span class="o">.</span><span class="n">SQL</span><span class="p">,</span>
        <span class="n">cacheRootDir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cacheDirName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;lodstorage&quot;</span><span class="p">,</span>
        <span class="n">cacheFile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">withShowProgress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">profile</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">errorDebug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>

<span class="sd">        Args:</span>
<span class="sd">            mode(StoreMode): the storage mode e.g. sql</span>
<span class="sd">            cacheRootDir(str): the cache root directory to use - if None the home directory will be used</span>
<span class="sd">            cacheFile(string): the common cacheFile to use (if any)</span>
<span class="sd">            withShowProgress(boolean): True if progress should be shown</span>
<span class="sd">            profile(boolean): True if timing / profiling information should be shown</span>
<span class="sd">            debug(boolean): True if debugging information should be shown</span>
<span class="sd">            errorDebug(boolean): True if debug info should be provided on errors (should not be used for production since it might reveal data)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">cacheRootDir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">home</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cacheRootDir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">home</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cacheRootDir</span> <span class="o">=</span> <span class="n">cacheRootDir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cacheDirName</span> <span class="o">=</span> <span class="n">cacheDirName</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cacheFile</span> <span class="o">=</span> <span class="n">cacheFile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">withShowProgress</span> <span class="o">=</span> <span class="n">withShowProgress</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">errorDebug</span> <span class="o">=</span> <span class="n">errorDebug</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getDefault</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">StorageConfig</span><span class="o">.</span><span class="n">getSQL</span><span class="p">(</span><span class="n">debug</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getSQL</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">StorageConfig</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">StoreMode</span><span class="o">.</span><span class="n">SQL</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">tableName</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">config</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getJSON</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">StorageConfig</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">StoreMode</span><span class="o">.</span><span class="n">JSON</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">config</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getJsonPickle</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">StorageConfig</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">StoreMode</span><span class="o">.</span><span class="n">JSONPICKLE</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">config</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getSPARQL</span><span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">endpoint</span><span class="p">,</span> <span class="n">host</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">StorageConfig</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">StoreMode</span><span class="o">.</span><span class="n">SPARQL</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">prefix</span> <span class="o">=</span> <span class="n">prefix</span>
        <span class="n">config</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">host</span>
        <span class="n">config</span><span class="o">.</span><span class="n">endpoint</span> <span class="o">=</span> <span class="n">endpoint</span>
        <span class="k">return</span> <span class="n">config</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">getYaml</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">StorageConfig</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">StoreMode</span><span class="o">.</span><span class="n">YAML</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">config</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.storageconfig.StorageConfig.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="n">StoreMode</span><span class="o">.</span><span class="n">SQL</span><span class="p">,</span> <span class="n">cacheRootDir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cacheDirName</span><span class="o">=</span><span class="s1">&#39;lodstorage&#39;</span><span class="p">,</span> <span class="n">cacheFile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">withShowProgress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">profile</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">errorDebug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Constructor</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>mode(StoreMode)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the storage mode e.g. sql</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cacheRootDir(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the cache root directory to use - if None the home directory will be used</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>cacheFile(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the common cacheFile to use (if any)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withShowProgress(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if progress should be shown</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>profile(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if timing / profiling information should be shown</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>debug(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if debugging information should be shown</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>errorDebug(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>True if debug info should be provided on errors (should not be used for production since it might reveal data)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/storageconfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="n">StoreMode</span><span class="o">.</span><span class="n">SQL</span><span class="p">,</span>
    <span class="n">cacheRootDir</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cacheDirName</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;lodstorage&quot;</span><span class="p">,</span>
    <span class="n">cacheFile</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">withShowProgress</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">profile</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">errorDebug</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>

<span class="sd">    Args:</span>
<span class="sd">        mode(StoreMode): the storage mode e.g. sql</span>
<span class="sd">        cacheRootDir(str): the cache root directory to use - if None the home directory will be used</span>
<span class="sd">        cacheFile(string): the common cacheFile to use (if any)</span>
<span class="sd">        withShowProgress(boolean): True if progress should be shown</span>
<span class="sd">        profile(boolean): True if timing / profiling information should be shown</span>
<span class="sd">        debug(boolean): True if debugging information should be shown</span>
<span class="sd">        errorDebug(boolean): True if debug info should be provided on errors (should not be used for production since it might reveal data)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">cacheRootDir</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">home</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cacheRootDir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">home</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cacheRootDir</span> <span class="o">=</span> <span class="n">cacheRootDir</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cacheDirName</span> <span class="o">=</span> <span class="n">cacheDirName</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cacheFile</span> <span class="o">=</span> <span class="n">cacheFile</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">profile</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">withShowProgress</span> <span class="o">=</span> <span class="n">withShowProgress</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">errorDebug</span> <span class="o">=</span> <span class="n">errorDebug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.storageconfig.StorageConfig.getCachePath" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getCachePath</span><span class="p">(</span><span class="n">ensureExists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get the path to the default cache</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>name(str)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the name of the cache to use</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/storageconfig.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getCachePath</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ensureExists</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the path to the default cache</span>

<span class="sd">    Args:</span>
<span class="sd">        name(str): the name of the cache to use</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">cachedir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cacheRootDir</span><span class="si">}</span><span class="s2">/.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">cacheDirName</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">if</span> <span class="n">ensureExists</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">cachedir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">cachedir</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cachedir</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.storageconfig.StoreMode" class="doc doc-heading">
            <code>StoreMode</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="enum.Enum">Enum</span></code></p>


        <p>possible supported storage modes</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/storageconfig.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">StoreMode</span><span class="p">(</span><span class="n">Enum</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    possible supported storage modes</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">JSONPICKLE</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># JSON Pickle</span>
    <span class="n">JSON</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">SQL</span> <span class="o">=</span> <span class="mi">3</span>
    <span class="n">SPARQL</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">YAML</span> <span class="o">=</span> <span class="mi">5</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.sync" class="doc doc-heading">
            <code>sync</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2023-12-27</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.sync.Sync" class="doc doc-heading">
            <code>Sync</code>


</h3>


    <div class="doc doc-contents ">


        <p>A class to help with synchronization between two sets of data, each represented as a list of dictionaries.</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sync.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Sync</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A class to help with synchronization between two sets of data, each represented as a list of dictionaries.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="n">SyncPair</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Initialize the Sync class with the given Synchronization Pair.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pair</span> <span class="o">=</span> <span class="n">pair</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sync_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_sync_dict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sides</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;left&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">],</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">]}</span>

    <span class="k">def</span> <span class="nf">handle_direction_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">invalid_direction_msg</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Invalid direction &#39;</span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s2">&#39;. Use </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">directions</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span>
        <span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">invalid_direction_msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_side_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">side</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">invalid_side_msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;Invalid side &#39;</span><span class="si">{</span><span class="n">side</span><span class="si">}</span><span class="s2">&#39;. Use </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sides</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> for left or </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sides</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2"> for right.&quot;</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">invalid_side_msg</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_create_sync_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a dictionary representing the synchronization state between left and right data sources.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">l_keys</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">l_key</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">l_data</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">l_key</span> <span class="ow">in</span> <span class="n">d</span><span class="p">}</span>
        <span class="n">r_keys</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">r_key</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">r_data</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">r_key</span> <span class="ow">in</span> <span class="n">d</span><span class="p">}</span>

        <span class="n">sync_dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;&quot;</span><span class="p">:</span> <span class="n">r_keys</span> <span class="o">-</span> <span class="n">l_keys</span><span class="p">,</span>  <span class="c1"># Present in right but not in left</span>
            <span class="s2">&quot;&quot;</span><span class="p">:</span> <span class="n">l_keys</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">r_keys</span><span class="p">),</span>  <span class="c1"># Present in both</span>
            <span class="s2">&quot;&quot;</span><span class="p">:</span> <span class="n">l_keys</span> <span class="o">-</span> <span class="n">r_keys</span><span class="p">,</span>  <span class="c1"># Present in left but not in right</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">sync_dict</span>

    <span class="k">def</span> <span class="nf">get_record_by_pkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">side</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pkey</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves a record by primary key from the appropriate data source as specified by direction.</span>

<span class="sd">        Args:</span>
<span class="sd">            side (str): The side of data source, &quot;&quot;,&quot;l&quot; or &quot;left&quot; for left and &quot;&quot;,&quot;r&quot; or &quot;right&quot; for right.</span>
<span class="sd">            pkey (str): The primary key of the record to retrieve.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Dict[str, Any]]: The record if found, otherwise None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">record</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">side</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sides</span><span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">]:</span>  <span class="c1"># retrieve from left</span>
            <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">l_by_pkey</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pkey</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">side</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sides</span><span class="p">[</span><span class="s2">&quot;right&quot;</span><span class="p">]:</span>  <span class="c1"># retrieve from right</span>
            <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">r_by_pkey</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pkey</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_side_error</span><span class="p">(</span><span class="n">side</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">record</span>

    <span class="k">def</span> <span class="nf">get_record_by_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">side</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieves a record by the given unique key from the appropriate data source as specified by direction.</span>

<span class="sd">        Args:</span>
<span class="sd">            side (str): The side of data source, &quot;&quot;,&quot;l&quot; or &quot;left&quot; for left and &quot;&quot;,&quot;r&quot; or &quot;right&quot; for right.</span>
<span class="sd">            key (str): The unique key of the record to retrieve.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Dict[str, Any]]: The record if found, otherwise None.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the provided direction is invalid.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">record</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">]:</span>
            <span class="n">record</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
                <span class="p">(</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">l_data</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">l_key</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">),</span>
                <span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">]:</span>
            <span class="n">record</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
                <span class="p">(</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">r_data</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">r_key</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">),</span>
                <span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_side_error</span><span class="p">(</span><span class="n">side</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">record</span>

    <span class="k">def</span> <span class="nf">get_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the keys for a given direction of synchronization.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_dict</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_dict</span><span class="p">[</span><span class="n">direction</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">handle_direction_error</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">status_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;grid&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a table representing the synchronization status.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">total_records</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span> <span class="k">for</span> <span class="n">keys</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">total_records</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># Avoid division by zero</span>
            <span class="n">total_records</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="n">table_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">direction</span><span class="p">,</span> <span class="n">keys</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">num_records</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
            <span class="n">percentage</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_records</span> <span class="o">/</span> <span class="n">total_records</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
            <span class="n">table_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;left&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">l_name</span><span class="p">,</span>
                    <span class="s2">&quot;&quot;</span><span class="p">:</span> <span class="n">direction</span><span class="p">,</span>
                    <span class="s2">&quot;right&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">r_name</span><span class="p">,</span>
                    <span class="s2">&quot;#&quot;</span><span class="p">:</span> <span class="n">num_records</span><span class="p">,</span>
                    <span class="s2">&quot;%&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">percentage</span><span class="si">:</span><span class="s2">7.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">)</span>

        <span class="n">markup</span> <span class="o">=</span> <span class="n">tabulate</span><span class="p">(</span>
            <span class="n">table_data</span><span class="p">,</span>
            <span class="n">headers</span><span class="o">=</span><span class="s2">&quot;keys&quot;</span><span class="p">,</span>
            <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">,</span>
            <span class="n">colalign</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">markup</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.sync.Sync.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">pair</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Initialize the Sync class with the given Synchronization Pair.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sync.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="n">SyncPair</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initialize the Sync class with the given Synchronization Pair.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pair</span> <span class="o">=</span> <span class="n">pair</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sync_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_create_sync_dict</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">directions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sides</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;left&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">],</span> <span class="s2">&quot;right&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">]}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sync.Sync.get_keys" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_keys</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Get the keys for a given direction of synchronization.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sync.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">direction</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">set</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the keys for a given direction of synchronization.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">direction</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_dict</span><span class="p">[</span><span class="n">direction</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle_direction_error</span><span class="p">(</span><span class="n">direction</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sync.Sync.get_record_by_key" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_record_by_key</span><span class="p">(</span><span class="n">side</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Retrieves a record by the given unique key from the appropriate data source as specified by direction.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>side</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The side of data source, "","l" or "left" for left and "","r" or "right" for right.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>key</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The unique key of the record to retrieve.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="dict">dict</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[Dict[str, Any]]: The record if found, otherwise None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the provided direction is invalid.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sync.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_record_by_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">side</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">key</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves a record by the given unique key from the appropriate data source as specified by direction.</span>

<span class="sd">    Args:</span>
<span class="sd">        side (str): The side of data source, &quot;&quot;,&quot;l&quot; or &quot;left&quot; for left and &quot;&quot;,&quot;r&quot; or &quot;right&quot; for right.</span>
<span class="sd">        key (str): The unique key of the record to retrieve.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[Dict[str, Any]]: The record if found, otherwise None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the provided direction is invalid.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">record</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">]:</span>
        <span class="n">record</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
            <span class="p">(</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">l_data</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">l_key</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">),</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">side</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">]:</span>
        <span class="n">record</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
            <span class="p">(</span><span class="n">item</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">r_data</span> <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">r_key</span><span class="p">]</span> <span class="o">==</span> <span class="n">key</span><span class="p">),</span>
            <span class="kc">None</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle_side_error</span><span class="p">(</span><span class="n">side</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">record</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sync.Sync.get_record_by_pkey" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_record_by_pkey</span><span class="p">(</span><span class="n">side</span><span class="p">,</span> <span class="n">pkey</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Retrieves a record by primary key from the appropriate data source as specified by direction.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>side</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The side of data source, "","l" or "left" for left and "","r" or "right" for right.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>pkey</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The primary key of the record to retrieve.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Optional[Dict[str, Any]]: The record if found, otherwise None.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sync.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">get_record_by_pkey</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">side</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">pkey</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Retrieves a record by primary key from the appropriate data source as specified by direction.</span>

<span class="sd">    Args:</span>
<span class="sd">        side (str): The side of data source, &quot;&quot;,&quot;l&quot; or &quot;left&quot; for left and &quot;&quot;,&quot;r&quot; or &quot;right&quot; for right.</span>
<span class="sd">        pkey (str): The primary key of the record to retrieve.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[Dict[str, Any]]: The record if found, otherwise None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">record</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">side</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sides</span><span class="p">[</span><span class="s2">&quot;left&quot;</span><span class="p">]:</span>  <span class="c1"># retrieve from left</span>
        <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">l_by_pkey</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pkey</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">side</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sides</span><span class="p">[</span><span class="s2">&quot;right&quot;</span><span class="p">]:</span>  <span class="c1"># retrieve from right</span>
        <span class="n">record</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">r_by_pkey</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pkey</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">handle_side_error</span><span class="p">(</span><span class="n">side</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">record</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.sync.Sync.status_table" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">status_table</span><span class="p">(</span><span class="n">tablefmt</span><span class="o">=</span><span class="s1">&#39;grid&#39;</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Create a table representing the synchronization status.</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/sync.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">status_table</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tablefmt</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;grid&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create a table representing the synchronization status.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">total_records</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span> <span class="k">for</span> <span class="n">keys</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_dict</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">total_records</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># Avoid division by zero</span>
        <span class="n">total_records</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="n">table_data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">direction</span><span class="p">,</span> <span class="n">keys</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sync_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">num_records</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">keys</span><span class="p">)</span>
        <span class="n">percentage</span> <span class="o">=</span> <span class="p">(</span><span class="n">num_records</span> <span class="o">/</span> <span class="n">total_records</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
        <span class="n">table_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">{</span>
                <span class="s2">&quot;left&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">l_name</span><span class="p">,</span>
                <span class="s2">&quot;&quot;</span><span class="p">:</span> <span class="n">direction</span><span class="p">,</span>
                <span class="s2">&quot;right&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">pair</span><span class="o">.</span><span class="n">r_name</span><span class="p">,</span>
                <span class="s2">&quot;#&quot;</span><span class="p">:</span> <span class="n">num_records</span><span class="p">,</span>
                <span class="s2">&quot;%&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">percentage</span><span class="si">:</span><span class="s2">7.2f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">)</span>

    <span class="n">markup</span> <span class="o">=</span> <span class="n">tabulate</span><span class="p">(</span>
        <span class="n">table_data</span><span class="p">,</span>
        <span class="n">headers</span><span class="o">=</span><span class="s2">&quot;keys&quot;</span><span class="p">,</span>
        <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">,</span>
        <span class="n">colalign</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="s2">&quot;center&quot;</span><span class="p">,</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="s2">&quot;right&quot;</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">markup</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h3 id="lodstorage.sync.SyncPair" class="doc doc-heading">
            <code>SyncPair</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">


        <p>A class to represent a pair of data sources for synchronization.</p>
<p>Attributes:
       title (str): The title of the synchronization pair.
       l_name (str): Name of the left data source (e.g., 'local').
       r_name (str): Name of the right data source (e.g., 'wikidata').
       l_data (List[Dict[str, Any]]): A list of dictionaries from the left data source.
       r_data (List[Dict[str, Any]]): A list of dictionaries from the right data source.
       l_key (str): The field name in the left data source dictionaries used as a unique identifier for synchronization.
       r_key (str): The field name in the right data source dictionaries used as a unique identifier for synchronization.
       l_pkey(str): the primary key field of the left data source
       r_pkey(str): the primary key field of the right data source</p>
<p>Example usage:
l_data = [{'id_l': '1', 'value': 'a'}, {'id_l': '2', 'value': 'b'}]
r_data = [{'id_r': '2', 'value': 'b'}, {'id_r': '3', 'value': 'c'}]
pair = SyncPair("Title", "local", "wikidata", l_data, r_data, 'id_l', 'id_r')
sync = Sync(pair)
print(sync.status_table())</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/sync.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">SyncPair</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       A class to represent a pair of data sources for synchronization.</span>

<span class="sd">       Attributes:</span>
<span class="sd">           title (str): The title of the synchronization pair.</span>
<span class="sd">           l_name (str): Name of the left data source (e.g., &#39;local&#39;).</span>
<span class="sd">           r_name (str): Name of the right data source (e.g., &#39;wikidata&#39;).</span>
<span class="sd">           l_data (List[Dict[str, Any]]): A list of dictionaries from the left data source.</span>
<span class="sd">           r_data (List[Dict[str, Any]]): A list of dictionaries from the right data source.</span>
<span class="sd">           l_key (str): The field name in the left data source dictionaries used as a unique identifier for synchronization.</span>
<span class="sd">           r_key (str): The field name in the right data source dictionaries used as a unique identifier for synchronization.</span>
<span class="sd">           l_pkey(str): the primary key field of the left data source</span>
<span class="sd">           r_pkey(str): the primary key field of the right data source</span>

<span class="sd">    Example usage:</span>
<span class="sd">    l_data = [{&#39;id_l&#39;: &#39;1&#39;, &#39;value&#39;: &#39;a&#39;}, {&#39;id_l&#39;: &#39;2&#39;, &#39;value&#39;: &#39;b&#39;}]</span>
<span class="sd">    r_data = [{&#39;id_r&#39;: &#39;2&#39;, &#39;value&#39;: &#39;b&#39;}, {&#39;id_r&#39;: &#39;3&#39;, &#39;value&#39;: &#39;c&#39;}]</span>
<span class="sd">    pair = SyncPair(&quot;Title&quot;, &quot;local&quot;, &quot;wikidata&quot;, l_data, r_data, &#39;id_l&#39;, &#39;id_r&#39;)</span>
<span class="sd">    sync = Sync(pair)</span>
<span class="sd">    print(sync.status_table())</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">l_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">r_name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">l_data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>
    <span class="n">r_data</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span>
    <span class="n">l_key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">r_key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">l_pkey</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">r_pkey</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Add dictionaries for quick primary key access</span>
    <span class="n">l_by_pkey</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">r_by_pkey</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="n">field</span><span class="p">(</span><span class="n">init</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Set the l_pkey to l_key if not provided</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l_pkey</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">l_pkey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">l_key</span>
        <span class="c1"># Set the r_pkey to r_key if not provided</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">r_pkey</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">r_pkey</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">r_key</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">l_by_pkey</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">l_pkey</span><span class="p">]:</span> <span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">l_data</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">l_pkey</span> <span class="ow">in</span> <span class="n">d</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">r_by_pkey</span> <span class="o">=</span> <span class="p">{</span><span class="n">d</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">r_pkey</span><span class="p">]:</span> <span class="n">d</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">r_data</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">r_pkey</span> <span class="ow">in</span> <span class="n">d</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.tabulateCounter" class="doc doc-heading">
            <code>tabulateCounter</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2021-06-13</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.tabulateCounter.TabulateCounter" class="doc doc-heading">
            <code>TabulateCounter</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>helper for tabulating Counters</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/tabulateCounter.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">TabulateCounter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    helper for tabulating Counters</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span>

    <span class="k">def</span> <span class="nf">mostCommonTable</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="s2">&quot;key&quot;</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="s2">&quot;%&quot;</span><span class="p">],</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;pretty&quot;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">50</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the most common Table</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bins</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">limit</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
        <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="n">binTable</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;total&quot;</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">total</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bintuple</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="n">limit</span><span class="p">)):</span>
            <span class="n">key</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">bintuple</span>
            <span class="n">binTable</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">count</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mf">100.0</span><span class="p">))</span>

        <span class="n">table</span> <span class="o">=</span> <span class="n">tabulate</span><span class="p">(</span><span class="n">binTable</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">,</span> <span class="n">floatfmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">table</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.tabulateCounter.TabulateCounter.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Constructor</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/tabulateCounter.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.tabulateCounter.TabulateCounter.mostCommonTable" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mostCommonTable</span><span class="p">(</span><span class="n">headers</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;#&#39;</span><span class="p">,</span> <span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="s1">&#39;%&#39;</span><span class="p">],</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s1">&#39;pretty&#39;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>get the most common Table</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/tabulateCounter.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mostCommonTable</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;#&quot;</span><span class="p">,</span> <span class="s2">&quot;key&quot;</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">,</span> <span class="s2">&quot;%&quot;</span><span class="p">],</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;pretty&quot;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">50</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    get the most common Table</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bins</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="n">limit</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">bins</span><span class="p">,</span> <span class="n">limit</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
    <span class="n">binTable</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;total&quot;</span><span class="p">,</span> <span class="n">bins</span><span class="p">,</span> <span class="n">total</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">bintuple</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="n">limit</span><span class="p">)):</span>
        <span class="n">key</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">bintuple</span>
        <span class="n">binTable</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">count</span> <span class="o">/</span> <span class="n">total</span> <span class="o">*</span> <span class="mf">100.0</span><span class="p">))</span>

    <span class="n">table</span> <span class="o">=</span> <span class="n">tabulate</span><span class="p">(</span><span class="n">binTable</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="n">tablefmt</span><span class="p">,</span> <span class="n">floatfmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">table</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.uml" class="doc doc-heading">
            <code>uml</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2020-09-04</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.uml.UML" class="doc doc-heading">
            <code>UML</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>UML diagrams via plantuml</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/uml.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">UML</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    UML diagrams via plantuml</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">skinparams</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">&#39; BITPlan Corporate identity skin params</span>
<span class="s2">&#39; Copyright (c) 2015-2020 BITPlan GmbH</span>
<span class="s2">&#39; see http://wiki.bitplan.com/PlantUmlSkinParams#BITPlanCI</span>
<span class="s2">&#39; skinparams generated by com.bitplan.restmodelmanager</span>
<span class="s2">skinparam note {</span>
<span class="s2">  BackGroundColor #FFFFFF</span>
<span class="s2">  FontSize 12</span>
<span class="s2">  ArrowColor #FF8000</span>
<span class="s2">  BorderColor #FF8000</span>
<span class="s2">  FontColor black</span>
<span class="s2">  FontName Technical</span>
<span class="s2">}</span>
<span class="s2">skinparam component {</span>
<span class="s2">  BackGroundColor #FFFFFF</span>
<span class="s2">  FontSize 12</span>
<span class="s2">  ArrowColor #FF8000</span>
<span class="s2">  BorderColor #FF8000</span>
<span class="s2">  FontColor black</span>
<span class="s2">  FontName Technical</span>
<span class="s2">}</span>
<span class="s2">skinparam package {</span>
<span class="s2">  BackGroundColor #FFFFFF</span>
<span class="s2">  FontSize 12</span>
<span class="s2">  ArrowColor #FF8000</span>
<span class="s2">  BorderColor #FF8000</span>
<span class="s2">  FontColor black</span>
<span class="s2">  FontName Technical</span>
<span class="s2">}</span>
<span class="s2">skinparam usecase {</span>
<span class="s2">  BackGroundColor #FFFFFF</span>
<span class="s2">  FontSize 12</span>
<span class="s2">  ArrowColor #FF8000</span>
<span class="s2">  BorderColor #FF8000</span>
<span class="s2">  FontColor black</span>
<span class="s2">  FontName Technical</span>
<span class="s2">}</span>
<span class="s2">skinparam activity {</span>
<span class="s2">  BackGroundColor #FFFFFF</span>
<span class="s2">  FontSize 12</span>
<span class="s2">  ArrowColor #FF8000</span>
<span class="s2">  BorderColor #FF8000</span>
<span class="s2">  FontColor black</span>
<span class="s2">  FontName Technical</span>
<span class="s2">}</span>
<span class="s2">skinparam classAttribute {</span>
<span class="s2">  BackGroundColor #FFFFFF</span>
<span class="s2">  FontSize 12</span>
<span class="s2">  ArrowColor #FF8000</span>
<span class="s2">  BorderColor #FF8000</span>
<span class="s2">  FontColor black</span>
<span class="s2">  FontName Technical</span>
<span class="s2">}</span>
<span class="s2">skinparam interface {</span>
<span class="s2">  BackGroundColor #FFFFFF</span>
<span class="s2">  FontSize 12</span>
<span class="s2">  ArrowColor #FF8000</span>
<span class="s2">  BorderColor #FF8000</span>
<span class="s2">  FontColor black</span>
<span class="s2">  FontName Technical</span>
<span class="s2">}</span>
<span class="s2">skinparam class {</span>
<span class="s2">  BackGroundColor #FFFFFF</span>
<span class="s2">  FontSize 12</span>
<span class="s2">  ArrowColor #FF8000</span>
<span class="s2">  BorderColor #FF8000</span>
<span class="s2">  FontColor black</span>
<span class="s2">  FontName Technical</span>
<span class="s2">}</span>
<span class="s2">skinparam object {</span>
<span class="s2">  BackGroundColor #FFFFFF</span>
<span class="s2">  FontSize 12</span>
<span class="s2">  ArrowColor #FF8000</span>
<span class="s2">  BorderColor #FF8000</span>
<span class="s2">  FontColor black</span>
<span class="s2">  FontName Technical</span>
<span class="s2">}</span>
<span class="s2">hide Circle</span>
<span class="s2">&#39; end of skinparams &#39;</span>
<span class="s2">&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructor</span>
<span class="sd">        Args:</span>
<span class="sd">            debug(boolean): True if debug information should be shown</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>

    <span class="k">def</span> <span class="nf">tableListToPlantUml</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">tableList</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">packageName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">generalizeTo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">withSkin</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        convert tableList to PlantUml notation</span>

<span class="sd">        Args:</span>
<span class="sd">            tableList(list): the tableList list of Dicts from getTableList() to convert</span>
<span class="sd">            title(string): optional title to be added</span>
<span class="sd">            packageName(string): optional packageName to be added</span>
<span class="sd">            generalizeTo(string): optional name of a general table to be derived</span>
<span class="sd">            withSkin(boolean): if True add default BITPlan skin parameters</span>

<span class="sd">        Returns:</span>
<span class="sd">            string: the Plantuml notation for the entities in columns of the given tablelist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">uml</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">inherit</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">uml</span> <span class="o">+=</span> <span class="s2">&quot;title</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s2">end title</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">title</span>
        <span class="k">if</span> <span class="n">packageName</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">uml</span> <span class="o">+=</span> <span class="s2">&quot;package </span><span class="si">%s</span><span class="s2"> {</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">packageName</span>
            <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;  &quot;</span>
        <span class="k">if</span> <span class="n">generalizeTo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">generalTable</span> <span class="o">=</span> <span class="n">Schema</span><span class="o">.</span><span class="n">getGeneral</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">generalizeTo</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
                <span class="n">inherit</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2"> &lt;|-- </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indent</span><span class="p">,</span> <span class="n">generalizeTo</span><span class="p">,</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
            <span class="n">tableList</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">generalTable</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
            <span class="n">classUml</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">sortedColumns</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">col</span><span class="p">:</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sortedColumns</span><span class="p">:</span>
                <span class="n">mandatory</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span> <span class="k">if</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;notnull&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                <span class="n">pk</span> <span class="o">=</span> <span class="s2">&quot; &lt;&lt;PK&gt;&gt;&quot;</span> <span class="k">if</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;pk&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
                <span class="n">colName</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="n">colType</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
                <span class="k">if</span> <span class="s2">&quot;link&quot;</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
                    <span class="n">colName</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
                <span class="n">colUml</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">mandatory</span><span class="si">}{</span><span class="n">colName</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="n">colType</span><span class="si">}{</span><span class="n">pk</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="n">classUml</span> <span class="o">+=</span> <span class="n">colUml</span>
            <span class="n">tableName</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;notes&quot;</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
                <span class="n">uml</span> <span class="o">+=</span> <span class="s2">&quot;Note top of </span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s2">End note</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tableName</span><span class="p">,</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;notes&quot;</span><span class="p">])</span>
            <span class="n">uml</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">class </span><span class="si">{</span><span class="n">tableName</span><span class="si">}</span><span class="s2"> &lt;&lt; Entity &gt;&gt; </span><span class="se">{{\n</span><span class="si">{</span><span class="n">classUml</span><span class="si">}{</span><span class="n">indent</span><span class="si">}</span><span class="se">}}\n</span><span class="s2">&quot;</span>
        <span class="n">uml</span> <span class="o">+=</span> <span class="n">inherit</span>
        <span class="k">if</span> <span class="n">packageName</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">uml</span> <span class="o">+=</span> <span class="s2">&quot;}</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="n">withSkin</span><span class="p">:</span>
            <span class="n">uml</span> <span class="o">+=</span> <span class="n">UML</span><span class="o">.</span><span class="n">skinparams</span>
        <span class="k">return</span> <span class="n">uml</span>

    <span class="k">def</span> <span class="nf">mergeSchema</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">schemaManager</span><span class="p">,</span>
        <span class="n">tableList</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">packageName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">generalizeTo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">withSkin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        merge Schema and tableList to PlantUml notation</span>

<span class="sd">        Args:</span>
<span class="sd">            schemaManager(SchemaManager): a schema manager to be used</span>
<span class="sd">            tableList(list): the tableList list of Dicts from getTableList() to convert</span>
<span class="sd">            title(string): optional title to be added</span>
<span class="sd">            packageName(string): optional packageName to be added</span>
<span class="sd">            generalizeTo(string): optional name of a general table to be derived</span>
<span class="sd">            withSkin(boolean): if True add default BITPlan skin parameters</span>

<span class="sd">        Returns:</span>
<span class="sd">            string: the Plantuml notation for the entities in columns of the given tablelist</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">schemaManager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;schema&quot;</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
                    <span class="n">schema</span> <span class="o">=</span> <span class="n">schemaManager</span><span class="o">.</span><span class="n">schemasByName</span><span class="p">[</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;schema&quot;</span><span class="p">]]</span>
                    <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">schemaManager</span><span class="o">.</span><span class="n">baseUrl</span><span class="p">,</span> <span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                    <span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>  <span class="c1"># mediawiki</span>
                    <span class="n">instanceNote</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="k">if</span> <span class="s2">&quot;instances&quot;</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
                        <span class="n">instanceNote</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="si">%d</span><span class="s2"> instances &quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;instances&quot;</span><span class="p">])</span>
                    <span class="n">table</span><span class="p">[</span><span class="s2">&quot;notes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;[[</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">]]</span><span class="si">%s</span><span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">url</span><span class="p">,</span>
                        <span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                        <span class="n">instanceNote</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]:</span>
                        <span class="n">colName</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">colName</span> <span class="ow">in</span> <span class="n">schema</span><span class="o">.</span><span class="n">propsByName</span><span class="p">:</span>
                            <span class="n">prop</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">propsByName</span><span class="p">[</span><span class="n">colName</span><span class="p">]</span>
                            <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">iri</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">tooltip</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                                <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">definition</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                    <span class="n">tooltip</span> <span class="o">=</span> <span class="s2">&quot;{</span><span class="si">%s</span><span class="s2">}&quot;</span> <span class="o">%</span> <span class="n">prop</span><span class="o">.</span><span class="n">definition</span>
                                <span class="n">col</span><span class="p">[</span><span class="s2">&quot;link&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;[[</span><span class="si">%s%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">]]&quot;</span> <span class="o">%</span> <span class="p">(</span>
                                    <span class="n">prop</span><span class="o">.</span><span class="n">iri</span><span class="p">,</span>
                                    <span class="n">tooltip</span><span class="p">,</span>
                                    <span class="n">colName</span><span class="p">,</span>
                                <span class="p">)</span>
                                <span class="n">col</span><span class="p">[</span><span class="s2">&quot;special&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># keep column even if generalized</span>
                    <span class="k">pass</span>
        <span class="n">plantuml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableListToPlantUml</span><span class="p">(</span>
            <span class="n">tableList</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">packageName</span><span class="o">=</span><span class="n">packageName</span><span class="p">,</span>
            <span class="n">generalizeTo</span><span class="o">=</span><span class="n">generalizeTo</span><span class="p">,</span>
            <span class="n">withSkin</span><span class="o">=</span><span class="n">withSkin</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">plantuml</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.uml.UML.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>Constructor
Args:
    debug(boolean): True if debug information should be shown</p>


            <details class="quote">
              <summary>Source code in <code>lodstorage/uml.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Constructor</span>
<span class="sd">    Args:</span>
<span class="sd">        debug(boolean): True if debug information should be shown</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.uml.UML.mergeSchema" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">mergeSchema</span><span class="p">(</span><span class="n">schemaManager</span><span class="p">,</span> <span class="n">tableList</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">packageName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">generalizeTo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">withSkin</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>merge Schema and tableList to PlantUml notation</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>schemaManager(SchemaManager)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>a schema manager to be used</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tableList(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the tableList list of Dicts from getTableList() to convert</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional title to be added</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>packageName(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional packageName to be added</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>generalizeTo(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional name of a general table to be derived</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withSkin(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True add default BITPlan skin parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>string</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the Plantuml notation for the entities in columns of the given tablelist</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/uml.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mergeSchema</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">schemaManager</span><span class="p">,</span>
    <span class="n">tableList</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">packageName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">generalizeTo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">withSkin</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    merge Schema and tableList to PlantUml notation</span>

<span class="sd">    Args:</span>
<span class="sd">        schemaManager(SchemaManager): a schema manager to be used</span>
<span class="sd">        tableList(list): the tableList list of Dicts from getTableList() to convert</span>
<span class="sd">        title(string): optional title to be added</span>
<span class="sd">        packageName(string): optional packageName to be added</span>
<span class="sd">        generalizeTo(string): optional name of a general table to be derived</span>
<span class="sd">        withSkin(boolean): if True add default BITPlan skin parameters</span>

<span class="sd">    Returns:</span>
<span class="sd">        string: the Plantuml notation for the entities in columns of the given tablelist</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">schemaManager</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;schema&quot;</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
                <span class="n">schema</span> <span class="o">=</span> <span class="n">schemaManager</span><span class="o">.</span><span class="n">schemasByName</span><span class="p">[</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;schema&quot;</span><span class="p">]]</span>
                <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">schemaManager</span><span class="o">.</span><span class="n">baseUrl</span><span class="p">,</span> <span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span>  <span class="c1"># mediawiki</span>
                <span class="n">instanceNote</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">if</span> <span class="s2">&quot;instances&quot;</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
                    <span class="n">instanceNote</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="si">%d</span><span class="s2"> instances &quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;instances&quot;</span><span class="p">])</span>
                <span class="n">table</span><span class="p">[</span><span class="s2">&quot;notes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;[[</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">]]</span><span class="si">%s</span><span class="s2">&quot;&quot;&quot;</span> <span class="o">%</span> <span class="p">(</span>
                    <span class="n">url</span><span class="p">,</span>
                    <span class="n">schema</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">instanceNote</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">]:</span>
                    <span class="n">colName</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">colName</span> <span class="ow">in</span> <span class="n">schema</span><span class="o">.</span><span class="n">propsByName</span><span class="p">:</span>
                        <span class="n">prop</span> <span class="o">=</span> <span class="n">schema</span><span class="o">.</span><span class="n">propsByName</span><span class="p">[</span><span class="n">colName</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">iri</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                            <span class="n">tooltip</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                            <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">definition</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                                <span class="n">tooltip</span> <span class="o">=</span> <span class="s2">&quot;{</span><span class="si">%s</span><span class="s2">}&quot;</span> <span class="o">%</span> <span class="n">prop</span><span class="o">.</span><span class="n">definition</span>
                            <span class="n">col</span><span class="p">[</span><span class="s2">&quot;link&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;[[</span><span class="si">%s%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">]]&quot;</span> <span class="o">%</span> <span class="p">(</span>
                                <span class="n">prop</span><span class="o">.</span><span class="n">iri</span><span class="p">,</span>
                                <span class="n">tooltip</span><span class="p">,</span>
                                <span class="n">colName</span><span class="p">,</span>
                            <span class="p">)</span>
                            <span class="n">col</span><span class="p">[</span><span class="s2">&quot;special&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># keep column even if generalized</span>
                <span class="k">pass</span>
    <span class="n">plantuml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tableListToPlantUml</span><span class="p">(</span>
        <span class="n">tableList</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
        <span class="n">packageName</span><span class="o">=</span><span class="n">packageName</span><span class="p">,</span>
        <span class="n">generalizeTo</span><span class="o">=</span><span class="n">generalizeTo</span><span class="p">,</span>
        <span class="n">withSkin</span><span class="o">=</span><span class="n">withSkin</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">plantuml</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.uml.UML.tableListToPlantUml" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">tableListToPlantUml</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">packageName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">generalizeTo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">withSkin</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

</h4>


    <div class="doc doc-contents ">

        <p>convert tableList to PlantUml notation</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>tableList(list)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the tableList list of Dicts from getTableList() to convert</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional title to be added</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>packageName(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional packageName to be added</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>generalizeTo(string)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>optional name of a general table to be derived</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>withSkin(boolean)</code>
            </td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>if True add default BITPlan skin parameters</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>string</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>the Plantuml notation for the entities in columns of the given tablelist</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/uml.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">tableListToPlantUml</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">tableList</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">packageName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">generalizeTo</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">withSkin</span><span class="o">=</span><span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    convert tableList to PlantUml notation</span>

<span class="sd">    Args:</span>
<span class="sd">        tableList(list): the tableList list of Dicts from getTableList() to convert</span>
<span class="sd">        title(string): optional title to be added</span>
<span class="sd">        packageName(string): optional packageName to be added</span>
<span class="sd">        generalizeTo(string): optional name of a general table to be derived</span>
<span class="sd">        withSkin(boolean): if True add default BITPlan skin parameters</span>

<span class="sd">    Returns:</span>
<span class="sd">        string: the Plantuml notation for the entities in columns of the given tablelist</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">uml</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">inherit</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="k">if</span> <span class="n">title</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">uml</span> <span class="o">+=</span> <span class="s2">&quot;title</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s2">end title</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">title</span>
    <span class="k">if</span> <span class="n">packageName</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">uml</span> <span class="o">+=</span> <span class="s2">&quot;package </span><span class="si">%s</span><span class="s2"> {</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">packageName</span>
        <span class="n">indent</span> <span class="o">=</span> <span class="s2">&quot;  &quot;</span>
    <span class="k">if</span> <span class="n">generalizeTo</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">generalTable</span> <span class="o">=</span> <span class="n">Schema</span><span class="o">.</span><span class="n">getGeneral</span><span class="p">(</span><span class="n">tableList</span><span class="p">,</span> <span class="n">generalizeTo</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
            <span class="n">inherit</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%s%s</span><span class="s2"> &lt;|-- </span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">indent</span><span class="p">,</span> <span class="n">generalizeTo</span><span class="p">,</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
        <span class="n">tableList</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">generalTable</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">table</span> <span class="ow">in</span> <span class="n">tableList</span><span class="p">:</span>
        <span class="n">classUml</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">sortedColumns</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;columns&quot;</span><span class="p">],</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">col</span><span class="p">:</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">sortedColumns</span><span class="p">:</span>
            <span class="n">mandatory</span> <span class="o">=</span> <span class="s2">&quot;*&quot;</span> <span class="k">if</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;notnull&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="n">pk</span> <span class="o">=</span> <span class="s2">&quot; &lt;&lt;PK&gt;&gt;&quot;</span> <span class="k">if</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;pk&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s2">&quot;&quot;</span>
            <span class="n">colName</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">colType</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="k">if</span> <span class="s2">&quot;link&quot;</span> <span class="ow">in</span> <span class="n">col</span><span class="p">:</span>
                <span class="n">colName</span> <span class="o">=</span> <span class="n">col</span><span class="p">[</span><span class="s2">&quot;link&quot;</span><span class="p">]</span>
            <span class="n">colUml</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">mandatory</span><span class="si">}{</span><span class="n">colName</span><span class="si">}</span><span class="s2"> : </span><span class="si">{</span><span class="n">colType</span><span class="si">}{</span><span class="n">pk</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
            <span class="n">classUml</span> <span class="o">+=</span> <span class="n">colUml</span>
        <span class="n">tableName</span> <span class="o">=</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;notes&quot;</span> <span class="ow">in</span> <span class="n">table</span><span class="p">:</span>
            <span class="n">uml</span> <span class="o">+=</span> <span class="s2">&quot;Note top of </span><span class="si">%s</span><span class="se">\n</span><span class="si">%s</span><span class="se">\n</span><span class="s2">End note</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">tableName</span><span class="p">,</span> <span class="n">table</span><span class="p">[</span><span class="s2">&quot;notes&quot;</span><span class="p">])</span>
        <span class="n">uml</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">indent</span><span class="si">}</span><span class="s2">class </span><span class="si">{</span><span class="n">tableName</span><span class="si">}</span><span class="s2"> &lt;&lt; Entity &gt;&gt; </span><span class="se">{{\n</span><span class="si">{</span><span class="n">classUml</span><span class="si">}{</span><span class="n">indent</span><span class="si">}</span><span class="se">}}\n</span><span class="s2">&quot;</span>
    <span class="n">uml</span> <span class="o">+=</span> <span class="n">inherit</span>
    <span class="k">if</span> <span class="n">packageName</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">uml</span> <span class="o">+=</span> <span class="s2">&quot;}</span><span class="se">\n</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">withSkin</span><span class="p">:</span>
        <span class="n">uml</span> <span class="o">+=</span> <span class="n">UML</span><span class="o">.</span><span class="n">skinparams</span>
    <span class="k">return</span> <span class="n">uml</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.version" class="doc doc-heading">
            <code>version</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2022-03-06</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.version.Version" class="doc doc-heading">
            <code>Version</code>


</h3>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="object">object</span></code></p>


        <p>Version handling for pyLoDStorage</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/version.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">Version</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Version handling for pyLoDStorage</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;pylodstorage&quot;</span>
    <span class="n">version</span> <span class="o">=</span> <span class="n">lodstorage</span><span class="o">.</span><span class="n">__version__</span>
    <span class="n">date</span> <span class="o">=</span> <span class="s2">&quot;2020-09-10&quot;</span>
    <span class="n">updated</span> <span class="o">=</span> <span class="s2">&quot;2025-12-01&quot;</span>
    <span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;python List of Dict (Table) Storage library&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<h2 id="lodstorage.yaml_path" class="doc doc-heading">
            <code>yaml_path</code>


</h2>

    <div class="doc doc-contents ">

        <p>Created on 2025-11-23</p>
<p>@author: wf</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h3 id="lodstorage.yaml_path.YamlPath" class="doc doc-heading">
            <code>YamlPath</code>


</h3>


    <div class="doc doc-contents ">


        <p>provide path to loading configuration or data files by checking:
- a provided path or an optional user-specific location (~/.pylodstorage).</p>







              <details class="quote">
                <summary>Source code in <code>lodstorage/yaml_path.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">YamlPath</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    provide path to loading configuration or data files by checking:</span>
<span class="sd">    - a provided path or an optional user-specific location (~/.pylodstorage).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getSamplePath</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">yamlFileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the path to the sample YAML file usually located in ../sampledata relative to this script.</span>

<span class="sd">        Args:</span>
<span class="sd">            yamlFileName (str): The name of the YAML file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The absolute path to the sample file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="n">sample_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span>
            <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;sampledata&quot;</span><span class="p">,</span> <span class="n">yamlFileName</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">sample_path</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getDefaultPath</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">yamlFileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the path to the YAML file in the default user home location (.pylodstorage).</span>

<span class="sd">        Args:</span>
<span class="sd">            yamlFileName (str): The name of the YAML file.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The full path to the file in the user&#39;s home directory.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">home</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">())</span>
        <span class="n">default_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">home</span><span class="si">}</span><span class="s2">/.pylodstorage/</span><span class="si">{</span><span class="n">yamlFileName</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">return</span> <span class="n">default_path</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getPaths</span><span class="p">(</span>
        <span class="bp">cls</span><span class="p">,</span> <span class="n">yamlFileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">yamlPath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a list of YAML file paths to be used for loading configuration/data.</span>

<span class="sd">        Args:</span>
<span class="sd">            yamlFileName (str): The name of the YAML file.</span>
<span class="sd">            yamlPath (str, optional): The full path to read from. Defaults to None (uses getSamplePath).</span>
<span class="sd">            with_default (bool, optional): Whether to include paths from the default location .pylodstorage in the Home directory. Defaults to True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list: A list of file paths found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">yamlPath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">yamlPath</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">getSamplePath</span><span class="p">(</span><span class="n">yamlFileName</span><span class="p">)</span>

        <span class="n">yamlPaths</span> <span class="o">=</span> <span class="p">[</span><span class="n">yamlPath</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">with_default</span><span class="p">:</span>
            <span class="n">homepath</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">getDefaultPath</span><span class="p">(</span><span class="n">yamlFileName</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">homepath</span><span class="p">):</span>
                <span class="n">yamlPaths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">homepath</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">yamlPaths</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h4 id="lodstorage.yaml_path.YamlPath.getDefaultPath" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getDefaultPath</span><span class="p">(</span><span class="n">yamlFileName</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the path to the YAML file in the default user home location (.pylodstorage).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>yamlFileName</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the YAML file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The full path to the file in the user's home directory.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/yaml_path.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">getDefaultPath</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">yamlFileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the path to the YAML file in the default user home location (.pylodstorage).</span>

<span class="sd">    Args:</span>
<span class="sd">        yamlFileName (str): The name of the YAML file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The full path to the file in the user&#39;s home directory.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">home</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">Path</span><span class="o">.</span><span class="n">home</span><span class="p">())</span>
    <span class="n">default_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">home</span><span class="si">}</span><span class="s2">/.pylodstorage/</span><span class="si">{</span><span class="n">yamlFileName</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">return</span> <span class="n">default_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.yaml_path.YamlPath.getPaths" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getPaths</span><span class="p">(</span><span class="n">yamlFileName</span><span class="p">,</span> <span class="n">yamlPath</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get a list of YAML file paths to be used for loading configuration/data.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>yamlFileName</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the YAML file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>yamlPath</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The full path to read from. Defaults to None (uses getSamplePath).</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>with_default</code>
            </td>
            <td>
                  <code><span title="bool">bool</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Whether to include paths from the default location .pylodstorage in the Home directory. Defaults to True.</p>
              </div>
            </td>
            <td>
                  <code>True</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>list</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of file paths found.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/yaml_path.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">getPaths</span><span class="p">(</span>
    <span class="bp">cls</span><span class="p">,</span> <span class="n">yamlFileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">yamlPath</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">with_default</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get a list of YAML file paths to be used for loading configuration/data.</span>

<span class="sd">    Args:</span>
<span class="sd">        yamlFileName (str): The name of the YAML file.</span>
<span class="sd">        yamlPath (str, optional): The full path to read from. Defaults to None (uses getSamplePath).</span>
<span class="sd">        with_default (bool, optional): Whether to include paths from the default location .pylodstorage in the Home directory. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list: A list of file paths found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">yamlPath</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">yamlPath</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">getSamplePath</span><span class="p">(</span><span class="n">yamlFileName</span><span class="p">)</span>

    <span class="n">yamlPaths</span> <span class="o">=</span> <span class="p">[</span><span class="n">yamlPath</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">with_default</span><span class="p">:</span>
        <span class="n">homepath</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">getDefaultPath</span><span class="p">(</span><span class="n">yamlFileName</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">homepath</span><span class="p">):</span>
            <span class="n">yamlPaths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">homepath</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">yamlPaths</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h4 id="lodstorage.yaml_path.YamlPath.getSamplePath" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">getSamplePath</span><span class="p">(</span><span class="n">yamlFileName</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small>
  </span>

</h4>


    <div class="doc doc-contents ">

        <p>Get the path to the sample YAML file usually located in ../sampledata relative to this script.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>yamlFileName</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The name of the YAML file.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>str</code></td>            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The absolute path to the sample file.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>lodstorage/yaml_path.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">getSamplePath</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">yamlFileName</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the path to the sample YAML file usually located in ../sampledata relative to this script.</span>

<span class="sd">    Args:</span>
<span class="sd">        yamlFileName (str): The name of the YAML file.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The absolute path to the sample file.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">base_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
    <span class="n">sample_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_dir</span><span class="p">,</span> <span class="s2">&quot;..&quot;</span><span class="p">,</span> <span class="s2">&quot;sampledata&quot;</span><span class="p">,</span> <span class="n">yamlFileName</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">sample_path</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>


  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.13a4f30d.min.js"></script>
      
    
  </body>
</html>